[background-image="textplus-fcs.002.png",background-opacity="0.5"]
= Endpunkt-Entwicklung

[.notes]
--
* VSCode Einstellungen, Projekt Kickstart
* Minimaler FCS Endpunkt, Anbindung Suchmaschine, Ergebnis-Serialisierung
* Deployment, Embedded, Erweiterbarkeit
--


[.small]
== Visual Studio Code (Vorschlag)

[.position-absolute.right--10.width-20.zindex--1]
image::vscode-logo.png[CQL-JS Demo]

* Download & Installation: https://code.visualstudio.com/[code.visualstudio.com]
* Extensions:

** *Java*
*** https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack[vscjava.vscode-java-pack]
*** https://marketplace.visualstudio.com/items?itemName=redhat.vscode-xml[redhat.vscode-xml] (optional)

** *Python*
*** https://marketplace.visualstudio.com/items?itemName=ms-python.python[ms-python.python]
*** https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-pylance[ms-python.vscode-pylance], https://marketplace.visualstudio.com/items?itemName=ms-python.black-formatter[ms-python.black-formatter] (optional)

** *Quality of Life*
*** https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens[eamodio.gitlens]
*** https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack[ms-vscode-remote.vscode-remote-extensionpack], https://marketplace.visualstudio.com/items?itemName=ms-vscode.remote-explorer[ms-vscode.remote-explorer] (für WSL oder über SSH)

[.notes]
--
* QoL = Quality of Life
--


== Visual Studio Code – Debugging (Java)

* für `*.war`/Jetty Web-Application Testing
* kein Hot-Code Reloading / keine Änderungen zwischen Kompilierung und Debugging vornehmen!

* VSCode Debug Setting:
** _Run and Debug > Add Configuration … > “Java: Attach by Process ID”_

* Mit Maven Anwendung ausführen:
+
[.code-width-full,bash]
----
MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -agentlib:jdwp=transport=dt_socket,server=y,address=5005" \
    mvn [jetty:run-war|...]
----


[.columns]
== Visual Studio Code – Debugging (Python)

[.column]
--
* `launch.json`

** *pytest*: im “Run and Debug” Menü keine vorgeschlagene Konfiguration
** file/module: nach Gebrauch

* `settings.json`

** *pytest*: coverage muss hier deaktiviert werden!
--
[.column]
--
[source,json]
----
{
    "name": "Python: pytest",
    "type": "python",
    "request": "launch",
    "console": "integratedTerminal",
    "purpose": [
        "debug-test"
    ],
    "justMyCode": false
}
----
[source,json]
----
"python.testing.pytestArgs": [
    ".",
    // disable coverage for debugging
    "--no-cov",
    // disable ansi color output (-vv)
    "-q",
],
----
--


== Endpunkt Projekt Kickstart

* siehe <<Wegweiser Endpunktentwicklung,Wegweiser zur Endpunktimplementierung>>
+
→ Nutzung von Referenz-Endpunktimplementierungen

[.mt-4]
* Nutzung des Korp-Endpunktes

** Java: https://github.com/clarin-eric/fcs-korp-endpoint[github.com/clarin-eric/fcs-korp-endpoint]
** Python: https://github.com/Querela/fcs-korp-endpoint-python/[github.com/Querela/fcs-korp-endpoint-python]
** Java: https://github.com/clarin-eric/fcs-sru-cqi-bridge[github.com/clarin-eric/fcs-sru-cqi-bridge] (CQP/SRU bridge)

* Java: Projektgenerierung mit maven

** Projekt Template: https://github.com/clarin-eric/fcs-endpoint-archetype[github.com/clarin-eric/fcs-endpoint-archetype]

