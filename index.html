<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"><title>Text+ Resource and Search Integration Hackathon</title><meta name="author" content="Erik Körner &lt;koerner@saw-leipzig.de&gt;"><link rel="stylesheet" href="reveal.js/dist/reset.css"><link rel="stylesheet" href="reveal.js/dist/reveal.css"><link rel="stylesheet" href="reveal.js/dist/theme/white.css" id="theme"><!--This CSS is generated by the Asciidoctor reveal.js converter to further integrate AsciiDoc's existing semantic with reveal.js--><style type="text/css">.reveal div.right {
  float: right
}

/* source blocks */
.reveal .listingblock.stretch > .content {
  height: 100%
}

.reveal .listingblock.stretch > .content > pre {
  height: 100%
}

.reveal .listingblock.stretch > .content > pre > code {
  height: 100%;
  max-height: 100%
}

/* auto-animate feature */
/* hide the scrollbar when auto-animating source blocks */
.reveal pre[data-auto-animate-target] {
  overflow: hidden;
}

.reveal pre[data-auto-animate-target] code {
  overflow: hidden;
}

/* add a min width to avoid horizontal shift on line numbers */
code.hljs .hljs-ln-line.hljs-ln-n {
  min-width: 1.25em;
}

/* tables */
table {
  border-collapse: collapse;
  border-spacing: 0
}

table {
  margin-bottom: 1.25em;
  border: solid 1px #dedede
}

table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td {
  padding: .5em .625em .625em;
  font-size: inherit;
  text-align: left
}

table tr th, table tr td {
  padding: .5625em .625em;
  font-size: inherit
}

table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td {
  display: table-cell;
  line-height: 1.6
}

td.tableblock > .content {
  margin-bottom: 1.25em
}

td.tableblock > .content > :last-child {
  margin-bottom: -1.25em
}

table.tableblock, th.tableblock, td.tableblock {
  border: 0 solid #dedede
}

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock {
  border-width: 0 1px 1px 0
}

table.grid-all > tfoot > tr > .tableblock {
  border-width: 1px 1px 0 0
}

table.grid-cols > * > tr > .tableblock {
  border-width: 0 1px 0 0
}

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock {
  border-width: 0 0 1px
}

table.grid-rows > tfoot > tr > .tableblock {
  border-width: 1px 0 0
}

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child {
  border-right-width: 0
}

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock {
  border-bottom-width: 0
}

table.frame-all {
  border-width: 1px
}

table.frame-sides {
  border-width: 0 1px
}

table.frame-topbot, table.frame-ends {
  border-width: 1px 0
}

.reveal table th.halign-left, .reveal table td.halign-left {
  text-align: left
}

.reveal table th.halign-right, .reveal table td.halign-right {
  text-align: right
}

.reveal table th.halign-center, .reveal table td.halign-center {
  text-align: center
}

.reveal table th.valign-top, .reveal table td.valign-top {
  vertical-align: top
}

.reveal table th.valign-bottom, .reveal table td.valign-bottom {
  vertical-align: bottom
}

.reveal table th.valign-middle, .reveal table td.valign-middle {
  vertical-align: middle
}

table thead th, table tfoot th {
  font-weight: bold
}

tbody tr th {
  display: table-cell;
  line-height: 1.6
}

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p {
  font-weight: bold
}

thead {
  display: table-header-group
}

.reveal table.grid-none th, .reveal table.grid-none td {
  border-bottom: 0 !important
}

/* kbd macro */
kbd {
  font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
  display: inline-block;
  color: rgba(0, 0, 0, .8);
  font-size: .65em;
  line-height: 1.45;
  background: #f7f7f7;
  border: 1px solid #ccc;
  -webkit-border-radius: 3px;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em white inset;
  box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em #fff inset;
  margin: 0 .15em;
  padding: .2em .5em;
  vertical-align: middle;
  position: relative;
  top: -.1em;
  white-space: nowrap
}

.keyseq kbd:first-child {
  margin-left: 0
}

.keyseq kbd:last-child {
  margin-right: 0
}

/* callouts */
.conum[data-value] {
  display: inline-block;
  color: #fff !important;
  background: rgba(0, 0, 0, .8);
  -webkit-border-radius: 50%;
  border-radius: 50%;
  text-align: center;
  font-size: .75em;
  width: 1.67em;
  height: 1.67em;
  line-height: 1.67em;
  font-family: "Open Sans", "DejaVu Sans", sans-serif;
  font-style: normal;
  font-weight: bold
}

.conum[data-value] * {
  color: #fff !important
}

.conum[data-value] + b {
  display: none
}

.conum[data-value]:after {
  content: attr(data-value)
}

pre .conum[data-value] {
  position: relative;
  top: -.125em
}

b.conum * {
  color: inherit !important
}

.conum:not([data-value]):empty {
  display: none
}

/* Callout list */
.hdlist > table, .colist > table {
  border: 0;
  background: none
}

.hdlist > table > tbody > tr, .colist > table > tbody > tr {
  background: none
}

td.hdlist1, td.hdlist2 {
  vertical-align: top;
  padding: 0 .625em
}

td.hdlist1 {
  font-weight: bold;
  padding-bottom: 1.25em
}

/* Disabled from Asciidoctor CSS because it caused callout list to go under the
 * source listing when .stretch is applied (see #335)
 * .literalblock+.colist,.listingblock+.colist{margin-top:-.5em} */
.colist td:not([class]):first-child {
  padding: .4em .75em 0;
  line-height: 1;
  vertical-align: top
}

.colist td:not([class]):first-child img {
  max-width: none
}

.colist td:not([class]):last-child {
  padding: .25em 0
}

/* Override Asciidoctor CSS that causes issues with reveal.js features */
.reveal .hljs table {
  border: 0
}

/* Callout list rows would have a bottom border with some reveal.js themes (see #335) */
.reveal .colist > table th, .reveal .colist > table td {
  border-bottom: 0
}

/* Fixes line height with Highlight.js source listing when linenums enabled (see #331) */
.reveal .hljs table thead tr th, .reveal .hljs table tfoot tr th, .reveal .hljs table tbody tr td, .reveal .hljs table tr td, .reveal .hljs table tfoot tr td {
  line-height: inherit
}

/* Columns layout */
.columns .slide-content {
  display: flex;
}

.columns.wrap .slide-content {
  flex-wrap: wrap;
}

.columns.is-vcentered .slide-content {
  align-items: center;
}

.columns .slide-content > .column {
  display: block;
  flex-basis: 0;
  flex-grow: 1;
  flex-shrink: 1;
}

.columns .slide-content > .column > * {
  padding: .75rem;
}

/* See #353 */
.columns.wrap .slide-content > .column {
  flex-basis: auto;
}

.columns .slide-content > .column.is-full {
  flex: none;
  width: 100%;
}

.columns .slide-content > .column.is-four-fifths {
  flex: none;
  width: 80%;
}

.columns .slide-content > .column.is-three-quarters {
  flex: none;
  width: 75%;
}

.columns .slide-content > .column.is-two-thirds {
  flex: none;
  width: 66.6666%;
}

.columns .slide-content > .column.is-three-fifths {
  flex: none;
  width: 60%;
}

.columns .slide-content > .column.is-half {
  flex: none;
  width: 50%;
}

.columns .slide-content > .column.is-two-fifths {
  flex: none;
  width: 40%;
}

.columns .slide-content > .column.is-one-third {
  flex: none;
  width: 33.3333%;
}

.columns .slide-content > .column.is-one-quarter {
  flex: none;
  width: 25%;
}

.columns .slide-content > .column.is-one-fifth {
  flex: none;
  width: 20%;
}

.columns .slide-content > .column.has-text-left {
  text-align: left;
}

.columns .slide-content > .column.has-text-justified {
  text-align: justify;
}

.columns .slide-content > .column.has-text-right {
  text-align: right;
}

.columns .slide-content > .column.has-text-left {
  text-align: left;
}

.columns .slide-content > .column.has-text-justified {
  text-align: justify;
}

.columns .slide-content > .column.has-text-right {
  text-align: right;
}

.text-left {
  text-align: left !important
}

.text-right {
  text-align: right !important
}

.text-center {
  text-align: center !important
}

.text-justify {
  text-align: justify !important
}

.footnotes {
  border-top: 1px solid rgba(0, 0, 0, 0.2);
  padding: 0.5em 0 0 0;
  font-size: 0.65em;
  margin-top: 4em;
}

.byline {
  font-size:.8em
}
ul.byline {
  list-style-type: none;
}
ul.byline li + li {
  margin-top: 0.25em;
}
</style><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/v4-shims.min.css"><link rel="stylesheet" href="css/presentation.css"></head><body><div class="reveal"><div class="slides"><section class="title" data-state="title" data-background-image="images/textplus-fcs.002.png" data-background-opacity="0.5"><h1>Text+ Resource and Search Integration Hackathon</h1><p class="byline">
  <span class="author">Erik Körner &lt;koerner@saw-leipzig.de&gt;</span>
  </p></section><section id="_table_of_contents"><div class="slide-content"><div id="toc" class="toc"><div id="toctitle">Table of Contents</div><ol class="sectlevel1"><li><a href="#_table_of_contents">Table of Contents</a></li><li><a href="#_begrüßung_und_überblick">Begrüßung und Überblick</a></li><li><a href="#_einführung_in_die_föderierte_inhaltssuche_fcs">Einführung in die Föderierte Inhaltssuche (FCS)</a></li><li><a href="#_wegweiser_endpunktentwicklung">Wegweiser Endpunktentwicklung</a></li><li><a href="#_technische_grundlagen">Technische Grundlagen</a></li><li><a href="#_referenzimplementierungen">Referenzimplementierungen</a></li><li><a href="#_resources_und_data_views">Resources und Data Views</a></li><li><a href="#_query_translation">Query Translation</a></li><li><a href="#_endpunkt_entwicklung">Endpunkt-Entwicklung</a></li><li><a href="#_deployment">Deployment</a></li><li><a href="#_ressourcen">Ressourcen</a></li></ol></div>
<div style="page-break-after: always;"></div></div></section>
<section><section id="_begrüßung_und_überblick" data-background-image="images/textplus-fcs.002.png" data-background-opacity="0.5"><h2>Begrüßung und Überblick</h2><div class="slide-content"><aside class="notes"><div class="ulist"><ul><li><p>Organisatorisches, Agenda</p></li><li><p>Vorstellung, Text+ und CLARIN</p></li></ul></div></aside></div></section><section id="_agenda_donnerstag_16_11_2023"><h2>Agenda Donnerstag (16.11.2023)</h2><div class="slide-content"><table class="tableblock frame-none grid-none"><colgroup><col><col></colgroup><tbody><tr><td class="tableblock halign-right valign-top"><p class="tableblock">9:00 Uhr</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Vortrag: Einführung in die Föderierte Inhaltssuche</p></td></tr><tr><td class="tableblock halign-right valign-top"><p class="tableblock">10:30 Uhr</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Teilnehmer: Vorstellung Projekte und Ressourcen</p></td></tr><tr><td class="tableblock halign-right valign-top"><p class="tableblock">12:00 Uhr</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Mittagspause</p></td></tr><tr><td class="tableblock halign-right valign-top"><p class="tableblock">13:00 Uhr</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Vortrag: Implementierung und Query Translation</p></td></tr><tr><td class="tableblock halign-right valign-top"><p class="tableblock">15:30 Uhr</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Coding-Session</p></td></tr><tr><td class="tableblock halign-right valign-top"><p class="tableblock">20:00 Uhr</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Get-together</p></td></tr></table>
<aside class="notes"><div class="ulist"><ul><li><p><a href="https://events.gwdg.de/event/545/timetable/#20231116" class="bare">https://events.gwdg.de/event/545/timetable/#20231116</a></p></li></ul></div></aside></div></section><section id="_agenda_freitag_17_11_2023"><h2>Agenda Freitag (17.11.2023)</h2><div class="slide-content"><table class="tableblock frame-none grid-none"><colgroup><col><col></colgroup><tbody><tr><td class="tableblock halign-right valign-top"><p class="tableblock">9:00 Uhr</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Coding-Session</p></td></tr><tr><td class="tableblock halign-right valign-top"><p class="tableblock">12:00 Uhr</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Mittagspause</p></td></tr><tr><td class="tableblock halign-right valign-top"><p class="tableblock">13:00 Uhr</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Coding-Session</p></td></tr><tr><td class="tableblock halign-right valign-top"><p class="tableblock">14:00 Uhr</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Teilnehmer: Präsentation der Ergebnisse</p></td></tr><tr><td class="tableblock halign-right valign-top"><p class="tableblock">15:00 Uhr</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Ende</p></td></tr></table>
<aside class="notes"><div class="ulist"><ul><li><p><a href="https://events.gwdg.de/event/545/timetable/#20231117" class="bare">https://events.gwdg.de/event/545/timetable/#20231117</a></p></li></ul></div></aside></div></section><section id="_ziel_des_workshop"><h2>Ziel des Workshop</h2><div class="slide-content"><div class="ulist"><ul><li><p>Verständnis von der FCS und der technischen Infrastruktur</p></li><li><p>Kenntnisse zu Referenzbibliotheken und Werkzeugen</p></li><li><p>Aufbau eigener FCS Endpunkte</p><div class="ulist"><ul><li><p>Entwicklung</p></li><li><p>Debug und Deployment</p></li><li><p>Test mit Validator &amp; Integration in Aggregator</p></li></ul></div></li><li><p>Präsentation im gemeinsamen Aggregator?</p></li></ul></div></div></section><section id="_über_mich"><h2>Über mich</h2><div class="slide-content"><div class="ulist"><ul><li><p>Erik Körner</p></li><li><p>Master Informatik, PhD, Schwerpunkt NLP</p></li><li><p>Studium an der Universität Leipzig …</p><div class="paragraph"><p>… Wiss. Mitarbeiter an der Universität Leipzig, ASV …</p></div>
<div class="paragraph"><p>… aktuell im Projekt Text+ an der SAW</p></div></li><li><p>seit Mitte 2022 Arbeit mit und an FCS im Rahmen von Text+</p></li><li><p>seit 2023 offiziell Maintainer für FCS in CLARIN-ERIC</p></li></ul></div></div></section><section id="_text" class="columns"><h2>Text+</h2><div class="slide-content"><div class="ulist"><ul><li><p><em>NFDI-Konsortium</em> zum Aufbau einer auf <em>Sprach- und Textdaten</em> ausgerichteten Forschungsdateninfrastruktur</p></li><li><p>ungefähr 30 beteiligte Institutionen:</p><div class="ulist"><ul><li><p>Akademien</p></li><li><p>Universitäten</p></li><li><p>Bibliotheken</p></li><li><p>Archive</p></li><li><p>Stiftungen</p></li></ul></div></li><li><p>Start 10/2021</p></li></ul></div>
<div class="imageblock position-absolute width-75 right-0 bottom-0"><img src="images/textplus-overview.png" alt="Text+ Überblick"></div></div></section><section id="_text_struktureller_aufbau"><h2>Text+ – Struktureller Aufbau</h2><div class="slide-content"><div class="imageblock"><img src="images/textplus-structure.png" alt="Text+ Überblick"></div></div></section><section id="_clarin_eric" class="columns"><h2>CLARIN-ERIC</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong>CLARIN</strong> = <strong>C</strong><em>ommon</em> <strong>La</strong><em>nguage</em> <strong>R</strong><em>esources and Technology</em> <strong>In</strong><em>frastructure</em></p></li><li><p><strong>ERIC</strong> = <strong>E</strong><em>uropean</em> <strong>R</strong><em>esearch</em> <strong>I</strong><em>nfrastructure</em> <strong>C</strong><em>onsortium</em></p></li><li><p>verteilte digitale Forschungsinfrastruktur</p></li><li><p>teilnehmende Zentren aus Europa und darüber hinaus</p></li><li><p>Universitäten, Forschungszentren, Bibliotheken und Archive</p></li><li><p>gegründet 2012</p></li></ul></div>
<div class="imageblock" style="float: right"><img src="images/clarin-map.png" alt="Text+ Überblick"></div></div></section><section id="_clarin_eric_2"><h2>CLARIN-ERIC</h2><div class="slide-content"><div class="ulist"><ul><li><p>unterstützt Forschung in den <em>Geistes- und Sozialwissenschaften</em></p></li><li><p><em>einfacher und nachhaltiger</em> Zugriff auf <em>multimodale digitale Sprachdaten</em> (Text, Audio, Video) und <em>fortschrittliche Tools</em> (Datensätze erkunden, analysieren, kombinieren)</p></li><li><p><em>interoperable</em> Tools und Daten → Datensammlungen können kombiniert und Tools aus verschiedenen Quellen <em>verkettet</em> werden, um unabhängig von ihrem Standort Operationen unterschiedlicher Komplexität auszuführen</p></li><li><p>basierend auf <em>standardisierten</em> Schnittstellen und Kommunikationsprotokollen</p></li></ul></div>
<div style="page-break-after: always;"></div></div></section></section>
<section><section id="_einführung_in_die_föderierte_inhaltssuche_fcs" data-background-image="images/textplus-fcs.002.png" data-background-opacity="0.5"><h2>Einführung in die Föderierte Inhaltssuche (FCS)</h2><div class="slide-content"><aside class="notes"><div class="ulist"><ul><li><p>Begriffserklärung, Geschichte</p></li></ul></div></aside></div></section><section id="_was_ist_die_fcs"><h2>Was ist die FCS?</h2><div class="slide-content"><div class="ulist"><ul><li><p>“Federated Content Search” von <a href="https://www.clarin.eu/content/content-search">CLARIN</a></p><div class="paragraph"><p>übersetzt: Inhaltssuche über verteilte Ressourcen</p></div>
<div class="paragraph"><p>auch: Föderierte “Corpus Query Platform”</p></div></li><li><p><em>Suche nach Mustern in verteilten Text-Sammlungen</em></p></li><li><p>kein zentraler Index!</p></li><li><p>Text-Ressourcen umfassen annotierte Korpora, Volltexte usw.</p></li><li><p>FCS = Interface-Spezifikation, Such-Infrastruktur und Software-Ökosystem</p></li><li><p>Nutzung von etablierten Standards und Erweiterbarkeit!</p></li></ul></div></div></section><section id="_was_umfasst_die_fcs"><h2>Was umfasst die FCS?</h2><div class="slide-content"><div class="paragraph"><p><strong>Interface-Spezifikation</strong></p></div>
<div class="ulist"><ul><li><p>Beschreibung von Suchprotokoll (Anfragesprache, Formate und Kommunikationswege)
“für homogenen Zugriff auf heterogene Suchmaschinen”</p></li><li><p>RESTful Protokoll</p></li></ul></div>
<div class="openblock fragment"><div class="content"><div class="paragraph"><p><strong>Such-Infrastruktur in CLARIN und Text+</strong></p></div>
<div class="ulist"><ul><li><p>zentraler Client (Daten “Aggregator” und Webportal)</p></li><li><p>dezentrale Endpunkte an den Datenzentren (lokale Suchmaschinen auf Ressourcen)</p></li></ul></div></div></div></div></section><section id="_was_umfasst_die_fcs_2"><h2>Was umfasst die FCS? (2)</h2><div class="slide-content"><div class="paragraph"><p><strong>Software-Ökosystem primär in Java</strong></p></div>
<div class="ulist"><ul><li><p>Bibliotheken (Java, Python, …)</p></li><li><p>Tools (Validator, Aggregator, Registry)</p></li></ul></div></div></section><section id="_voraussetzungen_zur_teilnahme_an_der_fcs"><h2>Voraussetzungen zur Teilnahme an der FCS</h2><div class="slide-content"><div class="ulist"><ul><li><p>(eigene) Text-Ressourcen</p></li><li><p>Such-“Maschine” auf Text-Ressourcen</p><div class="ulist"><ul><li><p>Minimum: Volltextsuche</p></li></ul></div></li><li><p>Deployment von FCS-Endpunkt mit öffentlichem Zugriff</p></li></ul></div></div></section><section id="_vor_und_nachteile_für_die_fcs" class="columns"><h2>Vor- und Nachteile für die FCS</h2><div class="slide-content"><div class="openblock column"><div class="content"><div class="paragraph"><p><strong>Vorteile</strong></p></div>
<div class="ulist"><ul><li><p>Integration vieler Ressourcen, Verknüpfung und Vergleich von Ergebnissen</p></li><li><p>Integration mit anderen Tools (Weblicht, Registry/VLO, Switchboard, …)</p></li><li><p>gleiche Querys, Formate, Präsentation</p></li><li><p>keine doppelte Datenhaltung, Inkonsistenz</p></li></ul></div></div></div>
<div class="openblock column"><div class="content"><div class="paragraph"><p><strong>Nachteile</strong></p></div>
<div class="ulist"><ul><li><p>keine Kontrolle über Ressourcen</p></li><li><p>keine deterministischen Ergebnisse (z.B. Links für Publikationen)</p></li><li><p>kein globales Ranking von Ergebnissen möglich</p></li></ul></div></div></div></div></section><section id="_vor_und_nachteile_für_die_fcs_endpunkte" class="columns"><h2>Vor- und Nachteile für die FCS Endpunkte</h2><div class="slide-content"><div class="openblock column"><div class="content"><div class="paragraph"><p><strong>Vorteile</strong></p></div>
<div class="ulist"><ul><li><p>Kontrolle über Ressourcen und Suche (Ranking, Fuzzy, …)</p></li><li><p>keine Duplication von Daten durch zentralen Index</p></li><li><p>erhöhte Sichtbarkeit in größerem Ressourcenkatalog</p></li></ul></div></div></div>
<div class="openblock column"><div class="content"><div class="paragraph"><p><strong>Nachteile</strong></p></div>
<div class="ulist"><ul><li><p>Deployment von (extra) Endpoint notwendig</p></li></ul></div></div></div></div></section><section id="_vergleich_fcs_mit_zentralem_index"><h2>Vergleich FCS mit zentralem Index</h2><div class="slide-content"><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:14.2857%"><col style="width:42.8571%"><col style="width:42.8572%"></colgroup><tbody><tr><th class="tableblock halign-left valign-top"><p class="tableblock header">Daten</p></th><td class="tableblock halign-left valign-top"><p class="tableblock">➕ bei Endpunkten</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">➖ doppelte Datenhaltung, mögliche Inkonsistenz (Alter, Änderungen); rechtlich evtl. keine Weitergabe möglich</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class="tableblock header">Daten-Updates</p></th><td class="tableblock halign-left valign-top"><p class="tableblock">➕ Endpunkte können schnell reagieren</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">➖ schwierig, z.B. Entfernen von Ressourcen bei rechtlichen Problemen; Updates mit längeren Zeiten verbunden, falls überhaupt möglich</p></td></tr></table></div></section><section id="_vergleich_fcs_mit_zentralem_index_2"><h2>Vergleich FCS mit zentralem Index (2)</h2><div class="slide-content"><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:14.2857%"><col style="width:42.8571%"><col style="width:42.8572%"></colgroup><tbody><tr><th class="tableblock halign-left valign-top"><p class="tableblock header">Globales Ranking</p></th><td class="tableblock halign-left valign-top"><p class="tableblock">➖ sehr schwierig/unmöglich</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">➕ gut möglich (?), vermutlich implizite Annahme zu und Normalisierung von Daten für Indizierung</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class="tableblock header">Facettierung</p></th><td class="tableblock halign-left valign-top"><p class="tableblock">➖ schwierig (z.B. über externe Metadaten; nicht direkt vorgesehen)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">➕ Indizierung erlaubt Clustering/Klassifikation nach Themen und Kategorien</p></td></tr></table></div></section><section id="_geschichte"><h2>Geschichte</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong>~ 2011</strong> als Working Group in CLARIN gestartet</p></li><li><p><strong>Mai 2011</strong> <a href="https://trac.clarin.eu/wiki/Clarin%20Federated%20Search%20Demonstrator">EDC/FCS Workshop</a></p></li><li><p><strong>~ 2011–2013</strong> Initiale Version, nun als <strong>FCS “Legacy”</strong> benannt</p><div class="ulist"><ul><li><p>SRU Scan für Ressourcen, BASIC Search (CQL/Volltext), KWIC</p></li></ul></div></li><li><p><strong>April 2013</strong> <a href="https://www.clarin.eu/event/2013/federated-content-search-workshop">FCS Workshop</a></p></li><li><p><strong>~ 2013/2014</strong> Code und Spec für <strong>FCS Core 1.0</strong></p><div class="ulist"><ul><li><p>fcs-simple-endpoint 1.0.0, sru-server 1.5.0</p></li><li><p>BASIC Hits Data View, keine scan Operation mehr</p></li></ul></div></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p>vieles in den <em>Annalen der Geschichte</em> verschwunden …</p></li><li><p><a href="https://github.com/clarin-eric/fcs-misc/tree/main/historical/documents" class="bare">https://github.com/clarin-eric/fcs-misc/tree/main/historical/documents</a></p></li><li><p><a href="https://trac.clarin.eu/wiki/FederatedSearch?version=1" class="bare">https://trac.clarin.eu/wiki/FederatedSearch?version=1</a></p></li><li><p><a href="https://trac.clarin.eu/browser/FCSSimpleEndpoint/tags" class="bare">https://trac.clarin.eu/browser/FCSSimpleEndpoint/tags</a></p></li><li><p><a href="https://trac.clarin.eu/wiki/FCS/Specification?action=history" class="bare">https://trac.clarin.eu/wiki/FCS/Specification?action=history</a></p></li><li><p><a href="https://trac.clarin.eu/wiki/Taskforces/FCS/FCS-Specification-Draft?action=history" class="bare">https://trac.clarin.eu/wiki/Taskforces/FCS/FCS-Specification-Draft?action=history</a></p></li><li><p><a href="https://www.clarin.eu/event/2013/federated-content-search-workshop" class="bare">https://www.clarin.eu/event/2013/federated-content-search-workshop</a></p></li><li><p>EDC: European Demonstrator Case</p></li></ul></div></aside></div></section><section id="_geschichte_2"><div class="slide-content"><div class="ulist"><ul><li><p><strong>~ 2015/2016</strong> Spec und Code für <strong>FCS Core 2.0</strong></p><div class="ulist"><ul><li><p>fcs-simple-endpoint 1.3.0, sru-server 1.8.0</p></li><li><p>Advanced Data Views (FCS-QL), …</p></li></ul></div></li><li><p><strong>2022</strong> FCS Schwerpunkt in Text+ (<em>Findability</em>)</p></li><li><p><strong>2023</strong> neuer FCS-Maintainer in CLARIN</p></li></ul></div></div></section><section id="_fcs_architektur" data-background-image="images/LexFCS_Diagram_v3.png" data-background-size="contain"></section><section id="_kommunikationsprotokoll"><h2>Kommunikationsprotokoll</h2><div class="slide-content"><div class="paragraph"><p>SRU (Search/Retrieval via URL) / OASIS searchRetrieve</p></div>
<div class="ulist"><ul><li><p>Standardisiert durch <em>Library of Congress (LoC)</em> / <em>OASIS</em></p><div class="ulist"><ul><li><p>RESTful</p></li><li><p><strong>Explain</strong>: Vorhandene Ressourcen</p><div class="ulist"><ul><li><p>Sprache, Annotationen, unterstützte Datenformate etc.</p></li></ul></div></li><li><p><strong>SearchRetrieve</strong>: Suchanfrage</p></li></ul></div></li><li><p>Daten als XML</p></li><li><p>Erlaubt Erweiterungen des Protokolls</p></li></ul></div></div></section><section id="_grundannahme_zur_datenstruktur"><h2>Grundannahme zur Datenstruktur</h2><div class="slide-content"><div class="ulist"><ul><li><p>verschiedene (optionale) Annotationsebenen (Layer)</p></li></ul></div>
<div class="openblock x-small"><div class="content"><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:20%"><col style="width:20%"><col style="width:20%"><col style="width:20%"><col style="width:20%"></colgroup><tbody><tr><th class="tableblock halign-left valign-top"><p class="tableblock header">Volltext</p></th><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Die</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Autos</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sind</strong></p></td><td class="tableblock halign-left valign-top"><p class="tableblock"><strong>schnell</strong></p></td></tr><tr><th class="tableblock halign-left valign-top"><p class="tableblock header">Wortart</p></th><td class="tableblock halign-left valign-top"><p class="tableblock">DET</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">NOUN</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">VERB</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">ADJ</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class="tableblock header">Grundform</p></th><td class="tableblock halign-left valign-top"><p class="tableblock">Das</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Auto</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">ist</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">schnell</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class="tableblock header">Phonetische Transkription</p></th><td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class="tableblock header">Orthographische Transkription</p></th><td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">&#8230;&#8203;</p></td></tr><tr><th class="tableblock halign-left valign-top"><p class="tableblock header">[&#8230;&#8203;]</p></th><td class="tableblock halign-left valign-top"></td><td class="tableblock halign-left valign-top"></td><td class="tableblock halign-left valign-top"></td><td class="tableblock halign-left valign-top"></td></tr></table></div></div></div></section><section id="_explain_ressourcen_discovery"><h2>Explain: Ressourcen-Discovery</h2><div class="slide-content"><div class="imageblock"><img src="images/epdesc-1.png" alt="Endpoint Description"></div></div></section><section id="_explain_ressourcen_discovery_2"><h2>Explain: Ressourcen-Discovery (2)</h2><div class="slide-content"><div class="imageblock"><img src="images/epdesc-2.png" alt="Endpoint Description" width="erweiterbar"></div></div></section><section id="_explain_ressourcenstruktur"><h2>Explain: Ressourcenstruktur</h2><div class="slide-content"><div class="imageblock"><img src="images/epdesc-3.png" alt="Endpoint Description" width="Ressourcenstruktur"></div></div></section><section id="_anfragesprache_fcs_ql"><h2>Anfragesprache FCS-QL</h2><div class="slide-content"><div class="ulist"><ul><li><p>Orientiert sich an CQP</p></li><li><p>Unterstützt verschiedene Annotationslayer</p></li></ul></div>
<div class="imageblock"><img src="images/fcsql-query-builder.png" alt="Visual Query Builder for FCS-QL"></div></div></section><section id="_ergebnisvisualisierung"><h2>Ergebnisvisualisierung</h2><div class="slide-content"><div class="imageblock"><img src="images/fcs-results-hits.png" alt="HITS Results"></div></div></section><section id="_ergebnisvisualisierung_2"><h2>Ergebnisvisualisierung (2)</h2><div class="slide-content"><div class="imageblock"><img src="images/fcs-results-kwic.png" alt="KWIC Results"></div></div></section><section id="_ergebnisvisualisierung_3"><h2>Ergebnisvisualisierung (3)</h2><div class="slide-content"><div class="imageblock"><img src="images/fcs-results-adv.png" alt="ADV Results"></div></div></section><section id="_aktueller_stand_der_fcs"><h2>Aktueller Stand der FCS</h2><div class="slide-content"><div class="ulist"><ul><li><p>Aktuelle Version der Spezifikation: <strong>FCS Core 2.0</strong></p></li><li><p>Poster auf <a href="https://www.clarin.eu/sites/default/files/CLARIN2023_Bazaar_29.pdf">Bazaar @ CLARIN2023</a> zum aktuellen Stand</p></li><li><p>😎 “Awesome FCS” List: <a href="https://github.com/clarin-eric/awesome-fcs">github.com/clarin-eric/awesome-fcs</a>
mit relevanten Links zu Specs, Tools, Bibliotheken, Implementierungen uvm.</p><div class="ulist"><ul><li><p>Text+ Ergänzungen (z.B. zu LexFCS/LexCQL/Forks/Software): <a href="https://gitlab.gwdg.de/textplus/ag-fcs-documents/-/blob/main/awesome-fcs.md?ref_type=heads">gitlab.gwdg.de/textplus/ag-fcs-documents/-/blob/main/awesome-fcs.md</a></p></li></ul></div></li></ul></div></div></section><section id="_aktueller_stand_der_fcs_2"><div class="slide-content"><div class="ulist"><ul><li><p>CLARIN Spezifikationen: <a href="https://github.com/clarin-eric/fcs-misc">github.com/clarin-eric/fcs-misc</a></p></li><li><p>Kleines Ökosystem (Code auf <a href="https://github.com/clarin-eric?q=fcs">Github</a>/Gitlab)</p><div class="ulist"><ul><li><p>Software-Libraries (SRU/FCS, Endpunkt + Client, Java/Python)</p></li><li><p>Aggregator (Code: Github, Text+ Fork)</p></li><li><p>Online-Validator für Endpunkte (<a href="http://clarin.ids-mannheim.de/srutest">srutest</a>, Code: <a href="https://github.com/clarin-eric/fcs-endpoint-tester">Github</a>)</p></li></ul></div></li><li><p>Endpunkte-Registratur: <a href="https://centres.clarin.eu/fcs">centres.clarin.eu/fcs</a></p></li></ul></div></div></section><section id="_aktuelle_arbeiten"><h2>Aktuelle Arbeiten</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong>Lexical Resources</strong> Erweiterung</p><div class="ulist"><ul><li><p>erste Spezifikation und Implementierung in Text+</p></li><li><p>Offizielle Erweiterung von CLARIN → ~2024 Working Plan</p></li></ul></div></li></ul></div>
<div class="ulist mt-3"><ul><li><p><strong>AAI</strong>-Einbindung</p><div class="ulist"><ul><li><p>Spezifikation und Implementierung</p></li><li><p>Ziel: Unterstützung <em>zugangsbeschränkte Ressourcen</em></p></li><li><p>Absicherung des Aggregators über Shibboleth → Weitergabe von AAI-Attributen an Endpunkte</p></li><li><p>Vorarbeit aus CLARIAH-DE, Teil des Text+ Arbeitsplans (IDS Mannheim, Uni/SAW Leipzig, Vorarbeiten BBAW)</p></li></ul></div></li></ul></div></div></section><section id="_aktuelle_arbeiten_2"><div class="slide-content"><div class="ulist"><ul><li><p><strong>Syntactic Search</strong> (?)</p></li></ul></div>
<div class="ulist mt-3"><ul><li><p>Größerer Bedarf an föderierten Suchverfahren für Textressourcen in <strong>Text+</strong> (Editionen, Collections)</p></li></ul></div></div></section><section id="_aktueller_stand_bzgl_lexical_resources"><h2>Aktueller Stand bzgl. <strong>Lexical Resources</strong></h2><div class="slide-content"><div class="ulist"><ul><li><p>CLARIN-EU Taskforce</p></li><li><p>Arbeitsplan CLARIN ERIC: „extending the protocol to cover additional data types (e.g. lexica) will be explored“</p><div class="ulist"><ul><li><p>im CLARIN 2024 Working Plan</p></li></ul></div></li><li><p>Interessensbekundungen aus verschiedenen Ländern</p></li><li><p>Erste Vorarbeiten: „RABA“ (Estland): u.a. „Eesti Wordnet“</p></li></ul></div></div></section><section id="_aktueller_stand_bzgl_lexical_resources_2"><h2>Aktueller Stand bzgl. <strong>Lexical Resources</strong></h2><div class="slide-content"><div class="ulist"><ul><li><p>Erste Spezifikation und Implementierung in Text+</p><div class="ulist"><ul><li><p>Spezifikation auf Zenodo: <a href="https://zenodo.org/records/7849754">zenodo.org/records/7849754</a></p></li><li><p>Präsentation auf eLex 2023: <a href="https://elex.link/elex2023/wp-content/uploads/69.pdf">“A Federated Search and Retrieval Platform for Lexical Resources in Text+ and CLARIN”</a></p></li><li><p>Aggregator: <a href="https://fcs.text-plus.org/?&amp;queryType=lex">fcs.text-plus.org/?queryType=lex</a></p></li></ul></div></li></ul></div></div></section><section id="_aktueller_stand_von_teilnehmenden"><h2>Aktueller Stand von Teilnehmenden</h2><div class="slide-content"><div class="paragraph left"><p><strong>CLARIN</strong> (<a href="https://contentsearch.clarin.eu/">contentsearch.clarin.eu</a>, <a href="https://centres.clarin.eu/fcs">Registry</a>)</p></div>
<div class="ulist"><ul><li><p>209 Ressourcen (94 in Advanced)</p><div class="paragraph"><p>in 61 Sprachen</p></div>
<div class="paragraph"><p>von 20 Institutionen in 12 Ländern</p></div></li></ul></div>
<div class="paragraph left"><p><strong>Text+</strong> (<a href="https://fcs.text-plus.org/">fcs.text-plus.org</a>)</p></div>
<div class="ulist"><ul><li><p>53 Ressourcen (17 in Advanced, 30 Lexical)</p><div class="paragraph"><p>in 6 Sprachen</p></div>
<div class="paragraph"><p>von 9 Institutionen in Deutschland</p></div></li></ul></div></div></section><section id="_integration_in_fcs_infrastruktur"><h2>Integration in FCS Infrastruktur</h2><div class="slide-content"><div class="paragraph left"><p><strong>Text+</strong></p></div>
<div class="ulist"><ul><li><p>Side-Loading im Aggregator</p></li><li><p><em>WIP</em>: Registry (Verzeichnis von Endpunkten)</p></li></ul></div>
<div class="paragraph left"><p><strong>CLARIN</strong></p></div>
<div class="ulist"><ul><li><p>Alpha/Beta über Side-Loading in den Aggregator</p></li><li><p>Stable/Long-Term: Eintrag in Centre Registry</p><div class="ulist"><ul><li><p>CLARIN Account + <a href="https://www.clarin.eu/webform/registration-form-centre-registry">Formular</a> als Centre</p></li><li><p>damit auch Monitoring etc.</p></li></ul></div></li></ul></div></div></section><section id="_weitere_nutzung_der_fcs"><h2>Weitere Nutzung der FCS</h2><div class="slide-content"><div class="ulist"><ul><li><p>Entwicklung eines alternativen Aggregator-Frontends als <em>Web Component</em></p><div class="ulist"><ul><li><p>Code: <a href="https://git.saw-leipzig.de/text-plus/FCS/textplus-fcs-store">Vue.js Store</a> + <a href="https://git.saw-leipzig.de/text-plus/FCS/textplus-fcs-vuetify">Vuetify Komponenten (Dialog)</a>; <a href="https://tppssi-demo.saw-leipzig.de/">Demo</a></p></li><li><p>Nutzung der Aggregator-API</p></li><li><p>Einschränkung auf Teilmenge der Ressourcen, z.B. für Integration auf eigener Website</p></li><li><p>Facettierung, alternative Visualisierung</p></li></ul></div></li></ul></div></div></section><section id="_bootstrapping_endpunkt_entwicklung"><h2>Bootstrapping Endpunkt Entwicklung</h2><div class="slide-content"><div class="ulist"><ul><li><p>Java: Maven Archetype <a href="https://github.com/clarin-eric/fcs-endpoint-archetype">github.com/clarin-eric/fcs-endpoint-archetype</a></p></li><li><p>Java &amp; Python (Referenzimplementierung Korp):</p><div class="ulist"><ul><li><p><a href="https://github.com/clarin-eric/fcs-korp-endpoint">github.com/clarin-eric/fcs-korp-endpoint</a></p></li><li><p><a href="https://github.com/Querela/fcs-korp-endpoint-python">github.com/Querela/fcs-korp-endpoint-python</a></p></li></ul></div></li><li><p>😎 “Awesome FCS” List: <a href="https://github.com/clarin-eric/awesome-fcs">github.com/clarin-eric/awesome-fcs</a></p><div class="ulist"><ul><li><p>Liste von Referenz-Implementierungen, Endpunkten, Query-Parsern</p></li><li><p>Code zu FCS SRU Aggregator und SRU Validator</p></li></ul></div></li></ul></div>
<div style="page-break-after: always;"></div></div></section></section>
<section><section id="_wegweiser_endpunktentwicklung" data-background-image="images/textplus-fcs.002.png" data-background-opacity="0.5"><h2>Wegweiser Endpunktentwicklung</h2><div class="slide-content"><aside class="notes"><div class="ulist"><ul><li><p>Wichtige Vorabfragen</p></li><li><p>Existierende Implementierungen, Ressourcen zur Neuentwicklung</p></li><li><p>Voraussetzungen</p></li></ul></div></aside></div></section><section id="_entwicklungsentscheidungen" class="left"><h2>Entwicklungsentscheidungen</h2><div class="slide-content"><div class="paragraph"><p>❓ Kann ich Endpunkt selber hosten?</p></div>
<div class="paragraph ms-5 mb-5"><p>❗ nein → HelpDesk: CLARIN, Text+</p></div>
<div class="paragraph"><p>❓ Welche Art von Daten besitze ich?</p></div>
<div class="paragraph mds-5 mb-5"><p>❗ Rohtext, Vertical/CONLL, TEI, …</p></div>
<div class="paragraph"><p>❓ Welche Suchmaschine nutze ich / kann ich nutzen?</p></div>
<div class="paragraph ms-5 mb-5"><p>❗ KorAP, Korp/CWB, Lucene/Solr/ElasticSearch, (No)SketchEngine, …</p></div></div></section><section id="_entwicklungsentscheidungen_2" class="left"><h2>Entwicklungsentscheidungen (2)</h2><div class="slide-content"><div class="paragraph"><p>❓ Anpassung oder Neuentwicklung?</p></div>
<div class="paragraph ms-5 mb-5"><p>❗ Liste bestehender Endpunkt-Implementierungen (Awesome List)</p></div>
<div class="paragraph"><p>❓ Programmiersprache?</p></div>
<div class="paragraph ms-5 mb-5"><p>❗ Java, Python, (PHP, XQuery)</p></div>
<div class="paragraph"><p>❓ Eigenentwicklung: Nutzung der Referenzbibliotheken (Java, Python)</p></div>
<div class="paragraph ms-5"><p>❗ Maven Archetype, Korp</p></div>
<div class="paragraph ms-5"><p>❗ SRU + FCS Spezifikationen …</p></div></div></section><section id="_endpunkt_implementierungen"><h2>Endpunkt-Implementierungen</h2><div class="slide-content"><div class="ulist"><ul><li><p><a href="https://github.com/clarin-eric/fcs-korp-endpoint">Korp FCS 2.0</a> - Referenzimplementierung, <a href="https://www.kielipankki.fi/support/korp-advanced/">Korp corpus search</a></p></li><li><p><a href="https://github.com/clarin-eric/fcs-sru-cqi-bridge">CQP/SRU bridge</a> - Corpus Workbench (CWB)</p></li><li><p><a href="https://github.com/czcorpus/kontext">KonText</a>, <a href="https://github.com/Leipzig-Corpora-Collection/fcs-noske-endpoint">fcs-noske-endpoint</a> - (No)SketchEngine (CONLL/Vertical)</p></li><li><p><a href="https://github.com/OCLC-Research/oclcsrw">oclcsrw</a> - SRW/SRU server für DSpace, Lucene und/oder Pears/Newton</p></li><li><p><a href="https://github.com/vronk/corpus_shell">corpus_shell</a>, <a href="https://github.com/vronk/SADE/tree/cr-xq">SADE</a> - MySQL PHP/DDC Perl, eXist/XQuery</p></li><li><p><a href="https://github.com/acdh-oeaw/arche-fcs/">arche-fcs</a> - ARCHE Suite, php</p></li><li><p><a href="https://github.com/INL/clariah-fcs-endpoints">Blacklab / MTAS</a> - corpus search engines auf Lucene/Solr</p></li><li><p><a href="https://github.com/KorAP/KorapSRU">KorapSRU</a> - KorAP (IDS)</p></li></ul></div>
<div class="openblock refs"><div class="content"><div class="paragraph"><p>Quelle: <a href="https://www.clarin.eu/content/federated-content-search-clarin-fcs-technical-details">clarin</a>, <a href="https://github.com/clarin-eric/awesome-fcs">awesome-fcs</a></p></div></div></div></div></section><section id="_endpunktneuentwicklung"><h2>Endpunktneuentwicklung</h2><div class="slide-content"><div class="ulist"><ul><li><p>Anpassung von Referenzimplementierung (Korp)</p><div class="ulist"><ul><li><p>Java: <a href="https://github.com/clarin-eric/fcs-korp-endpoint">github.com/clarin-eric/fcs-korp-endpoint</a></p></li><li><p>Python: <a href="https://github.com/Querela/fcs-korp-endpoint-python/">github.com/Querela/fcs-korp-endpoint-python</a></p></li></ul></div></li><li><p>Neuentwicklung mit CLARIN-Bibliotheken</p><div class="ulist"><ul><li><p>Java: <a href="https://github.com/clarin-eric/fcs-endpoint-archetype">github.com/clarin-eric/fcs-endpoint-archetype</a></p></li><li><p>Docs:</p><div class="ulist"><ul><li><p>Java SRU: <a href="https://clarin-eric.github.io/fcs-sru-server/apidocs/index.html">clarin-eric.github.io/fcs-sru-server/apidocs/index.html</a></p></li><li><p>Java FCS: <a href="https://clarin-eric.github.io/fcs-simple-endpoint/apidocs/index.html">clarin-eric.github.io/fcs-simple-endpoint/apidocs/index.html</a></p></li><li><p>Python SRU: <a href="https://fcs-sru-server-python.readthedocs.io/en/latest/">fcs-sru-server-python.readthedocs.io</a></p></li><li><p>Python FCS: <a href="https://fcs-simple-endpoint-python.readthedocs.io/en/latest/">fcs-simple-endpoint-python.readthedocs.io</a></p></li></ul></div></li></ul></div></li></ul></div></div></section><section id="_endpunktneuentwicklung_2"><h2>Endpunktneuentwicklung (2)</h2><div class="slide-content"><div class="ulist"><ul><li><p>“Neue” Neuentwicklung Spezifikationen (für andere Sprachen)</p><div class="ulist"><ul><li><p>SRU: <a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part0-overview/searchRetrieve-v1.0-os-part0-overview.html">OASIS SRU Overview</a>,  <a href="https://www.loc.gov/standards/sru/">Library of Congress SRU</a></p></li><li><p>FCS: <a href="https://github.com/clarin-eric/fcs-misc">github.com/clarin-eric/fcs-misc</a> → “FCS Core 2.0”</p></li></ul></div></li><li><p>Awesome List: <a href="https://github.com/clarin-eric/awesome-fcs">github.com/clarin-eric/awesome-fcs</a></p></li></ul></div></div></section><section id="_voraussetzung_an_lokale_suchmaschine" class="left"><h2>Voraussetzung an lokale Suchmaschine</h2><div class="slide-content"><div class="paragraph"><p>❗ Volltextsuche</p></div>
<div class="paragraph ms-5"><p>❓ mit Treffer-Markierung</p></div>
<div class="paragraph mb-5"><p>❓ Corpus-Suche (Annotationen über segmentiertem Text)</p></div>
<div class="paragraph mb-5"><p>❕ Pagination (Gesamt-Trefferzahl)</p></div>
<div class="paragraph"><p>❗ Ressourcen-PID</p></div>
<div class="paragraph"><p>❓ Verlinkung auf Ergebnisseiten</p></div>
<div style="page-break-after: always;"></div></div></section></section>
<section><section id="_technische_grundlagen" data-background-image="images/textplus-fcs.002.png" data-background-opacity="0.5"><h2>Technische Grundlagen</h2><div class="slide-content"><aside class="notes"><div class="ulist"><ul><li><p>SRU (Überblick, APD/Modelle, Request Parameter, Diagnostics, …)</p></li><li><p>FCS (Discovery, Endpoint Description, Search, SRU Parameter, Diagnostics)</p></li><li><p>FCS Hinweise (Version, Kompatibilität, Aggregator)</p></li></ul></div></aside></div></section><section id="_disclaimer" class="left"><h2>Disclaimer</h2><div class="slide-content"><div class="paragraph"><p>Fokus primär auf:</p></div>
<div class="ulist ms-5"><ul><li><p>Version: <strong>FCS Core 2.0</strong>; maximal Kompatibilität mit FCS Core 1.0</p></li><li><p><strong>SRU Server</strong>, <strong>FCS Endpunkt</strong>; nicht FCS Client-Anwendungen</p></li><li><p>Nutzung der Referenzbibliotheken</p><div class="paragraph"><p>→ <strong>Java</strong> und <strong>Python</strong></p></div></li><li><p>Mögliche Nutzung bestehender Endpunkte</p></li></ul></div>
<div class="paragraph"><p>Kein:</p></div>
<div class="ulist ms-5"><ul><li><p>Durcharbeiten der Spezifikation; nur die wesentlichen Informationen</p></li><li><p>Neuentwicklung von SRU/FCS Protokollen, Bibliotheken etc.</p><div class="paragraph"><p>(z.B. in anderen Sprachen)</p></div></li></ul></div></div></section><section id="_sru_geschichte" class="left"><h2>SRU – Geschichte</h2><div class="slide-content"><div class="paragraph"><p>SRU: <strong>Search/Retrieve via URL</strong> → <a href="https://www.loc.gov/standards/sru/">LOC</a></p></div>
<div class="ulist"><ul><li><p>ursprünglich bei der <em>Library of Congress (LOC)</em> entwickelt</p><div class="paragraph"><p>2004: <strong>SRU 1.1</strong> - <a href="https://www.loc.gov/standards/sru/sru-1-1.html">LOC</a></p></div>
<div class="paragraph"><p>2007: <strong>SRU 1.2</strong> - <a href="https://www.loc.gov/standards/sru/sru-1-2.html">LOC</a></p></div></li><li><p>ab SRU 2.0 standardisiert bei <em>OASIS</em> <sup class="footnote">[<span class="footnote" title="View footnote.">1</span>]</sup> als <em>“searchRetrieve Version 1.0 OASIS Standard”</em></p><div class="paragraph"><p>2013: SRU 2.0 - <a href="https://www.loc.gov/standards/sru/sru-2-0.html">LOC</a>, <a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part0-overview/searchRetrieve-v1.0-os-part0-overview.html">OASIS</a> (<a href="https://www.oasis-open.org/news/announcements/searchretrieve-version-1-0-oasis-standard-published/">OASIS Ankündigung</a>)</p></div>
<div class="paragraph"><p>Erweiterung von SRU 1.2 → Unterschiede zu SRU 1.2 (<a href="https://www.loc.gov/standards/sru/differences.html">LOC</a>)</p></div></li></ul></div></div><div class="footnotes"><div class="footnote">1. OASIS: Organization for the Advancement of Structured Information Standards</div></div></section><section id="_searchretrieve_version_1_0_oasis_standard" class="left"><h2>searchRetrieve Version 1.0 – OASIS Standard</h2><div class="slide-content"><div class="ulist"><ul><li><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part0-overview/searchRetrieve-v1.0-os-part0-overview.html">Part 0</a>. Overview Version 1.0</p></li><li><p></p><div class="openblock darkgrey"><div class="content"><div class="paragraph"><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part1-apd/searchRetrieve-v1.0-os-part1-apd.html">Part 1</a>. <strong>Abstract Protocol Definition</strong> Version 1.0</p></div></div></div></li><li><p></p><div class="openblock darkgrey"><div class="content"><div class="paragraph"><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part2-sru1.2/searchRetrieve-v1.0-os-part2-sru1.2.html">Part 2</a>. SRU <strong>searchRetrieve Operation</strong>: APD Binding for <strong>SRU 1.2</strong> Version 1.0</p></div></div></div></li><li><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html">Part 3</a>. SRU <strong>searchRetrieve Operation</strong>: APD Binding for <strong>SRU 2.0</strong> Version 1.0</p></li><li><p></p><div class="openblock darkgrey"><div class="content"><div class="paragraph"><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part4-opensearch/searchRetrieve-v1.0-os-part4-opensearch.html">Part 4</a>. <s>APD Binding for <strong>OpenSearch</strong> 1.0  version 1.0</s></p></div></div></div></li><li><p></p><div class="openblock darkgrey"><div class="content"><div class="paragraph"><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part5-cql/searchRetrieve-v1.0-os-part5-cql.html">Part 5</a>.  <strong>CQL</strong>: The Contextual Query Language  version 1.0</p></div></div></div></li><li><p></p><div class="openblock darkgrey"><div class="content"><div class="paragraph"><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part6-scan/searchRetrieve-v1.0-os-part6-scan.html">Part 6</a>.  SRU <strong>Scan Operation</strong> version 1.0</p></div></div></div></li><li><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part7-explain/searchRetrieve-v1.0-os-part7-explain.html">Part 7</a>. SRU <strong>Explain Operation</strong> version 1.0</p></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p>ausgegraut: für uns nicht relevant</p></li><li><p>durchgestrichen: spielt überhaupt keine Rolle für die FCS</p></li></ul></div></aside></div></section><section id="_searchretrieve_part_0_overview_version_1_0" class="left x-small"><h2>searchRetrieve: Part 0. – Overview Version 1.0</h2><div class="slide-content"><div class="paragraph"><p><strong>SRU</strong> (<em>SRU: Search/Retrieve via URL</em>) is a <span class="blue">web service protocol</span> supported over both SOAP and <span class="blue">REST for client-server based search</span>. <strong>SRU1.x</strong> was developed as a web service replacement for the NISO Z39.50 protocol. <span class="blue"><strong>SRU2.0</strong> is a revision to <strong>SRU</strong></span> which as well as including many enhancements to SRU1.2 was developed alongside the <strong>APD</strong>.</p></div>
<div class="paragraph"><p>For the SRU protocol model, three operations are defined as part of its <strong>Processing Model</strong>:</p></div>
<div class="ulist"><ul><li><p><strong>SearchRetrieve Operation</strong>. The actual SearchRetrieve operation defined by the SRU protocol; A SearchRetrieve operation consists of a <span class="blue">SearchRetrieve request from client to server followed by a SearchRetrieve response from server to client</span>.</p></li><li><p><strong>Scan Operation</strong>. Similar to SRU, the Scan protocol defines a request message and a response message for <span class="blue">iterating through available search terms</span>. a Scan operation consists of a Scan request followed by a Scan response.</p></li><li><p><strong>Explain Operation</strong>. Every SRU or scan server provides an associated <span class="blue">Explain document</span> as part of its <strong>Description and Discovery Model</strong>, providing <span class="blue">information about the server’s capabilities</span>. A client may retrieve this document and use the information to <span class="blue">self-configure and provide an appropriate interface to the user</span>. When a client retrieves an Explain document, this constitutes an Explain operation.</p></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part1-apd/searchRetrieve-v1.0-os-part1-apd.html" class="bare">http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part1-apd/searchRetrieve-v1.0-os-part1-apd.html</a></p></li><li><p>SRW = search/retrieve for the web</p></li></ul></div></aside></div></section><section id="_searchretrieve_apd_und_bindings" class="left"><h2>searchRetrieve – APD und Bindings</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong>Abstract Protocol Definition (APD)</strong> für <em>“searchRetrieve operation”</em></p><div class="ulist"><ul><li><p>Modell für die <em>SearchRetrieve Operation</em></p></li><li><p>beschreibt <em>Capabilities</em> und <em>generelle Charakteristiken</em> von einem Server oder Suchmaschine, sowie wie der Zugriff ablaufen soll</p></li><li><p>definiert abstrakte Request Parameter und Response Elemente</p></li></ul></div></li><li><p><strong>Binding</strong></p><div class="ulist"><ul><li><p>beschreibt korrespondierende Namen der Parameter und Elemente</p></li><li><p><em>statisch</em> (für Mensch), <em>dynamisch</em> (Maschine), …</p></li><li><p>Bindings: SRU 1.2, <strong>SRU 2.0</strong>, (OpenSearch)</p></li><li><p>Beispiele: “startPosition” (APD) → “startRecord” (SRU 2.0)</p><div class="paragraph"><p>“recordPacking” (SRU 1.2) → “recordXMLEscaping” (SRU 2.0)</p></div></li></ul></div></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#recordPacking" class="bare">http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#recordPacking</a></p></li></ul></div></aside></div></section><section id="_searchretrieve_apd_abstrakte_modelle" class="left"><h2>searchRetrieve – APD Abstrakte Modelle</h2><div class="slide-content"><div class="paragraph"><p><strong>Data Model</strong><br>
Beschreibung der Daten, auf denen die Suche ausgeführt werden soll</p></div>
<div class="paragraph"><p><strong>Query Model</strong><br>
Beschreibung der Konstruktion von Search Querys</p></div>
<div class="paragraph"><p><strong>Processing Model</strong><br>
Beschreibung, wie Query von Client zum Server gesendet wird</p></div>
<div class="paragraph"><p><strong>Result Set Model</strong><br>
Struktur der Ergebnisse einer Suche</p></div>
<div class="paragraph"><p><strong>Diagnostics Model</strong><br>
Beschreibung, wie Fehler vom Server dem Client mitgeteilt werden</p></div>
<div class="paragraph"><p><strong>Description and Discovery Model</strong><br>
Beschreibung, zur Discovery des “Search Service”, Selbstbeschreibung von Funktionalität des Services</p></div></div></section><section id="_sru_2_0" class="hidden"><h2>SRU 2.0</h2><div class="slide-content"><div class="ulist"><ul><li><p>Anfrageverlauf (Client ↔ Server)</p><div class="ulist"><ul><li><p>HTTP GET/POST mit Menge von Parametern (erweiterbar)</p></li></ul></div></li><li><p>Anfragebearbeitung auf dem Server</p></li><li><p>Operationen: searchRetrieve, scan, explain</p></li><li><p>Datenmodell mit Result Sets, Records und zugehörigen Schemata</p></li><li><p>Diagnostics: (non-)fatal für Warnungen und Fehler</p></li><li><p>keine feste Serialisierung, XML für FCS</p></li></ul></div></div></section><section id="_sru_2_0_operation_model"><h2>SRU 2.0 – Operation Model</h2><div class="slide-content"><div class="ulist"><ul><li><p>SRU Anfrage (Client → Server) mit Antwort (Server → Client)</p></li><li><p>Operationen</p><div class="ulist"><ul><li><p>SearchRetrieve</p></li><li><p>Scan</p></li><li><p>Explain</p></li></ul></div></li></ul></div></div></section><section id="_sru_2_0_data_model"><h2>SRU 2.0 – Data Model</h2><div class="slide-content"><div class="ulist"><ul><li><p>Server = Datenbank für Client für Search/Retrieval</p></li><li><p>Datenbank = Sammlung von Units of Data → Abstract Record</p></li><li><p><strong>Abstract Records</strong> (oder <strong>Response Records</strong>) mit einem/mehreren Formaten durch Server</p></li><li><p>Format (oder Item Type) = <strong>Record Schema</strong></p></li></ul></div></div></section><section id="_sru_2_0_protocol_model" class="columns"><h2>SRU 2.0 – Protocol Model</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong>HTTP GET</strong></p><div class="ulist"><ul><li><p>Parameter kodiert als “<code>key=value</code>”</p></li><li><p>UTF-8</p></li><li><p><code>%</code>-Escaping</p></li><li><p>Trennung an “<code>?</code>”, “<code>&amp;</code>”, “<code>=</code>”</p></li></ul></div></li><li><p><strong>HTTP POST</strong></p><div class="ulist"><ul><li><p><code>application/x-www-form-urlencoded</code></p></li><li><p>kein Character-Encoding notwendig</p></li><li><p>keine Längenbeschränkung</p></li></ul></div></li><li><p><span class="darkgrey">HTTP SOAP (?)</span></p></li></ul></div>
<div class="imageblock" style="float: right"><img src="images/sru-protocol-model.gif" alt="SRU Protocol"></div></div></section><section id="_sru_2_0_processing_model"><h2>SRU 2.0 – Processing Model</h2><div class="slide-content"><div class="ulist"><ul><li><p>“Anfragebearbeitung am Server”</p></li><li><p>Request</p><div class="ulist"><ul><li><p>Anzahl an Records</p></li><li><p>Identifier für Record Schema (→ Records in Response)</p></li><li><p>Identifier für Response Schema (→ ganze Response)</p></li></ul></div></li><li><p>Response</p><div class="ulist"><ul><li><p>Records in Result Set</p></li><li><p>Diagnostic Information</p></li><li><p>Result Set Identifier für Anfragen zu weiteren Ergebnissen</p></li></ul></div></li></ul></div></div></section><section id="_sru_2_0_query_model"><h2>SRU 2.0 – Query Model</h2><div class="slide-content"><div class="ulist"><ul><li><p>jede “angemessene Anfragesprache” kann genutzt werden</p></li><li><p>verpflichtende Unterstützung von</p><div class="paragraph"><p>“Contextual Query Language” (CQL)</p></div></li></ul></div></div></section><section id="_sru_2_0_parameter_model"><h2>SRU 2.0 – Parameter Model</h2><div class="slide-content"><div class="ulist"><ul><li><p>Nutzung von Parametern, einige durch SRU 2.0 vordefiniert</p></li><li><p>auch nicht im Protokoll festgelegte Parameter sind erlaubt</p></li><li><p>Parameter “<code>query</code>”</p><div class="ulist"><ul><li><p>in jeder Anfrage irgendwie enthalten (“<code>query</code>” oder durch Parameter nicht definiert im Protokoll)</p></li><li><p>Query mit “<code>queryType</code>” (default “<code>cql</code>”)</p></li></ul></div></li></ul></div></div></section><section id="_sru_2_0_result_set_model"><h2>SRU 2.0 – Result Set Model</h2><div class="slide-content"><div class="ulist"><ul><li><p>Logisches Modell → “Result Sets” sind nicht verpflichtend</p></li><li><p>Query → Auswahl passender Records</p><div class="ulist"><ul><li><p>geordnete Liste, nicht-modifizierbares Set nach Erstellung</p></li><li><p>Sortierung/Ordnung bestimmt durch Server</p></li></ul></div></li><li><p>für Client:</p><div class="ulist"><ul><li><p>Menge abstrakter Records, Nummerierung beginnt mit <code>1</code></p></li><li><p>jeder Record <em>kann</em> in eigenen Format angefragt werden</p></li><li><p>einzelne Records können <em>“verschwinden”</em>, keine Neuordnung im Result Set durch Server, jedoch Diagnostic</p></li></ul></div></li></ul></div></div></section><section id="_sru_2_0_diagnostic_model" class="small"><h2>SRU 2.0 – Diagnostic Model</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong>fatal</strong></p><div class="ulist"><ul><li><p>Ausführung der Anfrage kann nicht beendet werden</p></li><li><p>z.B. invalider Query</p></li></ul></div></li><li><p><strong>non-fatal</strong></p><div class="ulist"><ul><li><p>Verarbeitung beeinträchtigt, aber Anfrage kann beendet werden</p></li><li><p>z.B. einzelne Records sind nicht im angefragten Schema verfügbar, Server sendet nur die verfügbaren und informiert über den Rest</p></li><li><p></p><div class="openblock mt-5"><div class="content"><div class="paragraph"><p><strong>surrogate</strong></p></div></div></div>
<div class="ulist"><ul><li><p>für einzelne Records</p></li></ul></div></li><li><p><strong>non-surrogate</strong></p><div class="ulist"><ul><li><p>alle Records sind verfügbar, aber etwas ging schief, z.B. Sortierung</p></li><li><p>oder z.B. auch einfach eine Warnungen</p></li></ul></div></li></ul></div></li></ul></div></div></section><section id="_sru_2_0_explain_model"><h2>SRU 2.0 – Explain Model</h2><div class="slide-content"><div class="ulist"><ul><li><p>muss für HTTP GET über die Base URL des SRU Servers verfügbar sein</p></li><li><p>→ Server Capabilities</p></li><li><p>im Client zur Selbstkonfiguration und um entsprechendes User-Interface anzubieten</p></li><li><p>Details zu unterstützten Query-Typen, CQL Context Sets, Diagnostic Sets Records Schemas, Sortierungsmöglichkeiten, Defaults, …</p></li></ul></div></div></section><section id="_sru_2_0_serialization_model"><h2>SRU 2.0 – Serialization Model</h2><div class="slide-content"><div class="ulist"><ul><li><p>kein Beschränkung der Serialisierung von Antworten</p><div class="paragraph"><p>(gesamte Nachricht oder der Records)</p></div></li><li><p>nicht-XML ist möglich</p></li></ul></div></div></section><section id="_searchretrieve_2_0_request_parameter"><h2>searchRetrieve 2.0 – Request Parameter</h2><div class="slide-content"><div class="ulist"><ul><li><p>alle Parameter sind optional, non-repeatable</p></li><li><p><span class="blue"><strong>query</strong>, <strong>startRecord</strong>, <strong>maximumRecords</strong>, recordXMLEscaping, recordSchema, resultSetTTL, stylesheet; Extension parameters</span></p></li><li><p>neu in 2.0: <span class="blue"><strong>queryType</strong>, sortKeys, renderedBy, httpAccept, responseType, recordPacking; Facet  Parameters</span></p></li></ul></div>
<div class="ulist mt-5"><ul><li><p>Spec: “<a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#_Toc324162435">Actual Request Parameters for this Binding</a>”</p></li></ul></div></div></section><section id="_searchretrieve_2_0_response_elements"><h2>searchRetrieve 2.0 – Response Elements</h2><div class="slide-content"><div class="ulist"><ul><li><p>alle Elemente sind optional, by default non-repeatable</p></li><li><p><span class="blue"><strong>numberOfRecords</strong>, resultSetId, <strong>records</strong>, <strong>nextRecordPosition</strong>, echoedSearchRetrieveRequest, <strong>diagnostics</strong>, extraResponseDataⓇ</span></p></li><li><p>neu in 2.0: <span class="blue">resultSetTTL, resultCountPrecisionⓇ, facetedResultsⓇ, searchResultAnalysisⓇ</span></p><div class="paragraph"><p>(Ⓡ = repeatable)</p></div></li></ul></div>
<div class="ulist mt-5"><ul><li><p>Spec: “<a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#_Toc324162438">Actual Response Elements for this Binding</a>”</p></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#_Toc324162438" class="bare">http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#_Toc324162438</a></p></li></ul></div></aside></div></section><section id="_searchretrieve_2_0_query"><h2>searchRetrieve 2.0 – Query</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong><code>query</code></strong> (Parameter)</p><div class="ulist"><ul><li><p>Query</p></li><li><p>Pflicht, wenn keine Angabe von <em><code>queryType</code></em></p></li></ul></div></li><li><p><strong><code>queryType</code></strong> (Parameter, SRU 2.0)</p><div class="ulist"><ul><li><p>optional, by default “<code>cql</code>”</p></li><li><p>Query Typen müssen im Explain gelistet werden, mit URL zur Definition und Nutzungskürzel</p></li><li><p>Reserviert</p><div class="ulist"><ul><li><p><code>cql</code></p></li><li><p><code>searchTerms</code> (Verarbeitung ist Server überlassen, &lt; SRU 2.0)</p></li></ul></div></li></ul></div></li></ul></div></div></section><section id="_searchretrieve_2_0_query_examples"><h2>searchRetrieve 2.0 – Query (Examples)</h2><div class="slide-content"><div class="ulist"><ul><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?query=cat">spraakbanken.gu.se/…/sru?<strong>query=cat</strong></a></p><div class="paragraph"><p>(default, FCS 2.0, SRU 2.0)</p></div></li><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?operation=searchRetrieve&amp;version=1.2&amp;query=cat">spraakbanken.gu.se/…/sru?<strong>operation=searchRetrieve</strong>&<strong>version=1.2</strong>&query=cat</a></p><div class="paragraph"><p>(FCS 1.0, SRU 1.2)</p></div></li><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?operation=searchRetrieve&amp;queryType=cql&amp;query=%22anv%C3%A4ndning%22">spraakbanken.gu.se/…/sru?operation=searchRetrieve&queryType=cql&<strong>query=%22anv%C3%A4ndning%22</strong></a></p><div class="paragraph"><p>(FCS 2.0, SRU 2.0)</p></div></li><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?operation=searchRetrieve&amp;queryType=fcs&amp;query=%5bword%3d%22anv%C3%A4ndning%22%5d&amp;x-cmd-resource-info=true">spraakbanken.gu.se/…/sru?operation=searchRetrieve&<strong>queryType=fcs</strong>&query=%5bword%3d%22anv%C3%A4ndning%22%5d&x-cmd-resource-info=true</a></p><div class="paragraph"><p>(FCS 2.0 mit FCS-QL Query)</p></div></li></ul></div></div></section><section id="_searchretrieve_2_0_pagination"><h2>searchRetrieve 2.0 – Pagination</h2><div class="slide-content"><div class="ulist"><ul><li><p>Anfrage zu Ergebnisbereich von <em><code>startRecord</code></em> mit maximal <em><code>maximumRecords</code></em></p></li><li><p><strong><code>startRecord</code></strong> (Parameter)</p><div class="ulist"><ul><li><p>optional, positiver Integer, beginnend mit <code>1</code></p></li></ul></div></li><li><p><strong><code>maximumRecords</code></strong> (Parameter)</p><div class="ulist"><ul><li><p>optional, nicht-negativer Integer</p></li><li><p>Server wählt Default, wenn nicht angegeben</p></li><li><p>Server kann mit weniger Records antworten, niemals mehr</p></li></ul></div></li></ul></div></div></section><section id="_searchretrieve_2_0_pagination_2"><h2>searchRetrieve 2.0 – Pagination (2)</h2><div class="slide-content"><div class="ulist"><ul><li><p>Antwort mit Gesamtzahl (<em><code>numberOfRecords</code></em>) von Records im Result Set, mit Offset (<em><code>nextRecordPosition</code></em>) zu nächsten Ergebnissen</p></li><li><p><strong><code>numberOfRecords</code></strong> (Element)</p><div class="ulist"><ul><li><p>Anzahl von Ergebnissen im Result Set</p></li><li><p>falls Query fehlschlägt, muss es “<code>0</code>” sein</p></li></ul></div></li><li><p><strong><code>nextRecordPosition</code></strong> (Element)</p><div class="ulist"><ul><li><p>Zähler für nächstes Result Set, falls letzter Record in der Response nicht letzter im Result Set ist</p></li><li><p>falls keine weiteren Records, dann darf dieses Element nicht erscheinen</p></li></ul></div></li></ul></div></div></section><section id="_searchretrieve_2_0_result_set"><h2>searchRetrieve 2.0 – Result Set</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong><code>resultSetId</code></strong> (Element)</p><div class="ulist"><ul><li><p>optional, Identifier für das Result Set, für Referenzierung in folgenden Anfragen</p></li></ul></div></li><li><p><strong><code>resultSetTTL</code></strong> (Parameter / Element, SRU 2.0 für Element)</p><div class="ulist"><ul><li><p>optional, in Sekunden</p></li><li><p>in Anfrage von Client, wann Result Set nicht mehr genutzt wird</p></li><li><p>in Antwort vom Server, wie lange Result Set verfügbar ist (“good-faith estimate”, → länger oder kürzer möglich)</p></li></ul></div></li><li><p><strong><code>resultCountPrecision</code></strong> (Element, SRU 2.0)</p><div class="ulist"><ul><li><p>URI: “<code>info:srw/vocabulary/resultCountPrecision/1/…</code>”</p></li><li><p><code>exact</code> / <code>unknown</code> / <code>estimate</code> / <code>maximum</code> / <code>minimum</code> / <code>current</code></p></li></ul></div></li></ul></div></div></section><section id="_searchretrieve_2_0_pagination_cont"><h2>searchRetrieve 2.0 – Pagination (Cont.)</h2><div class="slide-content"><div class="imageblock position-absolute right--30 width-75 opacity-50"><img src="images/fcs-sru-results-xml.png" alt="Response XML für CQL Suche nach &quot;cat&quot;"></div>
<div class="ulist"><ul><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?query=cat">spraakbanken.gu.se/…/sru?<strong>query=cat</strong></a></p><div class="paragraph"><p>→ 9220 Ergebnisse, weitere ab 251</p></div></li><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?query=cat&amp;startRecord=300&amp;maximumRecords=10">spraakbanken.gu.se/…/sru?query=cat&<strong>startRecord=300</strong>&<strong>maximumRecords=10</strong></a></p><div class="paragraph"><p>→ weitere ab 310</p></div></li><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?query=cat&amp;startRecord=10000&amp;maximumRecords=10">spraakbanken.gu.se/…/sru?query=cat&<strong>startRecord=10000</strong>&maximumRecords=10</a></p><div class="paragraph"><p>→ Fehler, da “out of range”</p></div></li><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?query=catsss">spraakbanken.gu.se/…/sru?<strong>query=catsss</strong></a></p><div class="paragraph"><p>→ keine Ergebnisse</p></div></li><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?query=cat&amp;maximumRecords=100000">spraakbanken.gu.se/…/sru?query=cat&<strong>maximumRecords=100000</strong></a></p><div class="paragraph"><p>→ Limitierung auf 1000 Records</p></div></li></ul></div></div></section><section id="_searchretrieve_2_0_serialization"><h2>searchRetrieve 2.0 – Serialization</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong><code>recordXMLEscaping</code></strong> (Parameter, SRU 2.0)</p><div class="ulist"><ul><li><p>wenn Records als XML serialisiert werden, kann bei “<code>string</code>” der Records escaped werden (“<code>&lt;</code>”, “<code>&gt;</code>”, “<code>&amp;</code>”); default ist “<code>xml</code>” als direkte Einbettung der Records in die Response, z.B. für Stylesheets</p></li></ul></div></li><li><p><strong><code>recordPacking</code></strong> (Parameter, SRU 2.0)</p><div class="ulist"><ul><li><p>hatte in SRU 1.2 die Semantic von <code>recordXMLEscaping</code></p></li><li><p>“<code>packed</code>” (default), Server soll Records mit angefragten Schema liefern; “<code>unpacked</code>”, Server kann Stelle der Anwendungsdaten in den Records selber bestimmen (?)</p></li></ul></div></li></ul></div></div></section><section id="_searchretrieve_2_0_serialization_2"><h2>searchRetrieve 2.0 – Serialization (2)</h2><div class="slide-content"><div class="ulist"><ul><li><p></p><div class="openblock darkgrey"><div class="content"><div class="paragraph"><p><strong><code>httpAccept</code></strong> (Parameter, SRU 2.0)</p></div></div></div>
<div class="ulist"><ul><li><p></p><div class="openblock darkgrey"><div class="content"><div class="paragraph"><p>Schema für Response, default ist “<code>application/sru+xml</code>”</p></div></div></div></li></ul></div></li><li><p></p><div class="openblock darkgrey"><div class="content"><div class="paragraph"><p><strong><code>responseType</code></strong> (Parameter)</p></div></div></div>
<div class="ulist"><ul><li><p></p><div class="openblock darkgrey"><div class="content"><div class="paragraph"><p>Schema für Response (in Kombination mit <code>httpAccept</code>)</p></div></div></div></li></ul></div></li><li><p><strong><code>recordSchema</code></strong> (Parameter)</p><div class="ulist"><ul><li><p>Schema der Records in Response, z.B. “<code><a href="http://clarin.eu/fcs/resource" class="bare">http://clarin.eu/fcs/resource</a></code>”</p></li><li><p>Kürzel für Schema aus Explain-Response</p></li></ul></div></li><li><p><strong><code>records</code></strong> (Element)</p><div class="ulist"><ul><li><p>enthält Records / Surrogate Diagnostics</p></li><li><p>nach <a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#sruplusxml">default Schema</a> eine Liste von “<code>&lt;record&gt;</code>” Elementen</p></li></ul></div></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p><strong><code>recordSchema</code></strong> mit <code><a href="http://clarin.eu/fcs/resource" class="bare">http://clarin.eu/fcs/resource</a></code> kann zum Multiplexen genommen werden, wenn mehrere SRU Funktionalitäten über einen Endpoint angeboten werden, z.B. auch DFG Viewer o.Ä.</p></li></ul></div></aside></div></section><section id="_searchretrieve_2_0_serialization_3"><h2>searchRetrieve 2.0 – Serialization (3)</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong><code>stylesheet</code></strong> (Parameter)</p><div class="ulist"><ul><li><p>URL zu Stylesheet, zur Darstellung beim Nutzer</p></li><li><p><strong><code>renderedBy</code></strong> (Parameter, SRU 2.0)</p></li><li><p>wo wird Stylesheet für Antwort gerendert</p></li><li><p>“<code>client</code>” (default), URL von <em><code>stylesheet</code></em>-Parameter wird einfach wiedergegeben → “thin client” (im Web Browser)</p></li><li><p></p><div class="openblock darkgrey"><div class="content"><div class="paragraph"><p>“<code>server</code>”, Server soll default SRU Response mit Stylesheet transformieren (z.B. für <em><code>httpAccept</code></em> mit HTML-Format)</p></div></div></div></li></ul></div></li></ul></div></div></section><section id="_searchretrieve_2_0_serialization_4"><h2>searchRetrieve 2.0 – Serialization (4)</h2><div class="slide-content"><div class="ulist"><ul><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?query=cat&amp;recordXMLEscaping=string">spraakbanken.gu.se/…/sru?query=cat&<strong>recordXMLEscaping=string</strong></a></p><div class="paragraph"><p>→ evtl. Serialisierungsfehler in Java-Bibliothek</p></div></li><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?operation=searchRetrieve&amp;version=1.2&amp;query=cat&amp;version=1.2&amp;recordPacking=string">spraakbanken.gu.se/…/sru?<strong>operation=searchRetrieve</strong>&version=1.2&query=cat&<strong>version=1.2</strong>&<strong>recordPacking=string</strong></a></p><div class="paragraph"><p>(FCS 1.0, SRU 1.2, wie <em><code>recordXMLEscaping</code></em>)</p></div></li><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?query=cat&amp;recordPacking=unpacked">spraakbanken.gu.se/…/sru?query=cat&<strong>recordPacking=unpacked</strong></a></p><div class="paragraph"><p>→ keine Änderung hier bemerkbar</p></div></li><li><p>…</p></li></ul></div></div></section><section id="_searchretrieve_2_0_nicht_supportete_parameter"><h2>searchRetrieve 2.0 – Nicht supportete Parameter</h2><div class="slide-content"><div class="ulist"><ul><li><p>Sortierung (<em><code>sortKeys</code></em>) und Facettierung nicht supported</p></li></ul></div></div></section><section id="_sru_2_0_extensions"><h2>SRU 2.0 – Extensions</h2><div class="slide-content"><div class="ulist"><ul><li><p>Erweiterungen möglich in</p><div class="ulist"><ul><li><p>Anfrage über <strong>Extension Parameter</strong></p></li><li><p>(beginnend mit “<code>x-</code>” und Namespace-Identifier, z.B. “<code>x-fcs-</code>”)</p></li></ul></div></li><li><p>Antwort im <strong>“<code>&lt;extraResponseData&gt;</code>” Element</strong></p></li><li><p>Antwort mit <code>extraResponseData</code>, <em>nur</em> wenn in Anfrage mit entsprechendem Parameter angefragt, nie freiwillig</p><div class="ulist"><ul><li><p>Server kann die Anfrage aber ignorieren, keine Verpflichtung</p></li></ul></div></li><li><p>unbekannte Extension-Parameter sind zu ignorieren</p></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#Extensions" class="bare">http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#Extensions</a></p></li></ul></div></aside></div></section><section id="_sru_2_0_rückwärtskompatibilität"><h2>SRU 2.0 – Rückwärtskompatibilität</h2><div class="slide-content"><div class="ulist"><ul><li><p>Parameter “<code>operation</code>” und “<code>version</code>” von SRU 1.1/SRU 1.2 entfernt → Annahme, pro Version eigener Endpunkt</p></li><li><p>Heuristik</p><div class="ulist"><ul><li><p><code>searchRetrieve</code> = <code>query</code> oder <code>queryType</code> Parameter</p></li><li><p><code>scan</code> = <code>scanClause</code> Parameter</p></li><li><p><code>explain</code></p></li></ul></div></li><li><p>Interoperabilität mit älteren Versionen:</p><div class="ulist"><ul><li><p>Nutzung von <code>operation</code>/<code>version</code> → SRU &lt; 2.0</p></li><li><p>Achtung bei Parametern mit veränderter Semantik</p><div class="paragraph"><p>insbesondere <code>recordPacking</code></p></div></li></ul></div></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#_Toc324162498" class="bare">http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#_Toc324162498</a></p></li></ul></div></aside></div></section><section id="_sru_2_0_diagnostics"><h2>SRU 2.0 – Diagnostics</h2><div class="slide-content"><div class="ulist"><ul><li><p>“Fehlerbehandlung”</p></li><li><p>Unterscheidung in (non-)fatal, (non-)surrogate → <a href="#_sru_2_0_diagnostic_model">SRU 2.0 – Diagnostic Model</a></p></li><li><p>Schema: <code>info:srw/schema/1/diagnostics-v1.1</code></p><div class="paragraph"><p>Prefix: <code>info:srw/diagnostic/1/</code></p></div>
<div class="ulist"><ul><li><p><code>uri</code> (ID), <code>details</code> (Zusatzinfos, abhängig von Diagnostic), message</p></li></ul></div></li><li><p>Infos:</p><div class="ulist"><ul><li><p>Allgemeine Informationen und Hinweise (<a href="https://www.loc.gov/standards/sru/diagnostics/">LOC</a>, <a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#_Toc324162462">OASIS SRU 2.0</a>)</p></li><li><p>Liste von Diagnostics (<a href="https://www.loc.gov/standards/sru/diagnostics/diagnosticsList.html">LOC</a>, <a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#_Toc324162491">OASIS SRU 2.0</a>)</p></li></ul></div></li><li><p>Kategorien: General (1-9), CQL (10-49), Result Sets (50-60), Records (61-74), Sorting (80-96), Explain (100-102), Stylesheets (110-111), Scan (120-121)</p></li><li><p>keine Begrenzung nur auf diese Liste, eigene Diagnostics möglich</p></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#_Toc324162462" class="bare">http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#_Toc324162462</a></p></li><li><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#diagnosticsList" class="bare">http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part3-sru2.0/searchRetrieve-v1.0-os-part3-sru2.0.html#diagnosticsList</a></p></li><li><p><a href="https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/normative-appendix.adoc#list-of-diagnostics" class="bare">https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/normative-appendix.adoc#list-of-diagnostics</a></p></li></ul></div></aside></div></section><section id="_sru_2_0_diagnostics_table" class="columns"><h2>SRU 2.0 – Diagnostics (Table)</h2><div class="slide-content"><div class="openblock column"><div class="content"><table class="tableblock frame-all grid-all xxx-small" style="width:100%"><colgroup><col style="width:7.6923%"><col style="width:46.1538%"><col style="width:46.1539%"></colgroup><tbody><tr><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">1</p></td><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">General system error</p></td><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">Debugging information (traceback)</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">2</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">System temporarily unavailable</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">3</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">Authentication error</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">4</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">Unsupported operation</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">5</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Unsupported version</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Highest version supported</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">6</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Unsupported parameter value</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Name of parameter</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">7</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Mandatory parameter not supplied</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Name of missing parameter</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">8</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Unsupported parameter</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Name of the unsupported parameter</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">9</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">Unsupported combination of parameters</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">10</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">Query syntax error</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">23</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Too many characters in term</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Length of longest term</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">26</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Non special character escaped in term</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Character incorrectly escaped</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">35</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Term contains only stopwords</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Value</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">37</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Unsupported boolean operator</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Value</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">38</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Too many boolean operators in query</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Maximum number supported</p></td></tr></table></div></div>
<div class="openblock column"><div class="content"><table class="tableblock frame-all grid-all xxx-small" style="width:100%"><colgroup><col style="width:7.6923%"><col style="width:46.1538%"><col style="width:46.1539%"></colgroup><tbody><tr><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">47</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:#b16c2b88;"><p class="tableblock">Cannot <strong>process</strong> query; reason unknown</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">48</p></td><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">Query feature unsupported</p></td><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">Feature</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">60</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Result set not created: too many matching records</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Maximum number</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">61</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">First record position out of range</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">64</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">Record temporarily unavailable</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">65</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">Record does not exist</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">66</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Unknown schema for retrieval</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Schema URI or short name</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">67</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Record not available in this schema</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Schema URI or short name</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">68</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">Not authorized to send record</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">69</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">Not authorized to send record in this schema</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">70</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Record too large to send</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Maximum record size</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">71</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">Unsupported recordXMLEscaping value</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">80</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">Sort not supported</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">110</p></td><td class="tableblock halign-left valign-top" colspan="2" style="background-color:;"><p class="tableblock">Stylesheets not supported</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">111</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Unsupported stylesheet</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">URL of stylesheet</p></td></tr></table></div></div></div></section><section id="_fcs_interface_specification"><h2>FCS Interface Specification</h2><div class="slide-content"><div class="imageblock position-absolute right-0 width-50"><img src="images/FCS_architecture_de.png" alt="FCS Architektur"></div>
<div class="ulist pt-5"><ul><li><p>FCS = Beschreibung von Capabilities,<br>
erweiterbaren Ergebnisformaten<br>
und Operationen</p><div class="paragraph"><p>→ Nutzung von SRU/CQL und<br>
Erweiterungen nach SRU</p></div></li><li><p>Interface Spezifikation = Formate und Transportprotokoll</p><div class="ulist"><ul><li><p>Endpoint = Brücke zwischen Client (FCS Formaten) und lokaler Suchmaschine</p></li><li><p>Client = Anwenderschnittstelle, Query-Eingabe und Ergebnispräsentation</p></li></ul></div></li><li><p>Discovery und Search Mechanismus</p></li></ul></div></div></section><section id="_fcs_discovery" class="left"><h2>FCS – Discovery</h2><div class="slide-content"><div class="ulist"><ul><li><p>SRU Explain</p><div class="ulist"><ul><li><p><em>Hilfe und Informationen für Client zu Zugriff, Anfrage und Verarbeitung von Ergebnissen vom Server</em></p></li></ul></div></li><li><p>Informationen über Endpunkt</p><div class="openblock"><div class="content"><div class="ulist"><ul><li><p>Capabilities: Basic Search, Advanced Search?</p></li><li><p>Ressourcen für Suche</p></li></ul></div></div></div>
<div class="paragraph"><p>→ Endpoint Description (XML) über <em>explain SRU Operation</em></p></div></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p>FCS 2.0 §3 CLARIN-FCS to SRU/CQL binding</p></li></ul></div></aside></div></section><section id="_fcs_endpoint_description"><h2>FCS – Endpoint Description</h2><div class="slide-content"><div class="ulist"><ul><li><p>XML nach Schema <a href="https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/attachments/Endpoint-Description.xsd">Endpoint-Description.xsd</a></p></li><li><p><strong><code>&lt;ed:EndpointDescription&gt;</code></strong></p><div class="ulist"><ul><li><p><code class="blue">@version</code> mit “<code>2</code>”</p></li><li><p><code class="blue">&lt;ed:Capabilities&gt;</code> (1)</p></li><li><p><code class="blue">&lt;ed:SupportedDataViews&gt;</code> (1)</p></li><li><p><code class="blue">&lt;ed:SupportedLayers&gt;</code> (1) (wenn Advanced Search Capability)</p></li><li><p><code class="blue">&lt;ed:Resources&gt;</code> (1)</p></li></ul></div></li></ul></div></div></section><section id="_fcs_endpoint_description_2"><h2>FCS – Endpoint Description (2)</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong><code>&lt;ed:Capability&gt;</code></strong></p><div class="ulist"><ul><li><p>Inhalt: Capability Identifier, URI</p><div class="ulist"><ul><li><p><code>http://clarin.eu/fcs/capability/basic-search</code></p></li><li><p><code>http://clarin.eu/fcs/capability/advanced-search</code></p></li></ul></div></li></ul></div></li></ul></div></div></section><section id="_fcs_endpoint_description_3"><h2>FCS – Endpoint Description (3)</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong><code>&lt;ed:SupportedDataView&gt;</code></strong></p><div class="ulist"><ul><li><p>Inhalt: MIME-Typ, z.B. <code>application/x-clarin-fcs-hits+xml</code></p></li><li><p><code class="blue">@id</code> → Referenzierung in <code>&lt;ed:Resource&gt;</code></p></li><li><p><code class="blue">@delivery-policy</code>: <code>send-by-default</code> / <code>need-to-request</code></p></li><li><p>keine Duplikate (nach MIME-Type) erlaubt</p></li></ul></div></li></ul></div></div></section><section id="_fcs_endpoint_description_4"><h2>FCS – Endpoint Description (4)</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong><code>&lt;ed:SupportedLayer&gt;</code></strong></p><div class="ulist"><ul><li><p>(nur bei Advanced Search)</p></li><li><p>Inhalt: Layer Identifier, z.B. “<code>orth</code>”</p></li><li><p><code class="blue">@id</code> → Referenzierung in <code>&lt;ed:Resource&gt;</code></p></li><li><p><code class="blue">@result-id</code> → Referenzierung des Layers im Advanced Data View</p></li><li><p><code class="blue">@qualifier</code> → Kennzeichner in FCS-QL Search Term für den Layer</p></li><li><p><code class="blue">@alt-value-info</code>,[.blue]` @alt-value-info-uri`: kurze Beschreibung des Layer, z.B. für Tagset, + URL mit weiteren Informationen</p></li><li><p>keine Duplikate anhand <code>@result-id</code> MIME-Typ erlaubt</p></li></ul></div></li></ul></div></div></section><section id="_fcs_endpoint_description_5" class="small"><h2>FCS – Endpoint Description (5)</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong><code>&lt;ed:Resource&gt;</code></strong></p><div class="ulist"><ul><li><p><code class="blue">@pid</code>: Persistent Identifier (z.B. <code>MdSelfLink</code> von CMDI Record)</p></li><li><p><code class="blue">&lt;ed:Title&gt;</code> (1+) mit <code>@xml:lang</code>, keine Duplikate, English erforderlich</p></li><li><p><code class="blue">&lt;ed:Description&gt;</code> (0+) mit <code>@xml:lang</code>, English erforderlich,</p></li><li><p>sollte maximal 1 Satz sein</p></li><li><p><code class="blue">&lt;ed:LandingPageURI&gt;</code> (0/1) – Link zur Webseite der Ressource</p></li><li><p><code class="blue">&lt;ed:Languages&gt;</code> (1) mit <code>&lt;ed:Language&gt;</code> mit Inhalt aus ISO 639-3</p></li><li><p><code class="blue">&lt;ed:AvailableDataViews&gt;</code> (1) mit <code>@ref</code> = Liste von IDs der <code>&lt;ed:SupportedDataView&gt;</code> Elemente, z.B. “<code>hits adv</code>”</p></li><li><p><code class="blue">&lt;ed:AvailableLayers&gt;</code> (1) (wenn Advanced Search Capability), mit <code>@ref</code> = Liste von IDs der <code>&lt;ed:SupportedLayer&gt;</code> Elemente, z.B. “<code>word lemma pos</code>”</p></li><li><p><code class="blue">&lt;ed:Resources&gt;</code> (0/1) für Teil-Ressourcen</p></li><li><p>für <code>&lt;ed:AvailableDataViews&gt;</code> und <code>&lt;ed:AvailableLayers&gt;</code> sollten Unterressourcen dieselben Listen unterstützen, eine erneute Deklaration ist erforderlich</p></li></ul></div></li></ul></div></div></section><section id="_fcs_endpoint_description_examples" class="small"><h2>FCS – Endpoint Description (Examples)</h2><div class="slide-content"><div class="listingblock"><div class="title">Minimale Endpoint Description für BASIC Search</div><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-noescape="true" data-lang="xml">&lt;ed:EndpointDescription xmlns:ed="http://clarin.eu/fcs/endpoint-description" version="2"&gt;
  &lt;ed:Capabilities&gt;
    &lt;ed:Capability&gt;http://clarin.eu/fcs/capability/basic-search&lt;/ed:Capability&gt;
  &lt;/ed:Capabilities&gt;
  &lt;ed:SupportedDataViews&gt;
    &lt;ed:SupportedDataView id="hits" delivery-policy="send-by-default"&gt;application/x-clarin-fcs-hits+xml&lt;/ed:SupportedDataView&gt;
  &lt;/ed:SupportedDataViews&gt;
  &lt;ed:Resources&gt;
    &lt;!-- just one top-level resource at the Endpoint --&gt;
    &lt;ed:Resource pid="http://hdl.handle.net/4711/0815"&gt;
      &lt;ed:Title xml:lang="de"&gt;Goethe Korpus&lt;/ed:Title&gt;
      &lt;ed:Title xml:lang="en"&gt;Goethe corpus&lt;/ed:Title&gt;
      &lt;ed:Description xml:lang="de"&gt;Das Goethe-Korpus des IDS Mannheim.&lt;/ed:Description&gt;
      &lt;ed:Description xml:lang="en"&gt;The Goethe corpus of IDS Mannheim.&lt;/ed:Description&gt;
      &lt;ed:LandingPageURI&gt;http://repos.example.org/corpus1.html&lt;/ed:LandingPageURI&gt;
      &lt;ed:Languages&gt;
        &lt;ed:Language&gt;deu&lt;/ed:Language&gt;
      &lt;/ed:Languages&gt;
      &lt;ed:AvailableDataViews ref="hits" /&gt;
    &lt;/ed:Resource&gt;
  &lt;/ed:Resources&gt;
&lt;/ed:EndpointDescription&gt;</code></pre></div></div></div></section><section id="_fcs_endpoint_description_examples_2" class="small"><h2>FCS – Endpoint Description (Examples 2)</h2><div class="slide-content"><div class="listingblock"><div class="title">Endpoint Description mit CMDI Data View und Unter-Ressourcen</div><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-noescape="true" data-line-numbers="7,30,31,32,33,34,35,36,37,38,39,40,41,42,43" data-lang="xml">&lt;ed:EndpointDescription xmlns:ed="http://clarin.eu/fcs/endpoint-description" version="2"&gt;
  &lt;ed:Capabilities&gt;
    &lt;ed:Capability&gt;http://clarin.eu/fcs/capability/basic-search&lt;/ed:Capability&gt;
  &lt;/ed:Capabilities&gt;
  &lt;ed:SupportedDataViews&gt;
    &lt;ed:SupportedDataView id="hits" delivery-policy="send-by-default"&gt;application/x-clarin-fcs-hits+xml&lt;/ed:SupportedDataView&gt;
    &lt;ed:SupportedDataView id="cmdi" delivery-policy="need-to-request"&gt;application/x-cmdi+xml&lt;/ed:SupportedDataView&gt;
  &lt;/ed:SupportedDataViews&gt;
  &lt;ed:Resources&gt;
    &lt;!-- top-level resource 1 --&gt;
    &lt;ed:Resource pid="http://hdl.handle.net/4711/0815"&gt;
      &lt;ed:Title xml:lang="de"&gt;Goethe Korpus&lt;/ed:Title&gt;
      &lt;ed:Title xml:lang="en"&gt;Goethe corpus&lt;/ed:Title&gt;
      &lt;ed:Description xml:lang="de"&gt;Das Goethe-Korpus des IDS Mannheim.&lt;/ed:Description&gt;
      &lt;ed:Description xml:lang="en"&gt;The Goethe corpus of IDS Mannheim.&lt;/ed:Description&gt;
      &lt;ed:LandingPageURI&gt;http://repos.example.org/corpus1.html&lt;/ed:LandingPageURI&gt;
      &lt;ed:Languages&gt;
        &lt;ed:Language&gt;deu&lt;/ed:Language&gt;
      &lt;/ed:Languages&gt;
      &lt;ed:AvailableDataViews ref="hits" /&gt;
    &lt;/ed:Resource&gt;
    &lt;!-- top-level resource 2 --&gt;
    &lt;ed:Resource pid="http://hdl.handle.net/4711/0816"&gt;
      &lt;ed:Title xml:lang="de"&gt;Zeitungskorpus des Mannheimer Morgen&lt;/ed:Title&gt;
      &lt;ed:Title xml:lang="en"&gt;Mannheimer Morgen newspaper corpus&lt;/ed:Title&gt;
      &lt;ed:LandingPageURI&gt;http://repos.example.org/corpus2.html&lt;/ed:LandingPageURI&gt;
      &lt;ed:Languages&gt;
        &lt;ed:Language&gt;deu&lt;/ed:Language&gt;
      &lt;/ed:Languages&gt;
      &lt;ed:AvailableDataViews ref="hits cmdi" /&gt;
      &lt;ed:Resources&gt;
        &lt;!-- sub-resource 1 of top-level resource 2 --&gt;
        &lt;ed:Resource pid="http://hdl.handle.net/4711/0816-1"&gt;
          &lt;ed:Title xml:lang="de"&gt;Zeitungskorpus des Mannheimer Morgen (vor 1990)&lt;/ed:Title&gt;
          &lt;ed:Title xml:lang="en"&gt;Mannheimer Morgen newspaper corpus (before 1990)&lt;/ed:Title&gt;
          &lt;ed:LandingPageURI&gt;http://repos.example.org/corpus2.html#sub1&lt;/ed:LandingPageURI&gt;
          &lt;ed:Languages&gt;
            &lt;ed:Language&gt;deu&lt;/ed:Language&gt;
          &lt;/ed:Languages&gt;
          &lt;ed:AvailableDataViews ref="hits cmdi" /&gt;
        &lt;/ed:Resource&gt;
        &lt;!-- sub-resource 2 of top-level resource 2 ... --&gt;
      &lt;/ed:Resources&gt;
    &lt;/ed:Resource&gt;
  &lt;/ed:Resources&gt;
&lt;/ed:EndpointDescription&gt;</code></pre></div></div></div></section><section id="_fcs_endpoint_description_examples_3" class="small"><h2>FCS – Endpoint Description (Examples 3)</h2><div class="slide-content"><div class="listingblock"><div class="title">Endpoint Description mit ADVANCED Search Capability Unterstützung</div><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-noescape="true" data-line-numbers="4,8,10,11,12,13,14,15,16,17,18,19,20,21,34,35" data-lang="xml">&lt;ed:EndpointDescription xmlns:ed="http://clarin.eu/fcs/endpoint-description" version="2"&gt;
  &lt;ed:Capabilities&gt;
    &lt;ed:Capability&gt;http://clarin.eu/fcs/capability/basic-search&lt;/ed:Capability&gt;
    &lt;ed:Capability&gt;http://clarin.eu/fcs/capability/advanced-search&lt;/ed:Capability&gt;
  &lt;/ed:Capabilities&gt;
  &lt;ed:SupportedDataViews&gt;
    &lt;ed:SupportedDataView id="hits" delivery-policy="send-by-default"&gt;application/x-clarin-fcs-hits+xml&lt;/ed:SupportedDataView&gt;
    &lt;ed:SupportedDataView id="adv" delivery-policy="send-by-default"&gt;application/x-clarin-fcs-adv+xml&lt;/ed:SupportedDataView&gt;
  &lt;/ed:SupportedDataViews&gt;
  &lt;ed:SupportedLayers&gt;
    &lt;ed:SupportedLayer id="word" result-id="http://spraakbanken.gu.se/ns/fcs/layer/word"&gt;text&lt;/ed:SupportedLayer&gt;
    &lt;ed:SupportedLayer id="orth" result-id="http://endpoint.example.org/Layers/orth" type="empty"&gt;orth&lt;/ed:SupportedLayer&gt;
    &lt;ed:SupportedLayer id="lemma" result-id="http://spraakbanken.gu.se/ns/fcs/layer/lemma"&gt;lemma&lt;/ed:SupportedLayer&gt;
    &lt;ed:SupportedLayer id="pos" result-id="http://spraakbanken.gu.se/ns/fcs/layer/pos"
                       alt-value-info="SUC tagset"
                       alt-value-info-uri="https://spraakbanken.gu.se/parole/Docs/SUC2.0-manual.pdf"
                       qualifier="suc"&gt;pos&lt;/ed:SupportedLayer&gt;
    &lt;ed:SupportedLayer id="pos2" result-id="http://spraakbanken.gu.se/ns/fcs/layer/pos2"
                       alt-value-info="2nd tagset"
                       qualifier="t2"&gt;pos&lt;/ed:SupportedLayer&gt;
  &lt;/ed:SupportedLayers&gt;

  &lt;ed:Resources&gt;
    &lt;!-- just one top-level resource at the Endpoint --&gt;
    &lt;ed:Resource pid="hdl:10794/suc"&gt;
      &lt;ed:Title xml:lang="sv"&gt;SUC-korpusen&lt;/ed:Title&gt;
      &lt;ed:Title xml:lang="en"&gt;The SUC corpus&lt;/ed:Title&gt;
      &lt;ed:Description xml:lang="sv"&gt;Stockholm-Umeå-korpusen hos Språkbanken.&lt;/ed:Description&gt;
      &lt;ed:Description xml:lang="en"&gt;The Stockholm-Umeå corpus at Språkbanken.&lt;/ed:Description&gt;
      &lt;ed:LandingPageURI&gt;https://spraakbanken.gu.se/resurser/suc&lt;/ed:LandingPageURI&gt;
      &lt;ed:Languages&gt;
        &lt;ed:Language&gt;swe&lt;/ed:Language&gt;
      &lt;/ed:Languages&gt;
      &lt;ed:AvailableDataViews ref="hits adv" /&gt;
      &lt;ed:AvailableLayers ref="word lemma pos pos2" /&gt;
    &lt;/ed:Resource&gt;
  &lt;/ed:Resources&gt;
&lt;/ed:EndpointDescription&gt;</code></pre></div></div></div></section><section id="_fcs_search"><h2>FCS – Search</h2><div class="slide-content"><div class="ulist"><ul><li><p>SRU SearchRetreive</p></li><li><p>Suche</p><div class="ulist"><ul><li><p><strong>Basic Search</strong> mit CQL</p></li><li><p><strong>Advanced Search</strong> mit FCS-QL</p></li></ul></div></li><li><p>Suchergebnisse werden im <em>Resource (Fragment)</em> und <em>Data View</em> Formaten serialisiert</p></li><li><p>Details bei Implementierung → <a href="#_resources_und_data_views">Kapitel <em>Resources und Data Views</em></a></p></li></ul></div></div></section><section id="_fcs_sru_extension_parameter"><h2>FCS – SRU Extension Parameter</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong><code>x-fcs-endpoint-description</code></strong> (explain)</p><div class="ulist"><ul><li><p>“<code>true</code>” - <code>&lt;sru:extraResponseData&gt;</code> der Explain Antwort enthält das Endpoint Description Dokument</p></li></ul></div></li><li><p><strong><code>x-fcs-context</code></strong> (searchRetrieve)</p><div class="ulist"><ul><li><p>Komma-separierte Liste von PIDs</p></li><li><p>Einschränkung der Suche auf Ressourcen mit diesen PIDs</p></li></ul></div></li><li><p><strong><code>x-fcs-dataviews</code></strong> (searchRetrieve)</p><div class="ulist"><ul><li><p>Komma-separierte Liste von Data View Identifiern</p></li><li><p>Endpunkte sollten diese <em><code>need-to-request</code></em> Data Views mit ausliefern</p></li></ul></div></li><li><p><strong><code>x-fcs-rewrites-allowed</code></strong> (searchRetrieve)</p><div class="ulist"><ul><li><p>“<code>true</code>” - Endpunkt kann Query vereinfachen für höheren Recall</p></li></ul></div></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p><a href="https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/normative-appendix.adoc#list-of-extra-request-parameters" class="bare">https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/normative-appendix.adoc#list-of-extra-request-parameters</a></p></li></ul></div></aside></div></section><section id="_fcs_diagnostics"><h2>FCS – Diagnostics</h2><div class="slide-content"><div class="ulist"><ul><li><p>Ergänzungen zu den SRU Diagnostics → <a href="#_sru_2_0_diagnostics">SRU 2.0 – Diagnostics</a></p></li><li><p>Präfix: <code>http://clarin.eu/fcs/diagnostic/</code></p></li><li><p>Bezug auf die Extra-Request-Parameter</p></li></ul></div></div></section><section id="_fcs_diagnostics_tabelle"><h2>FCS – Diagnostics (Tabelle)</h2><div class="slide-content"><table class="tableblock frame-all grid-all xx-small" style="width:100%"><colgroup><col style="width:37.5%"><col style="width:50%"><col style="width:12.5%"></colgroup><thead><tr><th class="tableblock halign-left valign-top" style="background-color:;">Identifier URI</th><th class="tableblock halign-left valign-top" style="background-color:;">Description</th><th class="tableblock halign-left valign-top" style="background-color:;">Impact</th></tr><tbody><tr><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock"><code>http://clarin.eu/fcs/diagnostic/1</code></p></td><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">Persistent identifier passed by the Client for restricting the search is invalid.</p></td><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">non-fatal</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>http://clarin.eu/fcs/diagnostic/2</code></p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Resource set too large. Query context automatically adjusted.</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">non-fatal</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>http://clarin.eu/fcs/diagnostic/3</code></p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Resource set too large. Cannot perform Query.</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">fatal</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock"><code>http://clarin.eu/fcs/diagnostic/4</code></p></td><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">Requested Data View not valid for this resource.</p></td><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">non-fatal</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>http://clarin.eu/fcs/diagnostic/10</code></p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">General query syntax error.</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">fatal</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock"><code>http://clarin.eu/fcs/diagnostic/11</code></p></td><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">Query too complex. Cannot perform Query.</p></td><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">fatal</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>http://clarin.eu/fcs/diagnostic/12</code></p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Query was rewritten.</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">non-fatal</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock"><code>http://clarin.eu/fcs/diagnostic/14</code></p></td><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">General processing hint.</p></td><td class="tableblock halign-left valign-top" style="background-color:#b16c2b88;"><p class="tableblock">non-fatal</p></td></tr></table>
<aside class="notes"><div class="ulist"><ul><li><p><a href="https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/normative-appendix.adoc#list-of-diagnostics" class="bare">https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/normative-appendix.adoc#list-of-diagnostics</a></p></li></ul></div></aside></div></section><section id="_versionen_und_rückwärtskompatibilität"><h2>Versionen und Rückwärtskompatibilität</h2><div class="slide-content"><div class="ulist"><ul><li><p>“Clients MUST be compatible to CLARIN-FCS 1.0” (<a href="https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/interface-specification.adoc#backwards-compatibility">Quelle</a>)</p><div class="ulist"><ul><li><p>damit Implementierung von SRU 1.2</p></li><li><p>Beschränkung auf Basic Search Capability</p></li><li><p>Verarbeitung von Legacy XML Namespaces (SRU Response, Diagnostics)</p></li></ul></div></li><li><p><strong>Heuristik zur Versionserkennung</strong> (von Endpunkten)</p><div class="ulist"><ul><li><p>Client: <code>Explain</code>-Request ohne <code>version</code> und <code>operation</code> Parameter</p></li><li><p>Endpoint: SRU Response <code>&lt;sru:explainResponse&gt;</code>/<code>&lt;sru:version&gt;</code></p></li></ul></div></li><li><p>Versionen</p><div class="ulist"><ul><li><p>FCS 2.0 ↔ SRU 2.0</p></li><li><p>FCS 1.0 ↔ SRU 1.2 (SRU 1.1)</p></li></ul></div></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p><a href="https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/interface-specification.adoc#versioning-and-extensions" class="bare">https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/interface-specification.adoc#versioning-and-extensions</a></p></li></ul></div></aside></div></section><section id="_hinweise_zu_fcs_sru_aggregator"><h2>Hinweise zu FCS SRU Aggregator</h2><div class="slide-content"><div class="ulist"><ul><li><p>momentan keine Unterstützung von nur FCS 2.0 Endpunkten</p><div class="openblock"><div class="content"><div class="ulist"><ul><li><p>aus Kompatibilitätsgründen Support von <em>Legacy FCS</em> und <em>FCS 1.0</em></p></li><li><p>Annahme, dass Endpunkte bei <em>FCS 2.0</em> auch frühere FCS Versionen unterstützen… <span class="lightgrey"><em>(mit CLARIN Bibliotheken kein Problem)</em></span></p></li></ul></div></div></div>
<div class="paragraph"><p>→ <em>FCS 2.0 only</em> Endpunkte erhalten somit trotzdem <em>FCS 1.0 (SRU 1.2)</em> Anfragen!</p></div></li><li><p>Aggregator sendet <code>searchRetrieve</code>-Anfragen mit nur jeweils einer Ressourcen-PID im <code>x-fcs-context</code> Parameter</p><div class="ulist"><ul><li><p>d.h. Suchen über <code>N</code> Ressourcen eines Endpunktes → <code>N</code> separate Suchanfragen</p></li></ul></div></li></ul></div></div></section><section id="_hinweis_zu_scan_operation" class="hidden"><h2>Hinweis zu Scan-Operation</h2><div class="slide-content"><div class="ulist"><ul><li><p>Nutzung <em>nur</em> in Legacy FCS,</p><div class="paragraph"><p>ursprünglich zur Auflistung der verfügbaren Ressourcen</p></div></li><li><p>Reserviert für mögliche zukünftige Nutzung</p></li><li><p>Bitte ignorieren!</p></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p><a href="https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/fcs-to-sru-cql-binding.adoc#operation-scan" class="bare">https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/fcs-to-sru-cql-binding.adoc#operation-scan</a></p></li><li><p><a href="http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part6-scan/searchRetrieve-v1.0-os-part6-scan.html" class="bare">http://docs.oasis-open.org/search-ws/searchRetrieve/v1.0/os/part6-scan/searchRetrieve-v1.0-os-part6-scan.html</a></p></li></ul></div></aside>
<div style="page-break-after: always;"></div></div></section></section>
<section><section id="_referenzimplementierungen" data-background-image="images/textplus-fcs.002.png" data-background-opacity="0.5"><h2>Referenzimplementierungen</h2><div class="slide-content"><aside class="notes"><div class="ulist"><ul><li><p>Java und Python, für FCS Endpunkte</p></li><li><p>Klassenhierarchien, Aufbau &amp; Struktur, Abläufe, Konfiguration</p></li></ul></div></aside></div></section><section id="_clarin_referenzbibliotheken_java" class="small"><h2>CLARIN Referenzbibliotheken (Java)</h2><div class="slide-content"><div class="ulist"><ul><li><p>Entwicklung ab ~2012</p></li><li><p>Modularisiert: Client/Server, SRU/FCS, Parser</p></li><li><p>in Java 1.8+ (<a href="https://endoflife.date/oracle-jdk"><em>EOL: Ende 2030</em></a>)</p></li><li><p>Umfangreiche Dokumentation, einzelne Tests (lange im Einsatz)</p></li><li><p>Artefakte im CLARIN Nexus, Code auf Github</p></li><li><p>Server/Endpunkt: externe Abhängigkeiten zu</p><div class="ulist"><ul><li><p>Logging: <code>slf4j</code></p></li><li><p>HTTP: <code>javax.servlet:servlet-api</code></p></li><li><p>Parser: <code>antlr4</code> (FCS-QL) / CQL</p></li></ul></div></li><li><p>Build: maven</p></li><li><p>Deployment: jetty, tomcat, …</p></li></ul></div></div></section><section id="_clarin_referenzbibliotheken_python" class="small"><h2>CLARIN Referenzbibliotheken (Python)</h2><div class="slide-content"><div class="ulist"><ul><li><p>~ 2022: Übersetzung Java-Referenzbibliotheken nach Python</p></li><li><p>Starke Orientierung an Java</p><div class="paragraph"><p>→ (fast) gleiche Interfaces, Klassen-/Funktionsnamen</p></div></li><li><p>aber: leichte Optimierungen für Python, kein 1:1</p></li><li><p>Fokus (neue) FCS Endpunkte → keine Clienten!</p></li><li><p>Typisiert, Dokumentiert; auf PyPI veröffentlicht</p></li><li><p>Synchrones, minimales WSGI - erlaubt Einbettung in bestehende Apps</p></li><li><p>Python 3.8+</p></li><li><p>Abhängigkeiten zu</p><div class="ulist"><ul><li><p>XML-Parse: <code>lxml</code></p></li><li><p>HTTP/WSGI: <code>werkzeug</code></p></li><li><p>Parser: <code>PLY</code> (CQL), <code>ANTLR4</code> (FCS-QL)</p></li></ul></div></li></ul></div></div></section><section id="_clarin_referenzbibliotheken" class="left small"><h2>CLARIN Referenzbibliotheken</h2><div class="slide-content"><div class="ulist"><ul><li><p>FCS SRU Server: <a href="https://github.com/clarin-eric/fcs-sru-server/">Java</a> (<a href="https://clarin-eric.github.io/fcs-sru-server/apidocs/index.html">docs</a>), <a href="https://github.com/Querela/fcs-sru-server-python/">Python</a> (<a href="https://fcs-sru-server-python.readthedocs.io/en/latest/">docs</a>)</p></li><li><p>FCS Simple Endpoint: <a href="https://github.com/clarin-eric/fcs-simple-endpoint">Java</a> (<a href="https://clarin-eric.github.io/fcs-simple-endpoint/apidocs/index.html">docs</a>), <a href="https://github.com/Querela/fcs-simple-endpoint-python">Python</a> (<a href="https://fcs-simple-endpoint-python.readthedocs.io/en/latest/">docs</a>)</p></li></ul></div>
<div class="ulist mt-2"><ul><li><p>FCS SRU Client: <a href="https://github.com/clarin-eric/fcs-sru-client/">Java</a> (<a href="https://clarin-eric.github.io/fcs-sru-client/apidocs/index.html">docs</a>)</p></li><li><p>FCS Simple Client: <a href="https://github.com/clarin-eric/fcs-simple-client">Java</a> (<a href="https://clarin-eric.github.io/fcs-simple-client/apidocs/index.html">docs</a>)</p></li></ul></div>
<div class="ulist mt-2"><ul><li><p>CQL Parser: <a href="https://github.com/indexdata/cql-java">Java</a> (<a href="http://zing.z3950.org/cql/java/docs/index.html">docs</a>?), <a href="https://github.com/Querela/cql-python">Python</a>, <a href="https://github.com/Querela/cql-js">JavaScript</a></p></li><li><p>FCS-QL Parser: <a href="https://github.com/clarin-eric/fcs-ql">Java</a>, <a href="https://github.com/Querela/fcs-ql-python">Python</a> (<a href="https://fcs-ql-python.readthedocs.io/en/latest/">docs</a>)</p></li></ul></div>
<div class="ulist mt-2"><ul><li><p>Maven Endpoint Archetype: <a href="https://github.com/clarin-eric/fcs-endpoint-archetype">Java</a></p></li><li><p>FCS SRU Aggregator: <a href="https://github.com/clarin-eric/fcs-sru-aggregator">Java</a></p></li><li><p>FCS Endpoint Tester: <a href="https://github.com/clarin-eric/fcs-endpoint-tester">Java</a> ← Test Konformität <em>SRU/FCS Protokoll</em></p></li><li><p>Korp: <a href="https://github.com/clarin-eric/fcs-korp-endpoint/">Java</a>, <a href="https://github.com/Querela/fcs-korp-endpoint-python/">Python</a></p></li></ul></div>
<div class="paragraph"><p><em>Indexdata: CQL-Parser, Querela: Python Implementierungen</em></p></div>
<aside class="notes"><div class="ulist"><ul><li><p>Hinweis: konkrete Beispiele bzw. Vorstellung zur Implementierung folgt in späterem Abschnitt, hier der High-Level-Overview</p></li></ul></div></aside></div></section><section id="_fcs_endpunkt_aufbau_und_struktur" class="small"><h2>FCS Endpunkt – Aufbau und Struktur</h2><div class="slide-content"><div class="ulist"><ul><li><p>Query Parser (CQL, FCS-QL)</p></li></ul></div>
<div class="ulist mt-2"><ul><li><p><strong>FCS SRU Server</strong></p><div class="ulist"><ul><li><p>SRU Konfiguration, Versionen, Parameter, Diagnostics, Namespaces</p></li><li><p>XML SRU Writer</p></li><li><p>Request Parameter Parser, SRUServer (Request Handler)</p></li><li><p>Abstrakte SRU Interfaces (Ergebnisse, <code>SRUSearchEngine</code>)</p></li><li><p>Auth (<em>Interface, WIP</em>)</p></li></ul></div></li></ul></div></div></section><section id="_fcs_endpunkt_aufbau_und_struktur_cont" class="small"><h2>FCS Endpunkt – Aufbau und Struktur (Cont.)</h2><div class="slide-content"><div class="ulist mt-2"><ul><li><p><strong>FCS Simple Endpoint</strong></p><div class="ulist"><ul><li><p>FCS Konfiguration (Endpoint Description), Parameter, Diagnostics, Namespaces</p></li><li><p>XML Endpoint Description Parser, Record und DataView Writer</p></li><li><p>SimpleEndpointSearchEngineBase (<code>SRUSearchEngine</code> + FCS Ergänzungen)</p></li></ul></div></li></ul></div>
<div class="ulist mt-2"><ul><li><p><strong>FCS Endpoint für XYZ</strong></p><div class="ulist"><ul><li><p>Implementierung abstrakter Klassen und Anbindung an Suchmaschine, Query Übersetzung</p></li><li><p>Konfiguration: Endpoint Description, SRU Server Configuration</p></li><li><p>Deployment als Java Servlet Server oder WSGI-App</p></li></ul></div></li></ul></div></div></section><section id="_fcs_endpunkt_initialisierung" class="left small"><h2>FCS Endpunkt – Initialisierung</h2><div class="slide-content"><div class="paragraph"><p><code>SRUServerServlet</code> / <code>SRUServerApp</code> (WebServer)</p></div>
<div class="ulist"><ul><li><p>Default WebApp-Parameter setzen</p></li><li><p>Parsen der SRU Server Config</p></li><li><p>Erstellen der <code>QueryParserRegistry</code> (CQL)</p></li><li><p>Initialisieren der <strong><code>SRUSearchEngine</code></strong></p></li><li><p>Erstellen von <code>SRUServer</code> (mit <code>SearchEngine</code> + Konfiguration)</p></li></ul></div>
<div class="paragraph"><p><code>SRUSearchEngine</code><br>
(Nutzer-Implementierung, → <code>SimpleEndpointSearchEngineBase</code>)</p></div>
<div class="ulist"><ul><li><p>Weitere Initialisierung der QueryParserRegistry (FCS-QL)</p></li><li><p><strong><code>do_init</code></strong> (Nutzer-Init)</p></li><li><p>Erstellen der Endpoint Description</p></li></ul></div></div></section><section id="_fcs_endpunkt_kommunikationsfluss" class="left small"><h2>FCS Endpunkt – Kommunikationsfluss</h2><div class="slide-content"><div class="paragraph"><p>[GET] Anfrage (eingehend)</p></div>
<div class="openblock ms-5 left block-border-left-dashed"><div class="content"><div class="paragraph"><p>↳ <code>SRUServerServlet</code> / <code>SRUServerApp</code> (WebServer)</p></div>
<div class="exampleblock ms-5 left block-border-left-dashed"><div class="content"><div class="paragraph"><p>↳ <code>SRUServer</code></p></div>
<div class="ulist ms-3"><ul><li><p>URL-Parameterauswertung</p></li><li><p>Multiplexing nach search/scan/explain</p></li></ul></div>
<div class="exampleblock ms-5 left block-border-left-dashed"><div class="content"><div class="paragraph"><p>↳ <code>SimpleEndpointSearchEngineBase</code> (Nutzer-Implementierung)</p></div>
<div class="ulist ms-3"><ul><li><p>Suchanfrage parsen (CQL/FCS-QL) and Suchmaschine senden</p></li><li><p>Ergebnis in <code>SRUSearchResultSet</code> verpacken</p></li><li><p>mögliche Diagnostics etc.</p></li></ul></div>
<div class="paragraph"><p>↲</p></div></div></div>
<div class="ulist ms-3"><ul><li><p>mögliche Fehlerbehandlung</p></li><li><p>Generierung XML Output (SRU Parameter)</p></li></ul></div></div></div></div></div></div></section><section id="_fcs_endpunkt_klassenhierarchie" class="left"><h2>FCS Endpunkt – Klassenhierarchie</h2><div class="slide-content"><div class="paragraph"><p><code>SRUServerServlet</code> - <a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/utils/SRUServerServlet.java">java</a> (Servlet) / <code>SRUServerApp</code> - <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/server/wsgi.py#L36">python</a> (WSGI)</p></div>
<div class="openblock ms-5 darkgrey font-italic block-border-left-dashed"><div class="content"><div class="paragraph"><p>Servlet Implementierung für Servlet Container, <code>doGet</code>-Handler, Setup von <code>SRUServer</code><br>
Wrapper/Anwendung, die vom Betreiber ausgeführt wird</p></div></div></div>
<div class="paragraph"><p>SRUServer - <a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/SRUServer.java">java</a>, <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/server/server.py#L293">python</a></p></div>
<div class="openblock ms-5 darkgrey font-italic block-border-left-dashed"><div class="content"><div class="paragraph"><p>SRU Protokoll Implementierung, <code>handleRequest</code>, Fehlerbehandlung, XML Output Generierung</p></div></div></div>
<div class="paragraph"><p>SRURequestImpl - <a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/SRURequestImpl.java">java</a>, <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/server/request.py#L567">python</a></p></div>
<div class="openblock ms-5 darkgrey font-italic block-border-left-dashed"><div class="content"><div class="paragraph"><p>Konkrete SRU GET Parameterauswertung (Parsen, Validierung; SRU Versionen) + mögliche FCS-Parameter (“<code>x-</code>&#8230;&#8203;”), SRU-Versionsbestimmung</p></div></div></div>
<div class="openblock ms-5 block-border-left-dashed"><div class="content"><div class="paragraph"><p>↳ SRURequest (Interface) - <a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/SRURequest.java">java</a>, <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/server/request.py#L47">python</a></p></div>
<div class="exampleblock ms-5 darkgrey font-italic block-border-left-dashed"><div class="content"><div class="paragraph"><p>Dokumentation aller SRU Parameter</p></div></div></div></div></div></div></section><section id="_fcs_endpunkt_klassenhierarchie_2" class="left"><h2>FCS Endpunkt – Klassenhierarchie (2)</h2><div class="slide-content"><div class="paragraph"><p><strong><code>XYZEndpointSearchEngine</code></strong> - korp: <a href="https://github.com/clarin-eric/fcs-korp-endpoint/blob/master/src/main/java/se/gu/spraakbanken/fcs/endpoint/korp/KorpEndpointSearchEngine.java">java</a>, <a href="https://github.com/Querela/fcs-korp-endpoint-python/blob/5ee448d2369e450571a6d82d3e379154752a3397/src/korp_endpoint/endpoint.py#L182">python</a></p></div>
<div class="openblock ms-5 darkgrey font-italic block-border-left-dashed"><div class="content"><div class="paragraph"><p>Konkrete Implementierung von <code>createEndpointDescription</code>, <code>do</code>*-Methoden</p></div></div></div>
<div class="openblock ms-5 block-border-left-dashed"><div class="content"><div class="paragraph"><p>↳ <code>SimpleEndpointSearchEngineBase</code> (abstrakt) - <a href="https://github.com/clarin-eric/fcs-simple-endpoint/blob/main/src/main/java/eu/clarin/sru/server/fcs/SimpleEndpointSearchEngineBase.java">java</a>, <a href="https://github.com/Querela/fcs-simple-endpoint-python/blob/1.0.4/src/clarin/sru/fcs/server/search.py#L507">python</a></p></div>
<div class="exampleblock ms-5 darkgrey font-italic block-border-left-dashed"><div class="content"><div class="paragraph"><p>Lifecyle (<code>init</code> → <code>destroy</code>), Integration von Endpoint Description, Interfaces für Nutzer</p></div></div></div>
<div class="exampleblock ms-5 block-border-left-dashed"><div class="content"><div class="paragraph"><p>↳ <code>SRUSearchEngineBase</code> (abstrakt) - <a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/utils/SRUSearchEngineBase.java">java</a></p></div>
<div class="exampleblock ms-5 block-border-left-dashed"><div class="content"><div class="paragraph"><p>↳ <code>SRUSearchEngine</code> (Interface) - <a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/SRUSearchEngine.java">java</a>, <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/server/server.py#L160">python</a></p></div>
<div class="exampleblock ms-5 darkgrey font-italic block-border-left-dashed"><div class="content"><div class="paragraph"><p>Interface: <code>search</code>, <code>explain</code>, <code>scan</code></p></div></div></div></div></div></div></div></div></div></div></section><section id="_fcs_endpunkt_klassenhierarchie_3" class="left"><h2>FCS Endpunkt – Klassenhierarchie (3)</h2><div class="slide-content"><div class="paragraph"><p><strong><code>XYZSRUSearchResultSet</code></strong> - korp: <a href="https://github.com/clarin-eric/fcs-korp-endpoint/blob/master/src/main/java/se/gu/spraakbanken/fcs/endpoint/korp/KorpSRUSearchResultSet.java">java</a>, <a href="https://github.com/Querela/fcs-korp-endpoint-python/blob/5ee448d2369e450571a6d82d3e379154752a3397/src/korp_endpoint/endpoint.py#L57">python</a></p></div>
<div class="openblock ms-5 darkgrey font-italic block-border-left-dashed"><div class="content"><div class="paragraph"><p>Konkrete Implementierung, <code>nextRecord</code> + <code>writeRecord</code> Iterator und Serialisierung von Ergebnissen</p></div></div></div>
<div class="openblock ms-5 block-border-left-dashed"><div class="content"><div class="paragraph"><p>↳ <code>SRUSearchResultSet</code> (abstrakt) - <a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/SRUSearchResultSet.java">java</a>, <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/server/result.py#L208">python</a></p></div>
<div class="exampleblock ms-5 darkgrey font-italic block-border-left-dashed"><div class="content"><div class="paragraph"><p>Felder für <code>searchRetrieve</code> Operation Ergebnisse (total, records, …)</p></div></div></div>
<div class="exampleblock ms-5 block-border-left-dashed"><div class="content"><div class="paragraph"><p>↳ <code>SRUAbstractResult</code> (Interface) - <a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/SRUAbstractResult.java">java</a>, <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/server/result.py#L15">python</a></p></div>
<div class="exampleblock ms-5 darkgrey font-italic block-border-left-dashed"><div class="content"><div class="paragraph"><p>Diagnostics + <code>ExtraResponseData</code></p></div></div></div></div></div></div></div>
<div class="paragraph"><p><em><code>XYZSRUScanResultSet</code>, <code>XYZSRUExplainResult</code> müssen nicht extra implementiert werden, default-Verhalten reicht hier</em></p></div></div></section><section id="_fcs_endpunkt_klassenhierarchie_4" class="left"><h2>FCS Endpunkt – Klassenhierarchie (4)</h2><div class="slide-content"><div class="paragraph"><p><code>SRUConstants</code> - <a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/SRUConstants.java">Java</a>, <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/constants.py">Python</a></p></div>
<div class="ulist"><ul><li><p>Diagnostic Codes</p></li><li><p>Namespaces</p></li><li><p>Python: SRU Parameter + Werte</p></li></ul></div>
<div class="paragraph mt-5"><p><code>SRUDiagnostic</code> - <a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/SRUDiagnostic.java">Java</a>, <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/diagnostic.py">Python</a></p></div>
<div class="ulist"><ul><li><p>Fehlerbehandlung, Message (Textbeschreibung) der Diagnostics</p></li></ul></div></div></section><section id="_endpunkt_konfigurationen" class="left small"><h2>Endpunkt Konfigurationen</h2><div class="slide-content"><div class="listingblock position-absolute right--30 width-75 opacity-50"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-noescape="true" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;endpoint-config xmlns="http://www.clarin.eu/sru-server/1.0/"&gt;
    &lt;databaseInfo&gt;
        &lt;title xml:lang="se"&gt;Språkbankens korpusar&lt;/title&gt;
        &lt;title xml:lang="en" primary="true"&gt;The Språkbanken corpora&lt;/title&gt;
        &lt;description xml:lang="se"&gt;Sök i Språkbankens korpusar.&lt;/description&gt;
        &lt;description xml:lang="en" primary="true"&gt;Search in the Språkbanken corpora.&lt;/description&gt;
        &lt;author xml:lang="en"&gt;Språkbanken (The Swedish Language Bank)&lt;/author&gt;
        &lt;author xml:lang="se" primary="true"&gt;Språkbanken&lt;/author&gt;
    &lt;/databaseInfo&gt;

    &lt;indexInfo&gt;
        &lt;set name="fcs" identifier="http://clarin.eu/fcs/resource"&gt;
            &lt;title xml:lang="se"&gt;Clarins innehållssökning&lt;/title&gt;
            &lt;title xml:lang="en" primary="true"&gt;CLARIN Content Search&lt;/title&gt;
        &lt;/set&gt;
        &lt;index search="true" scan="false" sort="false"&gt;
            &lt;title xml:lang="en" primary="true"&gt;Words&lt;/title&gt;
            &lt;map primary="true"&gt;
                &lt;name set="fcs"&gt;words&lt;/name&gt;
            &lt;/map&gt;
        &lt;/index&gt;
    &lt;/indexInfo&gt;

    &lt;schemaInfo&gt;
        &lt;schema identifier="http://clarin.eu/fcs/resource" name="fcs"
                sort="false" retrieve="true"&gt;
            &lt;title xml:lang="en" primary="true"&gt;CLARIN Content Search&lt;/title&gt;
        &lt;/schema&gt;
    &lt;/schemaInfo&gt;
&lt;/endpoint-config&gt;</code></pre></div></div>
<div class="paragraph"><p><strong>WebApp Parameter</strong> (<code>web.xml</code> o.Ä.) - <a href="https://github.com/clarin-eric/fcs-korp-endpoint/blob/master/src/main/webapp/WEB-INF/web.xml">Korp-Beispiel</a></p></div>
<div class="ulist"><ul><li><p>SRU Version</p></li><li><p>SRU/FCS Stellschrauben</p></li></ul></div>
<div class="paragraph"><p><strong>SRU (SRU Server Config)</strong> - <a href="https://github.com/clarin-eric/fcs-korp-endpoint/blob/master/src/main/webapp/WEB-INF/sru-server-config.xml">Korp-Beispiel</a> →</p></div>
<div class="ulist"><ul><li><p><code>databaseInfo</code> zu Endpunkt, <em>aber keine Auswertung im Client?</em></p></li><li><p>default: <code>indexInfo</code> + <code>schemaInfo</code></p></li><li><p><strong>Pflicht: <code>database</code> Feld in <code>serverInfo</code>!</strong></p></li></ul></div>
<div class="paragraph"><p>FCS (Endpoint Description) - <a href="https://github.com/clarin-eric/fcs-korp-endpoint/blob/master/src/main/webapp/WEB-INF/endpoint-description.xml">Korp-Beispiel</a></p></div>
<div class="ulist"><ul><li><p>FCS Version (1/2)</p></li><li><p>Capabilities, Layer, DataViews</p></li><li><p>Ressourcen</p></li></ul></div>
<div style="page-break-after: always;"></div></div></section></section>
<section><section id="_resources_und_data_views" data-background-image="images/textplus-fcs.002.png" data-background-opacity="0.5"><h2>Resources und Data Views</h2><div class="slide-content"><aside class="notes"><div class="ulist"><ul><li><p>Endpoint Capabilities, BASIC/ADVANCED Search, FCS-QL</p></li><li><p>Resource, Resource Fragment, Data View (Hits, Advanced)</p></li><li><p>Ergebnis-Serialisierung, Anfragesprachen</p></li></ul></div></aside></div></section><section id="_endpoint_description_capabilities" class="left"><h2>Endpoint Description – Capabilities</h2><div class="slide-content"><div class="paragraph"><p><strong>http://clarin.eu/fcs/capability/basic-search</strong></p></div>
<div class="ulist"><ul><li><p>Erforderlich</p></li><li><p>Query: Volltextsuche (Basic) mit Minimal-CQL (AND/OR)</p></li><li><p>DataView: HITS</p></li></ul></div>
<div class="paragraph mt-5"><p><strong>http://clarin.eu/fcs/capability/advanced-search</strong></p></div>
<div class="ulist"><ul><li><p>Optional</p></li><li><p>Query: FCS-QL (Strukturierte Suche über Annotationslayer)</p></li><li><p>DataView: HITS und Advanced</p></li></ul></div></div></section><section id="_endpoint_description_capabilities_2"><h2>Endpoint Description – Capabilities (2)</h2><div class="slide-content"><div class="ulist"><ul><li><p>Weitere Capabilities denkbar</p><div class="paragraph"><p>→ aber auf Basic und Advanced beschränkt!</p></div></li><li><p>Bestimmen nicht nur Suchmodi!</p></li><li><p>In Arbeit:</p><div class="ulist"><ul><li><p>Authentifizierung/Authorisierung</p></li><li><p>Lexikalische Suche: <code>…/lex-search</code> → LexCQL, LexHITS</p></li><li><p>Syntaktische Suche?</p></li></ul></div></li><li><p>Hinweis: laut XSD besitzen Capability-URIs folgendes Schema
<code>http://clarin.eu/fcs/capability/\w([\.\-]{0,1}\w)*</code></p></li></ul></div></div></section><section id="_basic_search" class="left"><h2>BASIC Search</h2><div class="slide-content"><div class="listingblock position-absolute right--30 width-50 opacity-50"><div class="content"><pre class="highlightjs highlight"><code class="language-x86asm hljs" data-noescape="true" data-lang="x86asm">cat
"cat"
cat AND dog
"grumpy cat"
"grumpy cat" AND dog
"grumpy cat" OR "lazy dog"
cat AND (mouse OR "lazy dog")</code></pre></div></div>
<div class="ulist"><ul><li><p>Verpflichtend!</p></li><li><p>Einfache <strong>Volltextsuche</strong></p></li><li><p><strong>Contextual Query Language (CQL)</strong> als Anfragesprache</p><div class="ulist"><ul><li><p>Endpunkte müssen “term-only” Queries unterstützen</p></li><li><p>können Boolean-Operatoren (<code>AND</code>/<code>OR</code>) und Sub-Queries unterstützen</p></li><li><p>bei Fehlern mit entsprechender Diagnostic abbrechen</p></li><li><p>Endpunkte entscheiden selber, worauf gesucht wird</p><div class="paragraph"><p>(Text, Normalisierung o.Ä.)</p></div></li></ul></div></li><li><p>Ergebnisse serialisiert im <strong>Generic Hits (HITS) Data View</strong></p></li></ul></div>
<div class="paragraph"><p><strong><code>http://clarin.eu/fcs/capability/basic-search</code></strong></p></div></div></section><section id="_advanced_search" class="left"><h2>ADVANCED Search</h2><div class="slide-content"><div class="listingblock position-absolute right--30 width-50 opacity-50"><div class="content"><pre class="highlightjs highlight"><code class="language-x86asm hljs" data-noescape="true" data-lang="x86asm">"walking"
[token = "walking"]
"Dog" /c
[word = "Dog" /c]
[pos = "NOUN"]
[pos != "NOUN"]
[lemma = "walk"]
"blaue|grüne" [pos = "NOUN"]
"dogs" []{3,} "cats" within s
[z:pos = "ADJ"]
[z:pos = "ADJ" &amp; q:pos = "ADJ"]</code></pre></div></div>
<div class="ulist"><ul><li><p>Optional</p></li><li><p>Strukturierte Suche in annotierten Daten,</p><div class="paragraph"><p>repräsentiert in Annotationslayern</p></div>
<div class="paragraph"><p>→ Anfragesprache <strong>FCS-QL</strong></p></div>
<div class="ulist"><ul><li><p>Anfragen können verschieden Annotationslayer verknüpfen</p></li><li><p>Endpunkte sollten möglichst so viele Annotationslayer unterstützen wie möglich</p></li></ul></div></li><li><p>Ergebnisse serialisiert in <strong>Advanced (ADV) Data View</strong> und <strong>Generic Hits (HITS) Data View</strong></p></li></ul></div>
<div class="paragraph"><p><strong><code>http://clarin.eu/fcs/capability/advanced-search</code></strong></p></div></div></section><section id="_fcs_ql"><h2>FCS-QL</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong>Annotationslayer</strong>, diese enthalten Annotationen eines Types (z.B. Text, POS-Tags, …)</p></li><li><p>Query erlaubt Kombination dieser Layer bei Anfrage</p></li><li><p>Jeder Layer ist <strong>segmentiert</strong> → Suche nach einzelnem Lemma</p><div class="ulist"><ul><li><p>keine Vorgabe, wie Segmentierung stattfinden soll</p></li><li><p><em>Annahme, dass Segmentierung über Layer konsistent (für Darstellung im Advanced Data View)</em></p></li></ul></div></li></ul></div></div></section><section id="_fcs_ql_hinweise"><h2>FCS-QL – Hinweise</h2><div class="slide-content"><div class="ulist"><ul><li><p>Endpunkte müssen FCS-QL komplett parsen können!</p></li><li><p>Anfragen mit nicht unterstützten Operatoren oder Layern?</p><div class="ulist"><ul><li><p>Fehler mit Diagnostics erzeugen, oder</p></li><li><p>Umschreiben von Queries, wenn durch “<code>x-fcs-rewrites-allowed</code>” erlaubt</p></li></ul></div></li><li><p>Suchen sind <em>Case Sensitive</em> (im Query konfigurierbar)</p></li><li><p>Suchen sollten auf Layern stattfinden, wo es Sinn macht,</p><div class="paragraph"><p>z.B. bei Vorhandensein mehrerer Text- oder POS-Layer</p></div></li></ul></div></div></section><section id="_fcs_ql_layertypen"><h2>FCS-QL – Layertypen</h2><div class="slide-content"><table class="tableblock frame-all grid-all x-small" style="width:100%"><colgroup><col style="width:10%"><col style="width:50%"><col style="width:10%"><col style="width:30%"></colgroup><thead><tr><th class="tableblock halign-left valign-top" style="background-color:;">Layer Type Identifier</th><th class="tableblock halign-left valign-top" style="background-color:;">Annotation Layer Description</th><th class="tableblock halign-left valign-top" style="background-color:;">Syntax</th><th class="tableblock halign-left valign-top" style="background-color:;">Examples (without quotes)</th></tr><tbody><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>text</code></p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Textual representation of resource, also the layer that is used in Basic Search</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">String</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">"Dog", "cat" "walking", "better"</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>lemma</code></p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Lemmatisation</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">String</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">"good", "walk", "dog"</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>pos</code></p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Part-of-Speech annotations</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><a href="#ref:UD-POS">Universal POS</a> tags</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">"NOUN", "VERB", "ADJ"</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>orth</code></p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Orthographic transcription of (mostly) spoken resources</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">String</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">"dug", "cat", "wolking"</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>norm</code></p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Orthographic normalization of (mostly) spoken resources</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">String</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">"dog", "cat", "walking", "best"</p></td></tr><tr><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>phonetic</code></p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Phonetic transcription</p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><a href="#ref:SAMPA">SAMPA</a></p></td><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">"'du:", "'vi:-d6 'ha:-b@n"</p></td></tr></table>
<div class="openblock refs xx-small"><div class="content"><div class="ulist"><ul><li><p><a></a>Universal Dependencies, <a href="https://universaldependencies.github.io/u/pos/index.html">Universal POS tags v2.0</a></p></li><li><p><a></a>Dafydd Gibbon, Inge Mertins, Roger Moore (Eds.): Handbook of Multimodal and Spoken Language Systems. Resources, Terminology and Product Evaluation, Kluwer Academic Publishers, Boston MA, 2000, ISBN 0-7923-7904-7</p></li></ul></div></div></div></div></section><section id="_fcs_ql_layer_type_identifier"><h2>FCS-QL – Layer Type Identifier</h2><div class="slide-content"><div class="ulist"><ul><li><p>identifiziert Layer für <em>FCS-QL</em> und <em>Advanced Data View</em></p></li><li><p>Weitere Identifier sind <em>nicht</em> erlaubt, außer für Testzwecke</p></li><li><p>Custom Identifier müssen mit “<code>x-</code>” beginnen</p></li></ul></div></div></section><section id="_ergebnis_serialisierung"><h2>Ergebnis-Serialisierung</h2><div class="slide-content"><div class="ulist"><ul><li><p>Ergebnisse müssen im CLARIN FCS Format serialisiert werden</p><div class="ulist"><ul><li><p>Resource (Fragment), Data View</p></li><li><p>XML → <a href="https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/attachments/Resource.xsd">XSD</a></p></li></ul></div></li><li><p>Wichtig: <strong>1 Treffer = 1 Result Record</strong></p><div class="ulist"><ul><li><p>keine Kombination mehrerer Treffer in einem Record</p><div class="paragraph"><p>→ für jeden Treffer eigene SRU Records generieren, die die selbe Ressource referenzieren</p></div></li><li><p>mehrere Hit-Marker sind erlaubt, z.B. bei Booleans um einzelne Terme zu highlighten</p></li><li><p>Jeder “Hit” (Treffer) sollte in einem Satzkontext definiert sein</p></li></ul></div></li></ul></div></div></section><section id="_ergebnis_serialisierung_cont" class="left x-small"><h2>Ergebnis-Serialisierung (Cont.)</h2><div class="slide-content"><div class="paragraph"><p><strong>Resource</strong></p></div>
<div class="ulist"><ul><li><p>“<strong>searchable</strong> and <strong>addressable</strong> entity” im Endpunkt, z.B. Textkorpus</p></li><li><p>eigenständige (“self contained”), d.h. ganzes Dokument, kein einzelner Satz aus einem Dokument</p></li><li><p>Adressierbar als Ganzes über <em>Persistent Identifier</em> oder <em>unique URI</em></p></li></ul></div>
<div class="paragraph"><p><strong>Resource Fragment</strong></p></div>
<div class="ulist"><ul><li><p>Teil einer <em>Resource</em>, z.B. einzelner Satz, oder Zeitintervall in Audio-Transkription (bei Multi-Modalen Korpora)</p></li><li><p>sollte adressierbar sein, innerhalb einer <em>Resource</em> (Offset / ID)</p></li><li><p>Nutzung optional, aber empfohlen</p></li></ul></div>
<div class="paragraph"><p><strong>Data View</strong></p></div>
<div class="ulist"><ul><li><p>Serialisierung eines “Hits” (Treffers) in <em>Resource (Fragment)</em></p></li><li><p>ermöglicht verschieden Darstellungen, erweiterbar</p></li></ul></div></div></section><section id="_ergebnis_serialisierung_linking"><h2>Ergebnis-Serialisierung – Linking</h2><div class="slide-content"><div class="ulist"><ul><li><p>Endpunkte sollten Link zur <em>Resource (Fragment)</em> bereitstellen</p><div class="ulist"><ul><li><p>persistent identifier (PID) / einzigartige URI</p></li><li><p>falls kein direktes Linking möglich, dann z.B. Webseite mit Beschreibung des Korpus / der Sammlung</p></li><li><p>Link sollte so spezifisch wie möglich sein</p></li><li><p>PIDs vor URIs, beides empfohlen</p></li></ul></div></li></ul></div></div></section><section id="_ergebnis_serialisierung_beispiele"><h2>Ergebnis-Serialisierung – Beispiele</h2><div class="slide-content"><div class="listingblock"><div class="title">HITS Data View für eine Ressource mit PID</div><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-noescape="true" data-lang="xml">&lt;fcs:Resource xmlns:fcs="http://clarin.eu/fcs/resource" pid="http://hdl.handle.net/4711/00-15"&gt;
  &lt;fcs:DataView type="application/x-clarin-fcs-hits+xml"&gt;
    &lt;!-- data view payload omitted --&gt;
  &lt;/fcs:DataView&gt;
&lt;/fcs:Resource&gt;</code></pre></div></div>
<div class="listingblock"><div class="title">HITS Data View für eine Resource mit <em>Resource Fragment</em> für genauere Strukturierung</div><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-noescape="true" data-line-numbers="2,6" data-lang="xml">&lt;fcs:Resource xmlns:fcs="http://clarin.eu/fcs/resource" pid="http://hdl.handle.net/4711/08-15"&gt;
  &lt;fcs:ResourceFragment&gt;
    &lt;fcs:DataView type="application/x-clarin-fcs-hits+xml"&gt;
      &lt;!-- data view payload omitted --&gt;
    &lt;/fcs:DataView&gt;
  &lt;/fcs:ResourceFragment&gt;
&lt;/fcs:Resource&gt;</code></pre></div></div></div></section><section id="_ergebnis_serialisierung_beispiele_2" class="left"><h2>Ergebnis-Serialisierung – Beispiele (2)</h2><div class="slide-content"><div class="listingblock"><div class="title">Nutzung von CMDI Data View für Ressourcen-Metadaten neben HITS Ergebnis</div><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-noescape="true" data-line-numbers="4,5,6,7,8,10,11,12,13,14,15" data-lang="xml">&lt;fcs:Resource xmlns:fcs="http://clarin.eu/fcs/resource"
              pid="http://hdl.handle.net/4711/08-15"
              ref="http://repos.example.org/file/text_08_15.html"&gt;
  &lt;fcs:DataView type="application/x-cmdi+xml" <i class="conum" data-value="1"></i><b>(1)</b>
                pid="http://hdl.handle.net/4711/08-15-1"
                ref="http://repos.example.org/file/08_15_1.cmdi"&gt;
      &lt;!-- data view payload omitted --&gt;
  &lt;/fcs:DataView&gt;

  &lt;fcs:ResourceFragment pid="http://hdl.handle.net/4711/08-15-2" <i class="conum" data-value="2"></i><b>(2)</b>
                        ref="http://repos.example.org/file/text_08_15.html#sentence2"&gt;
    &lt;fcs:DataView type="application/x-clarin-fcs-hits+xml"&gt;
      &lt;!-- data view payload omitted --&gt;
    &lt;/fcs:DataView&gt;
  &lt;/fcs:ResourceFragment&gt;
&lt;/fcs:Resource&gt;</code></pre></div></div>
<div class="colist arabic"><table><tr><td><i class="conum" data-value="1"></i><b>1</b></td><td>Angabe von CMDI-Metadaten zur Ressource</td></tr><tr><td><i class="conum" data-value="2"></i><b>2</b></td><td>Treffer ist Teil einer größeren Ressource “semantisch aussagekräftiger”</td></tr></table></div></div></section><section id="_data_views"><h2>Data Views</h2><div class="slide-content"><div class="ulist"><ul><li><p>Spezifikation (mit XSD-Schema, Beispielen)</p><div class="ulist"><ul><li><p>Data Views 1.0 (<a href="https://office.clarin.eu/v/CE-2014-0317-CLARIN_FCS_Specification_DataViews_1_0-v20170613.pdf">pdf</a>, <a href="https://github.com/clarin-eric/fcs-misc/tree/main/fcs-dataviews-1.0">repo</a>)</p></li><li><p>FCS Core 2.0 (<a href="https://office.clarin.eu/v/CE-2017-1046-FCS-Specification-v20230426.pdf">pdf</a>, <a href="https://github.com/clarin-eric/fcs-misc/tree/main/fcs-core-2.0">repo</a>) (primär)</p></li></ul></div></li><li><p>Spezifiziert in FCS Core 2.0</p><div class="ulist"><ul><li><p>Advanced (ADV) Data View</p></li><li><p>Generic Hits (HITS) Data View</p></li></ul></div></li><li><p>Weitere Data Views wie <em>Component Metadata (CMDI)</em>, <em>Images (IMG)</em>, <em>Geolocation (GEO)</em> beschreiben, aber nicht im Standard Client “Aggregator” ausgewertet</p></li></ul></div></div></section><section id="_data_views_2"><h2>Data Views (2)</h2><div class="slide-content"><div class="ulist"><ul><li><p>Sende-Pflicht “<code>send-by-default</code>”</p><div class="paragraph"><p>oder Wunsch “<code>need-to-request</code>”</p></div></li><li><p>Generic Hits Data View ist Pflicht, muss immer gesendet werden</p></li><li><p>nur Data Views senden, die</p><div class="ulist"><ul><li><p>mit (SRU) FCS Parameter “<code>x-fcs-dataviews</code>” angefordert, oder</p></li><li><p>Delivery-Policy “<code>send-by-default</code>” besitzen</p></li></ul></div></li><li><p>ungültige Data Views → non-fatal Diagnostic für jede angefragte Data View</p><div class="paragraph"><p><code>http://clarin.eu/fcs/diagnostic/4</code></p></div>
<div class="paragraph"><p>("Requested Data View not valid for this resource")</p></div></li></ul></div></div></section><section id="_hits_data_view" class="columns"><h2>Hits Data View</h2><div class="slide-content"><div class="openblock column"><div class="content"><table class="tableblock frame-all grid-all x-small" style="width:100%"><colgroup><col style="width:33.3333%"><col style="width:66.6667%"></colgroup><tbody><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">Beschreibung</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Representation eines Hits</p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">MIME type</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>application/x-clarin-fcs-hits+xml</code></p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">Payload Disposition</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><em>inline</em></p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">Payload Delivery</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><em>send-by-default</em> (<code>REQUIRED</code>)</p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">Recommended Short Identifier</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>hits</code> (<code>RECOMMENDED</code>)</p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">XML Schema</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><a href="https://office.clarin.eu/v/attachments/DataView-Hits.xsd">DataView-Hits.xsd</a></p></td></tr></table></div></div>
<div class="openblock column small ms-5"><div class="content"><div class="ulist"><ul><li><p>Implementierungspflicht</p></li><li><p>Einfachste Serialisierung, (verlustbehaftete) Approximation von Ergebnissen</p></li><li><p>Jeder Treffer (Hit) sollte nur in einzelnen Satzkontext (o.Ä.) auftreten</p></li><li><p>Mehrere Hit-Annotationen möglich, z.B. bei Konjunktionen im Query</p></li></ul></div></div></div></div></section><section id="_hits_data_view_beispiele"><h2>Hits Data View – Beispiele</h2><div class="slide-content"><div class="listingblock"><div class="title">HITS Data View mit einem Hit-Marker</div><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-noescape="true" data-line-numbers="2,6" data-lang="xml">&lt;!-- potential @pid and @ref attributes omitted --&gt;
&lt;fcs:DataView type="application/x-clarin-fcs-hits+xml"&gt;
  &lt;hits:Result xmlns:hits="http://clarin.eu/fcs/dataview/hits"&gt;
    The quick brown &lt;hits:Hit&gt;fox&lt;/hits:Hit&gt; jumps over the lazy dog.
  &lt;/hits:Result&gt;
&lt;/fcs:DataView&gt;</code></pre></div></div>
<div class="listingblock"><div class="title">HITS Data View mit mehreren Hit-Markern für Boolean-Queries</div><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-noescape="true" data-line-numbers="3" data-lang="xml">&lt;!-- potential @pid and @ref attributes omitted --&gt;
&lt;fcs:DataView type="application/x-clarin-fcs-hits+xml"&gt;
  &lt;hits:Result xmlns:hits="http://clarin.eu/fcs/dataview/hits"&gt;
    The quick brown &lt;hits:Hit&gt;fox&lt;/hits:Hit&gt; jumps over the lazy &lt;hits:Hit&gt;dog&lt;/hits:Hit&gt;.
  &lt;/hits:Result&gt;
&lt;/fcs:DataView&gt;</code></pre></div></div></div></section><section id="_kwic_data_view" class="columns"><h2>Kwic Data View</h2><div class="slide-content"><div class="openblock column"><div class="content"><table class="tableblock frame-all grid-all x-small" style="width:100%"><colgroup><col style="width:33.3333%"><col style="width:66.6667%"></colgroup><tbody><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">Beschreibung</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Representation eines Hits</p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">MIME type</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>application/x-clarin-fcs-kwic+xml</code></p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">Payload Disposition</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><em>inline</em></p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">Payload Delivery</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><em>send-by-default</em> (<code>REQUIRED</code>)</p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">Recommended Short Identifier</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>kwic</code> (<code>RECOMMENDED</code>)</p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">XML Schema</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">-</p></td></tr></table></div></div>
<div class="openblock column small ms-5"><div class="content"><div class="ulist"><ul><li><p><strong>Deprecated!</strong></p></li><li><p>Zur Kompatibilität mit <em>Legacy FCS Clienten</em> evtl.</p></li><li><p>Beispiel in <a href="https://github.com/clarin-eric/fcs-sru-cqi-bridge/blob/9bcbe0f3297bde3f578b7eb6403d248571ac6bc2/src/main/java/eu/clarin/sru/cqibridge/CqiSRUSearchResultSet.java#L136-L144">CQP/SRU bridge</a></p></li><li><p>Abbildung von</p><div class="ulist"><ul><li><p>linken und rechten Kontext</p></li><li><p>Treffer</p></li></ul></div></li></ul></div>
<div class="ulist"><ul><li><p>Serialisierer <a href="https://github.com/clarin-eric/fcs-simple-endpoint/blob/main/src/main/java/eu/clarin/sru/server/fcs/XMLStreamWriterHelper.java#L235">Java</a>, <a href="https://github.com/Querela/fcs-simple-endpoint-python/blob/1.0.4/src/clarin/sru/fcs/xml/writer.py#L146">Python</a></p></li><li><p>Aggregator: Transformation zu Hits Data View!</p></li></ul></div></div></div></div></section><section id="_advanced_data_view" class="columns"><h2>Advanced Data View</h2><div class="slide-content"><div class="openblock column"><div class="content"><table class="tableblock frame-all grid-all x-small" style="width:100%"><colgroup><col style="width:33.3333%"><col style="width:66.6667%"></colgroup><tbody><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">Beschreibung</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock">Representation eines Hits für die Advanced Search</p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">MIME type</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>application/x-clarin-fcs-adv+xml</code></p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">Payload Disposition</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><em>inline</em></p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">Payload Delivery</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><em>send-by-default</em> (<code>REQUIRED</code>)</p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">Recommended Short Identifier</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><code>adv</code> (<code>RECOMMENDED</code>)</p></td></tr><tr><th class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock header">XML Schema</p></th><td class="tableblock halign-left valign-top" style="background-color:;"><p class="tableblock"><a href="https://office.clarin.eu/v/attachments/DataView-Advanced.xsd">DataView-Advanced.xsd</a></p></td></tr></table></div></div>
<div class="openblock column small ms-5"><div class="content"><div class="ulist"><ul><li><p>Serialisierung für die <em>Advanced Search</em> für multimediale Daten (Text, transkribiertes Audio)</p></li><li><p>Darstellung strukturierter Informationen über mehrere Annotationslayer</p></li><li><p>Annotationen sind Datenströme (Ranges) über dem Signal (Anfang + Ende)</p></li><li><p>Segmentierung über <code>&lt;Segment&gt;</code>, Annotationen in <code>&lt;Span&gt;</code> in <code>&lt;Layer&gt;</code></p><div class="ulist"><ul><li><p>Segmente müssen über alle Layer übereinstimmen</p></li></ul></div></li></ul></div></div></div></div></section><section id="_advanced_data_view_beispiel"><h2>Advanced Data View – Beispiel</h2><div class="slide-content"><div class="imageblock"><img src="images/adv-db-stream-example.png" alt="Advanced Data View - Stream Data"></div></div></section><section id="_advanced_data_view_beispiel_2"><h2>Advanced Data View – Beispiel (2)</h2><div class="slide-content"><div class="imageblock"><img src="images/adv-dv-example-relation.png" alt="Advanced Data View - Relation"></div></div></section><section id="_advanced_data_view_darstellung"><h2>Advanced Data View – Darstellung</h2><div class="slide-content"><div class="imageblock"><img src="images/adv-dv-visualization.png" alt="Advanced Data View - Visualization in Aggregator"></div>
<div class="openblock refs xx-small"><div class="content"><div class="paragraph"><p><a href="https://contentsearch.clarin.eu/?&amp;queryType=fcs&amp;query=%5B%20word%20%3D%20%22her.*%22%20%5D%20%5B%20lemma%20%3D%20%22Artznei%22%20%5D%20%5B%20pos%20%3D%20%22VERB%22%20%5D" class="bare">https://contentsearch.clarin.eu/?&amp;queryType=fcs&amp;query=%5B%20word%20%3D%20%22her.*%22%20%5D%20%5B%20lemma%20%3D%20%22Artznei%22%20%5D%20%5B%20pos%20%3D%20%22VERB%22%20%5D</a></p></div></div></div></div></section><section id="_beispiele" class="left small"><h2>Beispiele</h2><div class="slide-content"><div class="paragraph"><p>→ siehe <a href="#_searchretrieve_2_0_query_examples">weitere Beispiele</a> (<code>searchRetrieve</code> Query)<br>
Endpunkt: <a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru" class="bare">https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru</a></p></div>
<div class="ulist"><ul><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?operation=searchRetrieve&amp;queryType=fcs&amp;query=%5bword%3d%22anv%C3%A4ndning%22%5d">…?operation=searchRetrieve&<strong>queryType=fcs</strong>&query=<strong>%5bword%3d%22anv%C3%A4ndning%22%5d</strong></a></p><div class="paragraph"><p>→ FCS 2.0, FCS-QL: <code class="green">[ word = "användning" ]</code>, HITS + ADV</p></div></li><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?operation=searchRetrieve&amp;queryType=cql&amp;query=%22anv%C3%A4ndning%22">…?operation=searchRetrieve&<strong>queryType=cql</strong>&query=<strong>%22anv%C3%A4ndning%22</strong></a></p><div class="paragraph"><p>→ FCS 2.0, CQL: <code class="green">"användning"</code>, HITS</p></div></li><li><p><a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?operation=searchRetrieve&amp;version=1.2&amp;query=cat">…?operation=searchRetrieve&version=1.2&query=cat</a> ↔ <a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru?query=cat">…?query=cat</a> → HITS</p><div class="ulist"><ul><li><p>FCS 1.0, <code class="grey">sru="http://www.loc.gov/zing/srw/"</code></p></li><li><p>FCS 2.0, <code class="grey">sruResponse="http://docs.oasis-open.org/ns/search-ws/sruResponse"</code></p></li></ul></div></li><li><p>weitere Parameter: <code>x-indent-response=1</code> / <code>x-fcs-dataviews=cmdi</code> / <code>x-fcs-context=11022/0000-0000-20DF-1</code></p></li></ul></div>
<div style="page-break-after: always;"></div></div></section></section>
<section><section id="_query_translation" data-background-image="images/textplus-fcs.002.png" data-background-opacity="0.5"><h2>Query Translation</h2><div class="slide-content"><aside class="notes"><div class="ulist"><ul><li><p>Anfragesprachen, Visualisierung</p></li><li><p>FCS-QL Details</p></li><li><p>Query Mapping</p></li></ul></div></aside></div></section><section id="_anfragesprachen" class="small"><h2>Anfragesprachen</h2><div class="slide-content"><div class="imageblock position-absolute right--20 zindex--1"><img src="images/cql-js-screenshot.png" alt="CQL-JS Demo"></div>
<div class="ulist"><ul><li><p>Generell Ressourcen in <a href="https://github.com/clarin-eric/awesome-fcs#query-parsers">Awesome FCS List &gt; Query Parsers</a></p></li><li><p><strong>CQL</strong> (Contextual Query Language)</p><div class="ulist"><ul><li><p>BNF-Grammar: www.loc.gov/standards/sru/cql/spec.html#bnf</p></li><li><p>handgeschriebene <a href="https://github.com/clarin-eric/awesome-fcs#cql-contextual-query-language">Parser-Implementierungen</a> in Java, Python, JS, …</p></li><li><p>Dokumentation: <a href="http://zing.z3950.org/cql/java/docs/index.html">Java</a></p></li><li><p>Visualisierung in <a href="https://github.com/Querela/cql-js">Demo von JS-Parser</a></p><div class="ulist"><ul><li><p>Validierung für <a href="https://gitlab.gwdg.de/textplus/ag-fcs-lex-fcs-cql-js">Text+ LexCQL</a></p></li></ul></div></li></ul></div></li><li><p><strong>FCS-QL</strong> (Federated Content Search Query Language)</p><div class="ulist"><ul><li><p>EBNF-Grammar: <a href="https://github.com/clarin-eric/fcs-misc/blob/main/fcs-core-2.0/fcsql-grammar.ebnf">github.com/clarin-eric/fcs-misc</a> (FCS Core 2.0)</p></li><li><p><a href="https://github.com/clarin-eric/awesome-fcs#fcs-ql-federated-content-search-query-language">Parser-Implementierung</a> in <a href="https://github.com/clarin-eric/fcs-ql">Java</a>, <a href="https://github.com/Querela/fcs-ql-python">Python</a>,</p><div class="paragraph"><p>auf Basis von ANTRL4, geparst in eigene Wrapper (<a href="https://github.com/clarin-eric/fcs-simple-endpoint/tree/FCSSimpleEndpoint-1.6.0/src/main/java/eu/clarin/sru/server/fcs/parser">Java</a>, <a href="https://github.com/Querela/fcs-ql-python/blob/1.0.1/src/fcsql/parser.py">Python</a>)</p></div></li><li><p>Dokumentation: <a href="https://clarin-eric.github.io/fcs-simple-endpoint/apidocs/eu/clarin/sru/server/fcs/parser/package-summary.html">Java</a>, <a href="https://fcs-ql-python.readthedocs.io/en/latest/reference/fcsql.parser.html">Python</a></p></li><li><p>Grammar-Visualisierung mit ANTLR4 Tools</p></li></ul></div></li></ul></div></div></section><section id="_fcs_ql_visualisierung" class="left"><h2>FCS-QL – Visualisierung</h2><div class="slide-content"><div class="imageblock position-absolute right--20 width-50 zindex--1"><img src="images/fcsql-parse-tree-java.png" alt="FCS-QL Parsebaum"></div>
<div class="ulist"><ul><li><p>Installation</p><div class="listingblock code-width-full"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">pip install antlr4-tools
git clone https://github.com/clarin-eric/fcs-ql.git
cd fcs-ql/src/main/antlr4/eu/clarin/sru/fcs/qlparser</code></pre></div></div></li></ul></div>
<div class="ulist mt-5"><ul><li><p>Visualisierung nach <a href="https://github.com/antlr/antlr4/blob/master/doc/getting-started.md">ANTLR4 &gt; Getting Started</a></p><div class="listingblock code-width-full"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">antlr4-parse src/fcsql/FCSParser.g4 src/fcsql/FCSLexer.g4 query -gui
[ word = "her.*" ] [ lemma = "Artznei" ] [ pos = "VERB" ]
^D</code></pre></div></div></li></ul></div></div></section><section id="_fcs_ql_query_nodes" class="left small"><h2>FCS-QL Query Nodes</h2><div class="slide-content"><div class="paragraph"><p>QueryNode (mit Kind-Knoten “children”)</p></div>
<div class="ulist"><ul><li><p>Expression (layer identifier, layer identifier qualifier, operator, regular expression + flags)</p><div class="ulist"><ul><li><p><span class="darkgrey">Wildcard</span></p></li><li><p>Group → 1 QueryNode; “<code>(</code>” … “<code>)</code>”</p></li><li><p><span class="darkgrey">NOT → 1 QueryNode</span></p></li><li><p>AND, OR → Liste von QueryNodes</p></li></ul></div></li><li><p><span class="darkgrey">QueryDisjunction → Liste von QueryNodes</span></p></li><li><p>QuerySequence → Liste von QueryNodes → <span class="green">“Liste von QuerySegmenten”</span></p></li><li><p>QuerySegment (min, max) → Expression → <span class="green">“ein Token”</span></p></li><li><p><span class="darkgrey">QueryGroup (min, max) → QueryNode</span></p></li><li><p><span class="darkgrey">Within-Query (SimpleWithin, QueryWithWithin) (Scope: sentence, utterance, paragraph, turn, text, session)</span> <span class="green"><em>(ungenutzt)</em></span></p></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p>ausgegraut: wird aktuell vom FCS Aggregator zur Suche nicht unterstützt</p></li></ul></div></aside></div></section><section id="_fcs_ql_query_nodes_aggregator" class="left small"><h2>FCS-QL Query Nodes – Aggregator</h2><div class="slide-content"><div class="imageblock position-absolute width-50 right--20 opacity-50 zindex--1"><img src="images/fcsql-querybuilder-complex.png" alt="FCS-QL Query Builder"></div>
<div class="paragraph"><p>Geparster Query:</p></div>
<div class="ulist"><ul><li><p><strong>Query Sequence</strong> → <span class="green">mit Liste von <em>Query Segment</em></span></p><div class="exampleblock darkgrey"><div class="content"><div class="paragraph"><p>[ word = ".*her" ] [ lemma = "Artznei" ] [ pos = "VERB" ]</p></div></div></div></li><li><p><strong>Query Segment</strong> → <span class="green">ein Token (kann sich wiederholen)</span></p><div class="exampleblock darkgrey"><div class="content"><div class="paragraph"><p>[ word = "her.*" &amp; ( word = "test" | word = "Apfel" ) ]
[ pos = "ADV" ]{1,3}</p></div></div></div>
<div class="openblock"><div class="content"><div class="ulist"><ul><li><p><strong>Expression AND</strong></p><div class="exampleblock darkgrey"><div class="content"><div class="paragraph"><p>[ word = "her.*" &amp; word = "test" ]</p></div></div></div>
<div class="ulist"><ul><li><p>Expression Group</p></li><li><p>Expression</p></li></ul></div></li><li><p><strong>Expression Group</strong> → <strong>Expression OR</strong> → <span class="green">Liste von <em>Expression</em></span></p><div class="exampleblock darkgrey"><div class="content"><div class="paragraph"><p>[ ( word = "her.*" | word = "Test" ) ]</p></div></div></div></li><li><p><strong>Expression</strong> → <span class="green"><strong>Layer Identifier</strong>, <strong>Operator</strong>, <strong>Regex</strong> (Wert)</span></p><div class="exampleblock darkgrey"><div class="content"><div class="paragraph"><p>[ word = "her.*" ]</p></div></div></div></li></ul></div></div></div></li></ul></div></div></section><section id="_fcs_ql_bemerkungen"><h2>FCS-QL – Bemerkungen</h2><div class="slide-content"><div class="ulist"><ul><li><p>aktuell (<em>Aggregator v3.7.1</em>) nur <em>begrenzte</em> Unterstützung von FCS-QL Features bei Anfrage</p><div class="paragraph"><p>→ bedingt durch Visual Query Builder</p></div></li><li><p>zukünftig Freitext bzw. verbesserter Query Builder geplant</p></li><li><p>bei nicht-Unterstützung von Query Features entsprechende Diagnostics nutzen</p><div class="ulist"><ul><li><p>SRU: <code>\info:srw/diagnostic/1/48</code> - <span class="green">Query feature unsupported.</span></p></li><li><p><span class="line-through">FCS: <code>http://clarin.eu/fcs/diagnostic/10</code> - <span class="green">General query syntax error.</span></span> - sollte durch FCS-QL Parser-Bibliothek abgefangen werden</p></li><li><p>FCS: <code>http://clarin.eu/fcs/diagnostic/11</code> - <span class="green">Query too complex. Cannot perform Query.</span></p></li></ul></div></li></ul></div></div></section><section id="_query_mapping" class="small"><h2>Query-Mapping</h2><div class="slide-content"><div class="ulist"><ul><li><p>Idee:</p><div class="ulist"><ul><li><p>Raw Query (CQL, FCS-QL) von Bibliotheken lassen</p></li><li><p>Rekursiv durch den geparsten Query-Baum gehen, “depth first”</p></li><li><p>sukzessiv transformierten Query (für Zielsystem) generieren,</p><div class="paragraph"><p>z.B. StringBuilder in Java</p></div></li></ul></div></li><li><p>Beispiele:</p><div class="ulist"><ul><li><p><a href="https://www.kielipankki.fi/support/korp-advanced/">Korp</a>: CQL → CQP (<a href="https://github.com/clarin-eric/fcs-korp-endpoint/blob/ffccf7f65cc55744e1b1a8cebacce5485c530bda/src/main/java/se/gu/spraakbanken/fcs/endpoint/korp/cqp/FCSToCQPConverter.java#L50-L112">Java</a>, <a href="https://github.com/Querela/fcs-korp-endpoint-python/blob/5ee448d2369e450571a6d82d3e379154752a3397/src/korp_endpoint/query_converter.py#L26-L67">Python</a>), FCS-QL → CQP (<a href="https://github.com/clarin-eric/fcs-korp-endpoint/blob/ffccf7f65cc55744e1b1a8cebacce5485c530bda/src/main/java/se/gu/spraakbanken/fcs/endpoint/korp/cqp/FCSToCQPConverter.java#L114-L332">Java</a>, <a href="https://github.com/Querela/fcs-korp-endpoint-python/blob/5ee448d2369e450571a6d82d3e379154752a3397/src/korp_endpoint/query_converter.py#L73-L210">Python</a>)</p></li><li><p><a href="https://www.sketchengine.eu/documentation/corpus-querying/">NoSketchEngine</a>: CQL → CQL (<a href="https://github.com/Leipzig-Corpora-Collection/fcs-noske-endpoint/blob/main/src/main/java/de/saw_leipzig/textplus/webservices/fcs/fcs_noske_endpoint/query/CQLtoNoSkECQLConverter.java">Java</a>), FCS-QL → CQL (<a href="https://github.com/Leipzig-Corpora-Collection/fcs-noske-endpoint/blob/main/src/main/java/de/saw_leipzig/textplus/webservices/fcs/fcs_noske_endpoint/query/FCSQLtoNoSkECQLConverter.java">Java</a>)</p></li><li><p><a href="https://solr.apache.org/guide/solr/latest/query-guide/standard-query-parser.html">Solr</a>: CQL → Solr (<a href="https://gist.github.com/Querela/825a084f94b30de88827050eddc8e361#file-cqltosolrconverter-java">Java</a>), LexCQL → Solr (<a href="https://gist.github.com/Querela/825a084f94b30de88827050eddc8e361#file-lexcqltosolrconverter-java">Java</a>)</p><div class="ulist"><ul><li><p>SolrQuery mit <a href="https://solr.apache.org/guide/solr/latest/query-guide/highlighting.html">Highlighting</a>, Custom <a href="https://gist.github.com/Querela/825a084f94b30de88827050eddc8e361#file-searcher-java-L38-L44">Treffer-Präfixe/-Postfixe</a>, Übernahme von Solr-Ergebnis als vorformattierter Data View Inhalt (<a href="https://gist.github.com/Querela/825a084f94b30de88827050eddc8e361#file-sawsrusearchresultset-java-L137-L262">Code</a>)</p></li></ul></div></li><li><p>CQI Bridge: CQL → CQP (<a href="https://github.com/clarin-eric/fcs-sru-cqi-bridge/blob/9bcbe0f3297bde3f578b7eb6403d248571ac6bc2/src/main/java/eu/clarin/sru/cqibridge/CqiSRUSearchEngine.java#L228-L265">Java</a>)</p></li></ul></div></li></ul></div></div></section><section id="_query_mapping_2" class="small"><h2>Query-Mapping (2)</h2><div class="slide-content"><div class="ulist"><ul><li><p>ElasticSearch</p><div class="ulist"><ul><li><p>nur BASIC Search mit <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/full-text-queries.html">Fulltext Queries</a>, z.B. mit <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-simple-query-string-query.html">Simple Query String</a></p></li></ul></div></li><li><p>Solr</p><div class="ulist"><ul><li><p>nur BASIC Search</p></li><li><p>ADVANCED Search mit z.B. <a href="https://meertensinstituut.github.io/mtas/index.html">MTAS</a> (“Multi Tier Annotation Search”)</p></li></ul></div></li><li><p>Generell: für ADVANCED Search sollte konkrete <strong>Corpus Search Engine</strong> genutzt werden</p><div class="paragraph"><p>→ oder es kann <em>maximal</em> ein Annotationslayer (“Text”) durchsucht werden</p></div></li></ul></div>
<div style="page-break-after: always;"></div></div></section></section>
<section><section id="_endpunkt_entwicklung" data-background-image="images/textplus-fcs.002.png" data-background-opacity="0.5"><h2>Endpunkt-Entwicklung</h2><div class="slide-content"><aside class="notes"><div class="ulist"><ul><li><p>VSCode Einstellungen, Projekt Kickstart</p></li><li><p>Minimaler FCS Endpunkt, Anbindung Suchmaschine, Ergebnis-Serialisierung</p></li><li><p>Deployment, Embedded, Erweiterbarkeit</p></li></ul></div></aside></div></section><section id="_visual_studio_code_vorschlag" class="small"><h2>Visual Studio Code (Vorschlag)</h2><div class="slide-content"><div class="imageblock position-absolute right--10 width-20 zindex--1"><img src="images/vscode-logo.png" alt="CQL-JS Demo"></div>
<div class="ulist"><ul><li><p>Download &amp; Installation: <a href="https://code.visualstudio.com/">code.visualstudio.com</a></p></li><li><p>Extensions:</p><div class="ulist"><ul><li><p><strong>Java</strong></p><div class="ulist"><ul><li><p><a href="https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack">vscjava.vscode-java-pack</a></p></li><li><p><a href="https://marketplace.visualstudio.com/items?itemName=redhat.vscode-xml">redhat.vscode-xml</a> (optional)</p></li></ul></div></li><li><p><strong>Python</strong></p><div class="ulist"><ul><li><p><a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">ms-python.python</a></p></li><li><p><a href="https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-pylance">ms-python.vscode-pylance</a>, <a href="https://marketplace.visualstudio.com/items?itemName=ms-python.black-formatter">ms-python.black-formatter</a> (optional)</p></li></ul></div></li><li><p><strong>Quality of Life</strong></p><div class="ulist"><ul><li><p><a href="https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens">eamodio.gitlens</a></p></li><li><p><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack">ms-vscode-remote.vscode-remote-extensionpack</a>, <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.remote-explorer">ms-vscode.remote-explorer</a> (für WSL oder über SSH)</p></li></ul></div></li></ul></div></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p>QoL = Quality of Life</p></li></ul></div></aside></div></section><section id="_visual_studio_code_debugging_java"><h2>Visual Studio Code – Debugging (Java)</h2><div class="slide-content"><div class="ulist"><ul><li><p>für <code>*.war</code>/Jetty Web-Application Testing</p></li><li><p>kein Hot-Code Reloading / keine Änderungen zwischen Kompilierung und Debugging vornehmen!</p></li><li><p>VSCode Debug Setting:</p><div class="ulist"><ul><li><p><em>Run and Debug &gt; Add Configuration … &gt; “Java: Attach by Process ID”</em></p></li></ul></div></li><li><p>Mit Maven Anwendung ausführen:</p><div class="listingblock code-width-full"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">MAVEN_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -agentlib:jdwp=transport=dt_socket,server=y,address=5005" \
    mvn [jetty:run-war|...]</code></pre></div></div></li></ul></div></div></section><section id="_visual_studio_code_debugging_python" class="columns"><h2>Visual Studio Code – Debugging (Python)</h2><div class="slide-content"><div class="openblock column"><div class="content"><div class="ulist"><ul><li><p><code>launch.json</code></p><div class="ulist"><ul><li><p><strong>pytest</strong>: im “Run and Debug” Menü keine vorgeschlagene Konfiguration</p></li><li><p>file/module: nach Gebrauch</p></li></ul></div></li><li><p><code>settings.json</code></p><div class="ulist"><ul><li><p><strong>pytest</strong>: coverage muss hier deaktiviert werden!</p></li></ul></div></li></ul></div></div></div>
<div class="openblock column"><div class="content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-json hljs" data-noescape="true" data-lang="json">{
    "name": "Python: pytest",
    "type": "python",
    "request": "launch",
    "console": "integratedTerminal",
    "purpose": [
        "debug-test"
    ],
    "justMyCode": false
}</code></pre></div></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-json hljs" data-noescape="true" data-lang="json">"python.testing.pytestArgs": [
    ".",
    // disable coverage for debugging
    "--no-cov",
    // disable ansi color output (-vv)
    "-q",
],</code></pre></div></div></div></div></div></section><section id="_endpunkt_projekt_kickstart"><h2>Endpunkt Projekt Kickstart</h2><div class="slide-content"><div class="ulist"><ul><li><p>siehe <a href="#_wegweiser_endpunktentwicklung">Wegweiser zur Endpunktimplementierung</a></p><div class="paragraph"><p>→ Nutzung von Referenz-Endpunktimplementierungen</p></div></li></ul></div>
<div class="ulist mt-4"><ul><li><p>Nutzung des Korp-Endpunktes</p><div class="ulist"><ul><li><p>Java: <a href="https://github.com/clarin-eric/fcs-korp-endpoint">github.com/clarin-eric/fcs-korp-endpoint</a></p></li><li><p>Python: <a href="https://github.com/Querela/fcs-korp-endpoint-python/">github.com/Querela/fcs-korp-endpoint-python</a></p></li><li><p>Java: <a href="https://github.com/clarin-eric/fcs-sru-cqi-bridge">github.com/clarin-eric/fcs-sru-cqi-bridge</a> (CQP/SRU bridge)</p></li></ul></div></li><li><p>Java: Projektgenerierung mit maven</p><div class="ulist"><ul><li><p>Projekt Template: <a href="https://github.com/clarin-eric/fcs-endpoint-archetype">github.com/clarin-eric/fcs-endpoint-archetype</a></p></li></ul></div></li></ul></div></div></section><section id="_clarin_srufcs_endpoint_archetype" class="left"><h2>CLARIN SRU/FCS Endpoint Archetype</h2><div class="slide-content"><div class="ulist"><ul><li><p>Installation des Archetypes in lokales Maven Repository, oder</p></li><li><p>Konfiguration des CLARIN Nexus als Remote Repository</p></li><li><p>Projekt Generierung mit Maven:</p></li></ul></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">mvn archetype:generate \
    -DarchetypeGroupId=eu.clarin.sru.fcs \
    -DarchetypeArtifactId=fcs-endpoint-archetype \
    -DarchetypeVersion=1.6.0 \
    -DgroupId=[ id.group.fcs ] \
    -DartifactId=[ my-cool-endpoint ] \
    -Dversion=[ 1.0-SNAPSHOT ] \
    -DinstitutionName=[ "My Institution" ]</code></pre></div></div>
<div class="openblock x-small darkgrey ms-6"><div class="content"><div class="ulist"><ul><li><p><em>alle <code>[</code>&#8230;&#8203; <code>]</code> Platzhalter sind zu ersetzen mit den passenden Werten (bei Werten mit Leerzeichen mit Anführungszeichen umschließen)</em></p></li><li><p><em>wenn Archetype von Git installiert, dann <code>archetypeVersion=1.6.0-SNAPSHOT</code> nutzen (siehe Angabe in <a href="https://github.com/clarin-eric/fcs-endpoint-archetype/blob/main/pom.xml#L8"><code>pom.xml</code></a>)</em></p></li></ul></div></div></div></div></section><section id="_minimaler_fcs_endpunkt" class="small"><h2>Minimaler FCS Endpunkt</h2><div class="slide-content"><div class="ulist"><ul><li><p>Notwendige Klassenimplementierungen</p><div class="ulist"><ul><li><p><code>SimpleEndpointSearchEngineBase</code></p></li><li><p><code>SRUSearchResultSet</code></p></li><li><p><strong>Wrapper oder Adapter für Suchmaschine (!)</strong></p></li></ul></div></li><li><p>Erforderliche Konfigurationen</p><div class="ulist"><ul><li><p><code>sru-server-config.xml</code></p></li><li><p><code>endpoint-description.xml</code></p></li><li><p>WebApp-Konfigurationen</p><div class="paragraph"><p>(Java: <code>web.xml</code>, Python: Key-Value Parameter-Dict)</p></div>
<div class="ulist"><ul><li><p>Verweis auf Implementierung der <code>SimpleEndpointSearchEngineBase</code></p></li><li><p>Erforderliche SRU Parameter (<code>host</code>, <code>port</code>, <code>server</code>, …)</p></li></ul></div></li></ul></div></li></ul></div></div></section><section id="_minimaler_fcs_endpunkt_initialisierung" class="left x-small"><h2>Minimaler FCS Endpunkt – Initialisierung</h2><div class="slide-content"><div class="paragraph"><p>→ <strong><code>SimpleEndpointSearchEngineBase</code></strong> (<a href="https://github.com/clarin-eric/fcs-simple-endpoint/blob/main/src/main/java/eu/clarin/sru/server/fcs/SimpleEndpointSearchEngineBase.java">Java</a>, <a href="https://github.com/Querela/fcs-simple-endpoint-python/blob/1.0.4/src/clarin/sru/fcs/server/search.py#L507">Python</a>)</p></div>
<div class="paragraph mt-4"><p><code>void doInit (ServletContext context, SRUServerConfig config, SRUQueryParserRegistry.Builder queryParsersBuilder, Map&lt;String, String&gt; params)</code> - <a href="https://github.com/clarin-eric/fcs-simple-endpoint/blob/main/src/main/java/eu/clarin/sru/server/fcs/SimpleEndpointSearchEngineBase.java#L288">Java</a>, <a href="https://github.com/Querela/fcs-simple-endpoint-python/blob/1.0.4/src/clarin/sru/fcs/server/search.py#L722">Python</a></p></div>
<div class="ulist"><ul><li><p>Erforderliche Implementierung!</p></li><li><p>(mögliche) Initialisierung von APIs, Default-Werten (PIDs), …</p></li></ul></div>
<div class="paragraph mt-4"><p><code>EndpointDescription createEndpointDescription (ServletContext context, SRUServerConfig config, Map&lt;String, String&gt; params)</code> - <a href="https://github.com/clarin-eric/fcs-simple-endpoint/blob/main/src/main/java/eu/clarin/sru/server/fcs/SimpleEndpointSearchEngineBase.java#L265">Java</a>, <a href="https://github.com/Querela/fcs-simple-endpoint-python/blob/1.0.4/src/clarin/sru/fcs/server/search.py#L713">Python</a></p></div>
<div class="ulist"><ul><li><p>Erforderliche Implementierung!</p></li><li><p>Laden der <code>EndpointDescription</code> (<a href="https://github.com/clarin-eric/fcs-simple-endpoint/blob/main/src/main/java/eu/clarin/sru/server/fcs/utils/SimpleEndpointDescription.java">Java</a>, <a href="https://github.com/Querela/fcs-simple-endpoint-python/blob/1.0.4/src/clarin/sru/fcs/server/search.py#L430">Python</a>)</p><div class="ulist"><ul><li><p>eingebettete XML-Datei (mit dem <code>SimpleEndpointDescriptionParser</code>, <a href="https://github.com/clarin-eric/fcs-simple-endpoint/blob/main/src/main/java/eu/clarin/sru/server/fcs/utils/SimpleEndpointDescriptionParser.java">Java</a>, <a href="https://github.com/Querela/fcs-simple-endpoint-python/blob/1.0.4/src/clarin/sru/fcs/xml/reader.py#L38">Python</a>) oder</p></li><li><p>dynamische Konstruktion z.B. über API - Beispiel <a href="https://github.com/Leipzig-Corpora-Collection/fcs-noske-endpoint/blob/36fc8ae12131164a9cf00f4ed3648e9b47a1bd7d/src/main/java/de/saw_leipzig/textplus/webservices/fcs/fcs_noske_endpoint/NoSkESRUFCSEndpointSearchEngine.java#L355-L366">NoSketchEngine</a></p></li></ul></div></li></ul></div></div></section><section id="_minimaler_fcs_endpunkt_scanexplain" class="left"><h2>Minimaler FCS Endpunkt – Scan/Explain</h2><div class="slide-content"><div class="ulist"><ul><li><p>(theoretisch) nichts zu implementieren</p><div class="paragraph"><p>→ Default-Handler für “explain” und “scan” beantworten Anfragen hier automatisch</p></div></li><li><p>Endpoint Description wird im Zweifel als “explain”-Operation ausgeliefert</p></li></ul></div>
<div class="paragraph"><p>→ <code>SimpleEndpointSearchEngineBase</code> (<a href="https://github.com/clarin-eric/fcs-simple-endpoint/blob/main/src/main/java/eu/clarin/sru/server/fcs/SimpleEndpointSearchEngineBase.java">Java</a>, <a href="https://github.com/Querela/fcs-simple-endpoint-python/blob/1.0.4/src/clarin/sru/fcs/server/search.py#L507">Python</a>)</p></div></div></section><section id="_minimaler_fcs_endpunkt_suchanfrage" class="left x-small"><h2>Minimaler FCS Endpunkt – Suchanfrage</h2><div class="slide-content"><div class="paragraph"><p><code>SRUSearchResultSet search (SRUServerConfig config, SRURequest request, SRUDiagnosticList diagnostics)</code></p></div>
<div class="ulist"><ul><li><p>Parsen von Query (Suchanfrage)</p><div class="ulist"><ul><li><p>Check von “<code>queryType</code>”-Parameter, ob CQL, FCS-QL, …</p></li><li><p>Fehler: <code>SRU_CANNOT_PROCESS_QUERY_REASON_UNKNOWN</code></p></li></ul></div></li><li><p>Auswerten von ExtraRequestData</p><div class="ulist"><ul><li><p>“<code>x-fcs-context</code>” - angefragte Ressource</p><div class="ulist"><ul><li><p>Diagnostic: <code>FCS_DIAGNOSTIC_PERSISTENT_IDENTIFIER_INVALID</code> - invalide PIDs</p></li><li><p>Fehler: <code>SRU_UNSUPPORTED_PARAMETER_VALUE</code> - z.B. zu viele PIDs, keine PIDs</p></li></ul></div></li><li><p>“<code>x-fcs-dataviews</code>” - angefrage DataViews</p><div class="ulist"><ul><li><p>Diagnostic: <code>FCS_DIAGNOSTIC_PERSISTENT_IDENTIFIER_INVALID</code></p></li></ul></div></li></ul></div></li><li><p>Pagination → startRecord (1) / maximumRecords (-1)</p></li></ul></div>
<div class="ulist mt-3"><ul><li><p>Suche an lokale Suchmaschine</p></li><li><p>Wrappen von Ergebnissen in SRUSearchResultSet</p></li></ul></div>
<div class="ulist mt-3"><ul><li><p><span class="green"><em>“If in Doubt” → `SRU_GENERAL_SYSTEM_ERROR`</em></span></p></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p><a href="https://github.com/Leipzig-Corpora-Collection/fcs-noske-endpoint/blob/main/src/main/java/de/saw_leipzig/textplus/webservices/fcs/fcs_noske_endpoint/NoSkESRUFCSEndpointSearchEngine.java" class="bare">https://github.com/Leipzig-Corpora-Collection/fcs-noske-endpoint/blob/main/src/main/java/de/saw_leipzig/textplus/webservices/fcs/fcs_noske_endpoint/NoSkESRUFCSEndpointSearchEngine.java</a></p></li><li><p><a href="https://github.com/clarin-eric/fcs-korp-endpoint/blob/master/src/main/java/se/gu/spraakbanken/fcs/endpoint/korp/KorpEndpointSearchEngine.java" class="bare">https://github.com/clarin-eric/fcs-korp-endpoint/blob/master/src/main/java/se/gu/spraakbanken/fcs/endpoint/korp/KorpEndpointSearchEngine.java</a></p></li><li><p><a href="https://github.com/Querela/fcs-korp-endpoint-python/blob/main/src/korp_endpoint/endpoint.py" class="bare">https://github.com/Querela/fcs-korp-endpoint-python/blob/main/src/korp_endpoint/endpoint.py</a></p></li></ul></div></aside></div></section><section id="_anbindung_suchmaschine" class="small"><h2>Anbindung Suchmaschine</h2><div class="slide-content"><div class="ulist"><ul><li><p><strong>Eingabe</strong>: Parameter von Suchanfrage</p><div class="openblock"><div class="content"><div class="ulist"><ul><li><p>Query (übersetzt für Suchmaschine)</p></li><li><p>Ressource (PID)</p></li><li><p>Pagination: Offset + Anzahl, → <code>startRecord</code> (1) / <code>maximumRecords</code> (-1)</p></li></ul></div>
<div class="ulist mt-4"><ul><li><p><em>(Request-Objekt und Server Konfigurationen)</em></p></li><li><p><em>(alle globalen/statischen Objekte, wie API-Adapter usw.)</em></p></li></ul></div></div></div></li></ul></div>
<div class="ulist mt-4"><ul><li><p><strong>Ausgabe</strong>: Angaben für Antwort, Ergebnisse</p><div class="ulist"><ul><li><p>Gesamtanzahl (optional, FCS 2.0 erlaubt Angabe zu Genauigkeit)</p></li><li><p>Liste von Ergebnissen</p><div class="ulist"><ul><li><p>mit “Treffer-Highlighting” (Hits) (Basic + Advanced Search)</p></li><li><p>für FCS-QL (Advanced Search) tokenisiert (Begrenzungen durch Zeichenoffsets) mit optionalen Advanced Annotationslayern</p></li></ul></div></li><li><p>Diagnostics</p></li></ul></div></li></ul></div></div></section><section id="_anbindung_suchmaschine_2" class="small columns"><h2>Anbindung Suchmaschine (2)</h2><div class="slide-content"><div class="openblock column"><div class="content"><div class="ulist"><ul><li><p>Wrapper für Ergebnisse</p><div class="ulist"><ul><li><p>Gesamtzahl Ergebnisse</p></li><li><p>Liste von Ergebnissen (Text mit Hit-Offsets; Tokens + Annotationen)</p></li><li><p>Ressourcen-PID, Ergebnisdetail-URLs</p></li></ul></div></li><li><p><code>SRUSearchResultSet</code>-Implementierung</p><div class="ulist"><ul><li><p>Iterator Interface → <code>nextRecord()</code>, <code>writeRecord()</code>; <code>curRecordCursor</code></p></li></ul></div></li><li><p>Bsp.: <a href="https://github.com/Leipzig-Corpora-Collection/fcs-noske-endpoint/blob/main/src/main/java/de/saw_leipzig/textplus/webservices/fcs/fcs_noske_endpoint/searcher/MyResults.java">MyResults</a>, <a href="https://github.com/Leipzig-Corpora-Collection/fcs-noske-endpoint/blob/main/src/main/java/de/saw_leipzig/textplus/webservices/fcs/fcs_noske_endpoint/NoSkESRUFCSSearchResultSet.java">NoSkESRUFCSSearchResultSet</a></p></li></ul></div></div></div>
<div class="openblock column"><div class="content"><div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-java hljs" data-noescape="true" data-lang="java">protected NoSkESRUFCSSearchResultSet(..., MyResults results) {
    super(diagnostics);
    this.serverConfig = serverConfig;
    this.request = request;

    this.results = results;
    currentRecordCursor = -1;
    // ...

public int getTotalRecordCount() { return (int) results.getTotal(); }
public int getRecordCount() { return results.getResults().size(); }

public boolean nextRecord() throws SRUException {
    if (currentRecordCursor &lt; (getRecordCount() - 1)) {
        currentRecordCursor++;
        return true; }
    return false; }

public void writeRecord(XMLStreamWriter writer) {
    MyResults.ResultEntry result = results.getResults().get(currentRecordCursor);

    XMLStreamWriterHelper.writeStartResource(writer, results.getPid(), null);
    XMLStreamWriterHelper.writeStartResourceFragment(writer, null, result.landingpage);
    // ...
    XMLStreamWriterHelper.writeEndResourceFragment(writer);
    XMLStreamWriterHelper.writeEndResource(writer);
}</code></pre></div></div></div></div></div></section><section id="_ergebnis_serialisierung_2"><h2>Ergebnis-Serialisierung</h2><div class="slide-content"><div class="ulist"><ul><li><p><code>SRUXMLStreamWriter</code> - <a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/SRUXMLStreamWriter.java">Java</a>, <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/xml/writer.py#L24">Python</a></p><div class="ulist"><ul><li><p>(intern), insbesondere für SRU “<code>recordXmlEscaping</code>”</p></li></ul></div></li><li><p><strong><code>XMLStreamWriterHelper</code></strong> - <a href="https://github.com/clarin-eric/fcs-simple-endpoint/blob/main/src/main/java/eu/clarin/sru/server/fcs/XMLStreamWriterHelper.java">Java</a>, <a href="https://github.com/Querela/fcs-simple-endpoint-python/blob/1.0.4/src/clarin/sru/fcs/xml/writer.py#L21">Python</a> (<code class="darkgrey">FCSRecordXMLStreamWriter</code>)</p><div class="ulist"><ul><li><p>Boilerplate + Hilfe zum Schreiben von <em>Record</em>, <em>RecordFragment</em>, <em>Hits/Kwic DataView</em></p></li></ul></div></li><li><p><strong><code>AdvancedDataViewWriter</code></strong> - <a href="https://github.com/clarin-eric/fcs-simple-endpoint/blob/main/src/main/java/eu/clarin/sru/server/fcs/AdvancedDataViewWriter.java">Java</a>, <a href="https://github.com/Querela/fcs-simple-endpoint-python/blob/1.0.4/src/clarin/sru/fcs/xml/writer.py#L508">Python</a></p><div class="ulist"><ul><li><p>Hilfe beim Schreiben von <em>Advanced Data Views</em></p></li><li><p><code>addSpans</code> (Inhalt, Layer, Offset, Hit?)</p><div class="paragraph"><p><code>writeHitsDataView</code>, <code>writeAdvancedDataView</code></p></div></li></ul></div></li></ul></div></div></section><section id="_minimale_konfiguration_endpoint_description" class="columns"><h2>Minimale Konfiguration – Endpoint Description</h2><div class="slide-content"><div class="openblock column is-one-third"><div class="content"><div class="ulist"><ul><li><p>FCS Version: 2</p></li><li><p>Capabilities: BASIC Search</p></li><li><p>Data Views: HITS</p></li><li><p>Resources: (min: 1)</p><div class="ulist"><ul><li><p>Titel</p></li><li><p>Description</p></li><li><p>LandingPage URL</p></li><li><p>Languages → eine Sprache (ISO 639-3)</p></li></ul></div></li></ul></div></div></div>
<div class="openblock column"><div class="content"><div class="listingblock small width-75"><div class="content"><pre class="highlightjs highlight"><code class="language-xml hljs" data-noescape="true" data-line-numbers="5,7,10,13,14,15,16,17,18,20,22" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;EndpointDescription xmlns="http://clarin.eu/fcs/endpoint-description"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://clarin.eu/fcs/endpoint-description ../../schema/Core_2/Endpoint-Description.xsd"
             version="2"&gt;
  &lt;Capabilities&gt;
    &lt;Capability&gt;http://clarin.eu/fcs/capability/basic-search&lt;/Capability&gt;
  &lt;/Capabilities&gt;
  &lt;SupportedDataViews&gt;
    &lt;SupportedDataView id="hits" delivery-policy="send-by-default" &gt;application/x-clarin-fcs-hits+xml&lt;/SupportedDataView&gt;
  &lt;/SupportedDataViews&gt;
  &lt;Resources&gt;
    &lt;Resource pid="hdl:10794/sbkorpusar"&gt;
      &lt;Title xml:lang="sv"&gt;Språkbankens korpusar&lt;/Title&gt;
      &lt;Title xml:lang="en"&gt;The Språkbanken corpora&lt;/Title&gt;
      &lt;Description xml:lang="sv"&gt;Korpusarna hos Språkbanken.&lt;/Description&gt;
      &lt;Description xml:lang="en"&gt;The corpora at Språkbanken.&lt;/Description&gt;
      &lt;LandingPageURI &gt;https://spraakbanken.gu.se/resurser/corpus&lt;/LandingPageURI&gt;
      &lt;Languages&gt;
        &lt;Language&gt;swe&lt;/Language&gt;
      &lt;/Languages&gt;
      &lt;AvailableDataViews ref="hits"/&gt;
    &lt;/Resource&gt;
  &lt;/Resources&gt;
&lt;/EndpointDescription&gt;</code></pre></div></div></div></div></div></section><section id="_minimale_konfiguration_sru"><h2>Minimale Konfiguration – SRU</h2><div class="slide-content"><div class="ulist"><ul><li><p>SRU Server Einstellungen → <a href="#_endpunkt_konfigurationen">Endpunkt Konfigurationen</a> (<code>sru-server-config.xml</code>)</p><div class="ulist"><ul><li><p><code>databaseInfo</code> mit generellen Infos zu Endpunkt</p></li><li><p>default: <code>indexInfo</code> + <code>schemaInfo</code></p></li><li><p>notwendig: <span class="green"><code>serverInfo</code> > <code>database</code></span> (<code>host</code> und <code>port</code> by default)</p></li></ul></div></li><li><p>Web Server Konfiguration</p><div class="ulist"><ul><li><p>optionale Anpassung von SRU / FCS Parametern</p></li><li><p>Java: <code>web.xml</code></p></li><li><p>Python: Key-Value Dictionary</p></li></ul></div></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p>default: <code>indexInfo</code> + <code>schemaInfo</code> → Copy-Paste von Template/existierenden Endpunkten, Konfiguration bleibt hier größtenteils immer gleich</p></li></ul></div></aside></div></section><section id="_deployment_fcs_endpoint_java"><h2>Deployment FCS Endpoint (Java)</h2><div class="slide-content"><div class="ulist"><ul><li><p>Nutzung von Maven (!) / <code>pom.xml</code></p><div class="ulist"><ul><li><p><code>&lt;packaging&gt;war&lt;/packaging&gt;</code></p></li><li><p>Build Plugin:</p><div class="ulist"><ul><li><p><em><code>org.apache.maven.plugins:maven-war-plugin[:2.6]</code></em> (?)</p></li><li><p><code>org.apache.maven.plugins:maven-compiler-plugin</code></p></li></ul></div></li></ul></div></li><li><p>Erstellung von WAR-Artefakt</p></li><li><p><code>mvn clean compile war:war</code></p></li><li><p><code>mvn clean package</code> (mit Tests usw.)</p></li><li><p>Ausführen mit Java Servlet Engine / HTTP Server wie <a href="https://tomcat.apache.org/">Apache Tomcat</a> /  <a href="https://eclipse.dev/jetty/">Eclipse Jetty</a> / …</p></li></ul></div>
<aside class="notes"><div class="ulist"><ul><li><p>TODO: Check, ob <code>maven-war-plugin</code> nicht mehr notwendig?</p></li></ul></div></aside></div></section><section id="_deployment_fcs_endpoint_python"><h2>Deployment FCS Endpoint (Python)</h2><div class="slide-content"><div class="ulist"><ul><li><p>“<code>make_app()</code>”-Funktion</p><div class="paragraph"><p>→ liefert konfigurierte WSGI <code>SRUServerApp</code> (<a href="https://github.com/Querela/fcs-sru-server-python/blob/main/src/clarin/sru/server/wsgi.py">python</a>)</p></div></li><li><p>Deployment-Vorschlag: <a href="https://gunicorn.org/">gunicorn</a> (Python WSGI HTTP Server)</p></li><li><p>Beispiel: <a href="https://github.com/Querela/fcs-korp-endpoint-python/">fcs-korp-endpoint-python</a></p><div class="ulist"><ul><li><p>als <a href="https://github.com/Querela/fcs-korp-endpoint-python/blob/main/src/korp_endpoint/<em>main</em>.py">Modul</a> mit <a href="https://werkzeug.palletsprojects.com/en/3.0.x/serving/">werkzeug Test Server</a></p><div class="paragraph darkgrey"><p><code>python3 -m korp_endpoint</code></p></div></li><li><p>gunicorn in Docker Container (<a href="https://github.com/Querela/fcs-korp-endpoint-python/blob/5ee448d2369e450571a6d82d3e379154752a3397/Dockerfile#L44-L49">Dockerfile</a>)</p><div class="paragraph darkgrey"><p><code>gunicorn 'korp_endpoint.app:make_gunicorn_app()'</code></p></div></li></ul></div></li></ul></div></div></section><section id="_embedded_fcs_endpoint_python" class="columns"><h2>Embedded FCS Endpoint (Python)</h2><div class="slide-content"><div class="openblock column is-half"><div class="content"><div class="ulist"><ul><li><p>Test nur mit Python als WSGI-App in Flask</p><div class="paragraph"><p>→ in kosh: <a href="https://github.com/Querela/kosh/tree/feature/fcs">PR</a>, <a href="https://github.com/cceh/kosh/commit/1785582775dde1839e4b2f106625e0bd79d86141">Commit</a></p></div></li><li><p>Idee:</p><div class="ulist"><ul><li><p><code>SRUServer</code> mit <code>SRUSearchEngine</code> (global) erstellen</p></li><li><p>nach Pfad gefilterte Anfragen an <code>SRUServer</code> leiten</p></li></ul></div></li></ul></div></div></div>
<div class="openblock column"><div class="content"><div class="listingblock code-width-full"><div class="content"><pre class="highlightjs highlight"><code class="language-python hljs" data-noescape="true" data-line-numbers="2,3,5,6,7,8,9,10,11,12,13,14,19,20,21" data-lang="python">def init(self, flask: Flask) -&gt; None:
    self.server = self.build_fcs_server()
    flask.add_url_rule("some-path/fcs", "some-path/fcs", self.handle)

def build_fcs_server(self) -&gt; SRUServer:
    params = self.build_fcs_server_params()
    config = self.build_fcs_server_config(params)
    qpr_builder = SRUQueryParserRegistry.Builder(True)
    search_engine = KoshFCSEndpointSearchEngine(
        endpoint_description=self.build_fcs_endpointdescription(),
        # ... other parameters
    )
    search_engine.init(config, qpr_builder, params)
    return SRUServer(config, qpr_builder.build(), search_engine)

def handle(self) -&gt; Response:
    LOGGER.debug("request: %s", request)  # Flask/Werkzeug Request
    LOGGER.debug("request?args: %s", request.args)
    response = Response()                 # Flask/Werkzeug Response
    self.server.handle_request(request, response)
    return response</code></pre></div></div></div></div></div></section><section id="_fcs_endpunkt_erweiterbarkeit" class="small"><h2>FCS Endpunkt – Erweiterbarkeit</h2><div class="slide-content"><div class="ulist"><ul><li><p>Ermöglicht eigene Anfragesprachen, DataViews usw.</p></li><li><p>am Beispiel von <strong>LexFCS</strong> (FCS Erweiterung für Lexikalalische Ressourcen)</p><div class="paragraph"><p>→ d.h. neue Query Language und DataView</p></div></li></ul></div>
<div class="ulist mt-4"><ul><li><p><strong>LexCQL</strong> - Query Language (CQL Dialekt)</p><div class="ulist"><ul><li><p><code>SRUQueryParser</code> (<a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/SRUQueryParser.java">java</a>, <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/queryparser.py#L58">python</a>), analog zu <code>CQLQueryParser</code> (<a href="https://github.com/clarin-eric/fcs-sru-server/blob/main/src/main/java/eu/clarin/sru/server/CQLQueryParser.java">java</a>, <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/queryparser.py#L281">python</a>)</p><div class="paragraph"><p>→ <code>LexCQLQueryParser</code> mit <code>LexCQLQuery</code></p></div></li><li><p><code>SimpleEndpointSearchEngineBase.doInit()</code> (<a href="https://github.com/clarin-eric/fcs-simple-endpoint/blob/FCSSimpleEndpoint-1.6.0/src/main/java/eu/clarin/sru/server/fcs/SimpleEndpointSearchEngineBase.java#L181">java</a>, <a href="https://github.com/Querela/fcs-simple-endpoint-python/blob/1.0.4/src/clarin/sru/fcs/server/search.py#L722">python</a>)</p><div class="paragraph"><p>→ <code>queryParsersBuilder.register(new LexCQLQueryParser());</code></p></div></li></ul></div></li><li><p><strong>LexHITS</strong> - HITS Data View Erweiterung</p><div class="ulist"><ul><li><p>im <code>SRUSearchResultSet.writeRecord</code> (<a href="https://github.com/clarin-eric/fcs-sru-server/blob/SRUServer-1.9.0/src/main/java/eu/clarin/sru/server/SRUSearchResultSet.java#L182">java</a>, <a href="https://github.com/Querela/fcs-sru-server-python/blob/1.1.3/src/clarin/sru/server/result.py#L346">python</a>) entsprechende XML Ergebnis Serialisierung</p></li></ul></div></li></ul></div>
<div style="page-break-after: always;"></div></div></section></section>
<section><section id="_deployment" data-background-image="images/textplus-fcs.002.png" data-background-opacity="0.5"><h2>Deployment</h2><div class="slide-content"><aside class="notes"><div class="ulist"><ul><li><p>Deployment-Anweisungen zum FCS Endpoint Tester, FCS SRU Aggregator und FCS Korp Endpoint</p></li></ul></div></aside></div></section><section id="_fcs_endpoint_tester"><h2>FCS Endpoint Tester</h2><div class="slide-content"><div class="ulist"><ul><li><p>WebApp zum Testen der <strong>Konformität zur FCS Spezifikation</strong> von Endpunkten</p></li></ul></div>
<div class="ulist mt-3"><ul><li><p>Code: <a href="https://github.com/clarin-eric/fcs-endpoint-tester">github.com/clarin-eric/fcs-endpoint-tester</a></p></li><li><p>Deployment: <a href="http://clarin.ids-mannheim.de/srutest">clarin.ids-mannheim.de/srutest</a></p></li><li><p>Java 8; Vaadin 7.7.15 (UI)</p></li></ul></div>
<div class="ulist mt-3"><ul><li><p>Installation nutzt SNAPSHOT-Versionen der SRU/FCS Bibliotheken und normalerweise blockierte Funktionen zur Validierung der SRU/FCS Protokolle</p></li></ul></div></div></section><section id="_fcs_endpoint_tester_deployment" class="small left"><h2>FCS Endpoint Tester – Deployment</h2><div class="slide-content"><div class="paragraph"><p>SRU/FCS SNAPSHOT Bibliotheken müssen direkt von Git installiert werden</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ git clone https://github.com/clarin-eric/fcs-sru-client.git &amp;&amp; cd fcs-sru-client
$ mvn install
$ git clone https://github.com/clarin-eric/fcs-simple-client.git &amp;&amp; cd fcs-simple-client
$ mvn install</code></pre></div></div>
<div class="paragraph"><p>Build mit Maven</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ git clone https://github.com/clarin-eric/fcs-endpoint-tester.git &amp;&amp; cd fcs-endpoint-tester
$ mvn clean package</code></pre></div></div>
<div class="paragraph"><p>Deployment mit Jetty für <a href="http://localhost:8080/" class="bare">http://localhost:8080/</a></p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ JETTY_VERSION="9.4.51.v20230217"
$ wget https://repo1.maven.org/maven2/org/eclipse/jetty/jetty-distribution/${JETTY_VERSION}/jetty-distribution-${JETTY_VERSION}.zip &amp;&amp; unzip jetty-distribution-${JETTY_VERSION}.zip &amp;&amp; rm jetty-distribution-${JETTY_VERSION}.zip
$ cd jetty-distribution-${JETTY_VERSION}/
$ java -jar start.jar --add-to-start=http,deploy
$ cd webapps/ &amp;&amp; cp ../../target/FCSEndpointTester-X.Y.Z-SNAPSHOT.war ROOT.war &amp;&amp; cd ..
$ java -jar start.jar</code></pre></div></div></div></section><section id="_fcs_endpoint_tester_deployment_docker" class="left"><h2>FCS Endpoint Tester – Deployment (Docker)</h2><div class="slide-content"><div class="paragraph"><p>Docker Image erstellen</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ git clone https://github.com/clarin-eric/fcs-endpoint-tester.git &amp;&amp; cd fcs-endpoint-tester
$ docker build -t fcs-endpoint-tester .</code></pre></div></div>
<div class="paragraph"><p>Container ausführen</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ docker run --rm -it -p 8080:8080 fcs-endpoint-tester</code></pre></div></div></div></section><section id="_fcs_sru_aggregator"><h2>FCS SRU Aggregator</h2><div class="slide-content"><div class="ulist"><ul><li><p>Primäre FCS Client-Anwendung</p></li><li><p>Zentrale Suchoberfläche für Benutzer,</p><div class="paragraph"><p>“aggregiert” FCS Suchanfragen an verteilte Endpunkte</p></div></li></ul></div>
<div class="ulist mt-3"><ul><li><p>Code: <a href="https://github.com/clarin-eric/fcs-sru-aggregator">github.com/clarin-eric/fcs-sru-aggregator</a></p></li><li><p>Deployments:</p><div class="ulist"><ul><li><p><strong>CLARIN</strong>: <a href="https://contentsearch.clarin.eu/">contentsearch.clarin.eu</a> + (<a href="https://alpha-contentsearch.clarin.eu/">Alpha</a> / <a href="https://beta-contentsearch.clarin.eu/">Beta</a> Instanzen)</p></li><li><p><strong>Text+</strong>: <a href="https://fcs.text-plus.org/">fcs.text-plus.org</a></p></li></ul></div></li><li><p>Registratur von Endpunkten in <a href="https://centres.clarin.eu/fcs">Centre Registry</a> + SideLoading</p></li><li><p>Deployment-Anweisungen im Repo in der <a href="https://github.com/clarin-eric/fcs-sru-aggregator/blob/master/DEPLOYMENT.md"><code>DEPLOYMENT.md</code></a></p></li></ul></div></div></section><section id="_fcs_sru_aggregator_deployment" class="left"><h2>FCS SRU Aggregator – Deployment</h2><div class="slide-content"><div class="paragraph"><p>Anwendung bauen (nativ)</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ git clone https://github.com/clarin-eric/fcs-sru-aggregator.git &amp;&amp; cd fcs-sru-aggregator
$ ./build.sh --jar</code></pre></div></div>
<div class="paragraph"><p>Konfiguration (Endpunkt Sideloading + Logging) in <code>aggregator_devel.yml</code> (<code>aggregator.yml</code> für Produktiv-Deployment)</p></div>
<div class="openblock small ms-3 left"><div class="content"><div class="ulist"><ul><li><p><code>aggregatorParams</code> → <code>additionalFCSEndpoints</code></p></li><li><p><code>logging</code> → <code>loggers</code></p></li></ul></div></div></div>
<div class="paragraph"><p>Ausführen für <a href="http://localhost:4019/" class="bare">http://localhost:4019/</a></p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ ./build.sh --run</code></pre></div></div></div></section><section id="_fcs_sru_aggregator_deployment_docker" class="left"><h2>FCS SRU Aggregator – Deployment (Docker)</h2><div class="slide-content"><div class="paragraph"><p>Docker Image erstellen</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ git clone https://github.com/clarin-eric/fcs-sru-aggregator.git &amp;&amp; cd fcs-sru-aggregator
$ docker build --tag=fcs-aggregator .</code></pre></div></div>
<div class="paragraph"><p>Docker Container ausführen</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ touch fcsAggregatorCorpora.json fcsAggregatorCorpora.backup.json
$ docker run -d --restart unless-stopped \
    -p 4019:4019 -p 5005:5005 \
    -v $(pwd)/aggregator.yml:/work/aggregator.yml:ro \
    -v $(pwd)/fcsAggregatorCorpora.json:/var/lib/aggregator/fcsAggregatorCorpora.json \
    -v $(pwd)/fcsAggregatorCorpora.backup.json:/var/lib/aggregator/fcsAggregatorCorpora.backup.json \
    fcs-aggregator</code></pre></div></div></div></section><section id="_fcs_korp_endpoint"><h2>FCS Korp Endpoint</h2><div class="slide-content"><div class="ulist"><ul><li><p>Referenz-Endpunkt für Korp</p></li><li><p>Beispiel → Korp-API öffentlich erreichbar, keine weitere Konfiguration erforderlich zum Testen</p></li></ul></div>
<div class="ulist mt-3"><ul><li><p>Code:</p><div class="ulist"><ul><li><p>Java: github.com/clarin-eric/fcs-korp-endpoint</p></li><li><p>Python: github.com/Querela/fcs-korp-endpoint-python/</p></li></ul></div></li><li><p>Deployment(s):</p></li><li><p><a href="https://centres.clarin.eu/centre/37">Sprakbanken (Göteborg)</a>: <a href="https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru" class="bare">https://spraakbanken.gu.se/ws/fcs/2.0/endpoint/korp/sru</a></p></li><li><p><a href="https://centres.clarin.eu/centre/14">CLARIN-DK-UCPH (Copenhagen S)</a>: <a href="https://alf.hum.ku.dk/korp/fcs/2.0/endpoint/sru" class="bare">https://alf.hum.ku.dk/korp/fcs/2.0/endpoint/sru</a></p></li><li><p>&#8230;&#8203;</p></li></ul></div></div></section><section id="_fcs_korp_endpoint_deployment_java" class="left"><h2>FCS Korp Endpoint – Deployment (Java)</h2><div class="slide-content"><div class="paragraph"><p>Erstellen</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ git clone https://github.com/clarin-eric/fcs-korp-endpoint.git &amp;&amp; cd fcs-korp-endpoint
$ mvn clean compile war:war</code></pre></div></div>
<div class="paragraph"><p>Deployment dann mit Jetty/Tomcat etc. analog zum FCS Endpoint Tester</p></div></div></section><section id="_fcs_korp_endpoint_deployment_python" class="left"><h2>FCS Korp Endpoint – Deployment (Python)</h2><div class="slide-content"><div class="paragraph"><p>Deployment vorbereiten</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ git clone https://github.com/Querela/fcs-korp-endpoint-python.git &amp;&amp; cd fcs-korp-endpoint-python
$ python3 -m venv venv &amp;&amp; source venv/bin/activate
$ python3 -m pip install -e .</code></pre></div></div>
<div class="paragraph"><p>Test-Deployment (<a href="http://localhost:8080" class="bare">http://localhost:8080</a>)</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ python3 -m korp_endpoint</code></pre></div></div>
<div class="paragraph"><p>Produktiv-Deployment mit Docker (<a href="http://localhost:5000" class="bare">http://localhost:5000</a>)</p></div>
<div class="listingblock"><div class="content"><pre class="highlightjs highlight"><code class="language-bash hljs" data-noescape="true" data-lang="bash">$ docker build --progress=plain -t korpy .
$ docker run --rm -it -p 5000:5000 korpy</code></pre></div></div></div></section><section id="_deployment_hinweise"><h2>Deployment Hinweise</h2><div class="slide-content"><div class="ulist"><ul><li><p>bei Nutzung von Docker und localhost müssen evtl. Netzwerkkonfigurationen angepasst werden, damit der Docker Container Zugriff auf den Host hat</p><div class="ulist"><ul><li><p>→ host.docker.internal</p></li></ul></div></li></ul></div>
<div style="page-break-after: always;"></div></div></section></section>
<section><section id="_ressourcen" data-background-image="images/textplus-fcs.002.png" data-background-opacity="0.5"><h2>Ressourcen</h2></section><section id="_links"><h2>Links</h2><div class="slide-content"><div class="ulist"><ul><li><p>Umfassende FCS Link-Sammlung(en):<br>
<a href="https://github.com/clarin-eric/awesome-fcs">github.com/clarin-eric/awesome-fcs</a>,<br>
<a href="https://gitlab.gwdg.de/textplus/ag-fcs-documents/-/blob/main/awesome-fcs.md">gitlab.gwdg.de/textplus/ag-fcs-documents/-/blob/main/awesome-fcs.md</a></p></li><li><p>CLARIN Übersichtsseite:<br>
<a href="https://www.clarin.eu/content/federated-content-search-clarin-fcs-technical-details">www.clarin.eu/content/federated-content-search-clarin-fcs-technical-details</a></p></li><li><p>CLARIN Code Github/Gitlab:<br>
<a href="https://github.com/clarin-eric/?q=fcs">github.com/clarin-eric/?q=fcs</a>,<br>
<a href="https://gitlab.com/CLARIN-ERIC/?filter=fcs">gitlab.com/CLARIN-ERIC/?filter=fcs</a>,<br>
<a href="https://github.com/clarin-eric/fcs-misc/">github.com/clarin-eric/fcs-misc/</a> (Specs, Docs, usw.)</p></li></ul></div></div></section><section id="_publikationen"><h2>Publikationen</h2><div class="slide-content"><div class="ulist"><ul><li><p>im Rahmen von Text+ → auf <a href="https://www.zotero.org/groups/4533881/textplus/tags/FCS/library">Zotero.org</a> mit Tag “FCS”</p></li><li><p>Auflistung in <a href="https://gitlab.gwdg.de/textplus/ag-fcs-documents/-/blob/main/awesome-fcs.md?ref_type=heads#publications">Text+ Awesome FCS</a> Liste</p></li><li><p>im Rahmen von CLARIN? → keine extra Bibliographie</p><div class="ulist"><ul><li><p>CLARIN Federated Content Search (CLARIN-FCS) – Core Specification, 2014, Oliver Schonefeld et al.</p></li><li><p>Federated Search: Towards a Common Search Infrastructure, 2012, Herman Stehouwer et al.</p></li><li><p>mehrere Workshops</p></li></ul></div></li></ul></div>
<script>
// remove hidden sections/slides;
// add role "[.hidden]" to a slide to remove it from the presentation
var sections = document.getElementsByTagName('section');
for (var i = sections.length-1; i > -1; --i) {
    console.log(sections[i].classList);
    if (sections[i].classList.contains("hidden")) {
        sections[i].remove();
    }
}
</script></div></section></section></div></div><script src="reveal.js/dist/reveal.js"></script><script>Array.prototype.slice.call(document.querySelectorAll('.slides section')).forEach(function(slide) {
  if (slide.getAttribute('data-background-color')) return;
  // user needs to explicitly say he wants CSS color to override otherwise we might break custom css or theme (#226)
  if (!(slide.classList.contains('canvas') || slide.classList.contains('background'))) return;
  var bgColor = getComputedStyle(slide).backgroundColor;
  if (bgColor !== 'rgba(0, 0, 0, 0)' && bgColor !== 'transparent') {
    slide.setAttribute('data-background-color', bgColor);
    slide.style.backgroundColor = 'transparent';
  }
});

// More info about config & dependencies:
// - https://github.com/hakimel/reveal.js#configuration
// - https://github.com/hakimel/reveal.js#dependencies
Reveal.initialize({
  // Display presentation control arrows
  controls: true,
  // Help the user learn the controls by providing hints, for example by
  // bouncing the down arrow when they first encounter a vertical slide
  controlsTutorial: true,
  // Determines where controls appear, "edges" or "bottom-right"
  controlsLayout: 'bottom-right',
  // Visibility rule for backwards navigation arrows; "faded", "hidden"
  // or "visible"
  controlsBackArrows: 'faded',
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: 'h.v',
  // Control which views the slide number displays on
  showSlideNumber: 'all',
  // Add the current slide number to the URL hash so that reloading the
  // page/copying the URL will return you to the same slide
  hash: false,
  // Push each slide change to the browser history. Implies `hash: true`
  history: false,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Disables the default reveal.js slide layout so that you can use custom CSS layout
  disableLayout: false,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // See https://github.com/hakimel/reveal.js/#navigation-mode
  navigationMode: 'default',
  // Randomizes the order of slides each time the presentation loads
  shuffle: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags whether to include the current fragment in the URL,
  // so that reloading brings you to the same fragment position
  fragmentInURL: false,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Flags if we should show a help overlay when the questionmark
  // key is pressed
  help: true,
  // Flags if speaker notes should be visible to all viewers
  showNotes: false,
  // Global override for autolaying embedded media (video/audio/iframe)
  // - null: Media will only autoplay if data-autoplay is present
  // - true: All media will autoplay, regardless of individual setting
  // - false: No media will autoplay, regardless of individual setting
  autoPlayMedia: null,
  // Global override for preloading lazy-loaded iframes
  // - null: Iframes with data-src AND data-preload will be loaded when within
  //   the viewDistance, iframes with only data-src will be loaded when visible
  // - true: All iframes with data-src will be loaded when within the viewDistance
  // - false: All iframes with data-src will be loaded only when visible
  preloadIframes: null,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Use this method for navigation when auto-sliding
  autoSlideMethod: Reveal.navigateNext,
  // Specify the average time in seconds that you think you will spend
  // presenting each slide. This is used to show a pacing timer in the
  // speaker view
  defaultTiming: 120,
  // Specify the total time in seconds that is available to
  // present.  If this is set to a nonzero value, the pacing
  // timer will work out the time available for each slide,
  // instead of using the defaultTiming value
  totalTime: 0,
  // Specify the minimum amount of time you want to allot to
  // each slide, if using the totalTime calculation method.  If
  // the automated time allocation causes slide pacing to fall
  // below this threshold, then you will see an alert in the
  // speaker notes window
  minimumTimePerSlide: 0,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hide cursor if inactive
  hideInactiveCursor: true,
  // Time before the cursor is hidden (in ms)
  hideCursorTime: 5000,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  // Add `data-preview-link` and `data-preview-link="false"` to customise each link
  // individually
  previewLinks: false,
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: 'slide',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Number of slides away from the current that are visible on mobile
  // devices. It is advisable to set this to a lower number than
  // viewDistance in order to save resources.
  mobileViewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',
  // Number of pixels to move the parallax background per slide
  // - Calculated automatically unless specified
  // - Set to 0 to disable movement along an axis
  parallaxBackgroundHorizontal: null,
  parallaxBackgroundVertical: null,
  // The display mode that will be used to show slides
  display: 'block',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 1408,
  height: 892,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // PDF Export Options
  // Put each fragment on a separate page
  pdfSeparateFragments: true,
  // For slides that do not fit on a page, max number of pages
  pdfMaxPagesPerSlide: 1,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'reveal.js/plugin/zoom/zoom.js', async: true, callback: function () { Reveal.registerPlugin(RevealZoom) } },
      { src: 'reveal.js/plugin/notes/notes.js', async: true, callback: function () { Reveal.registerPlugin(RevealNotes) } }
  ],
});</script><script>var dom = {};
dom.slides = document.querySelector('.reveal .slides');

function getRemainingHeight(element, slideElement, height) {
  height = height || 0;
  if (element) {
    var newHeight, oldHeight = element.style.height;
    // Change the .stretch element height to 0 in order find the height of all
    // the other elements
    element.style.height = '0px';
    // In Overview mode, the parent (.slide) height is set of 700px.
    // Restore it temporarily to its natural height.
    slideElement.style.height = 'auto';
    newHeight = height - slideElement.offsetHeight;
    // Restore the old height, just in case
    element.style.height = oldHeight + 'px';
    // Clear the parent (.slide) height. .removeProperty works in IE9+
    slideElement.style.removeProperty('height');
    return newHeight;
  }
  return height;
}

function layoutSlideContents(width, height) {
  // Handle sizing of elements with the 'stretch' class
  toArray(dom.slides.querySelectorAll('section .stretch')).forEach(function (element) {
    // Determine how much vertical space we can use
    var limit = 5; // hard limit
    var parent = element.parentNode;
    while (parent.nodeName !== 'SECTION' && limit > 0) {
      parent = parent.parentNode;
      limit--;
    }
    if (limit === 0) {
      // unable to find parent, aborting!
      return;
    }
    var remainingHeight = getRemainingHeight(element, parent, height);
    // Consider the aspect ratio of media elements
    if (/(img|video)/gi.test(element.nodeName)) {
      var nw = element.naturalWidth || element.videoWidth, nh = element.naturalHeight || element.videoHeight;
      var es = Math.min(width / nw, remainingHeight / nh);
      element.style.width = (nw * es) + 'px';
      element.style.height = (nh * es) + 'px';
    } else {
      element.style.width = width + 'px';
      element.style.height = remainingHeight + 'px';
    }
  });
}

function toArray(o) {
  return Array.prototype.slice.call(o);
}

Reveal.addEventListener('slidechanged', function () {
  layoutSlideContents(1408, 892)
});
Reveal.addEventListener('ready', function () {
  layoutSlideContents(1408, 892)
});
Reveal.addEventListener('resize', function () {
  layoutSlideContents(1408, 892)
});</script><link rel="stylesheet" href="reveal.js/plugin/highlight/magula.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/xml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/java.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/json.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/isbl.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/csharp.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/wren.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.3/languages/x86asm.min.js"></script>

<script>

/* highlightjs-line-numbers.js 2.6.0 | (C) 2018 Yauheni Pakala | MIT License | github.com/wcoder/highlightjs-line-numbers.js */
/* Edited by Hakim for reveal.js; removed async timeout */
!function(n,e){"use strict";function t(){var n=e.createElement("style");n.type="text/css",n.innerHTML=g(".{0}{border-collapse:collapse}.{0} td{padding:0}.{1}:before{content:attr({2})}",[v,L,b]),e.getElementsByTagName("head")[0].appendChild(n)}function r(t){"interactive"===e.readyState||"complete"===e.readyState?i(t):n.addEventListener("DOMContentLoaded",function(){i(t)})}function i(t){try{var r=e.querySelectorAll("code.hljs,code.nohighlight");for(var i in r)r.hasOwnProperty(i)&&l(r[i],t)}catch(o){n.console.error("LineNumbers error: ",o)}}function l(n,e){"object"==typeof n&&f(function(){n.innerHTML=s(n,e)})}function o(n,e){if("string"==typeof n){var t=document.createElement("code");return t.innerHTML=n,s(t,e)}}function s(n,e){e=e||{singleLine:!1};var t=e.singleLine?0:1;return c(n),a(n.innerHTML,t)}function a(n,e){var t=u(n);if(""===t[t.length-1].trim()&&t.pop(),t.length>e){for(var r="",i=0,l=t.length;i<l;i++)r+=g('<tr><td class="{0}"><div class="{1} {2}" {3}="{5}"></div></td><td class="{4}"><div class="{1}">{6}</div></td></tr>',[j,m,L,b,p,i+1,t[i].length>0?t[i]:" "]);return g('<table class="{0}">{1}</table>',[v,r])}return n}function c(n){var e=n.childNodes;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];h(r.textContent)>0&&(r.childNodes.length>0?c(r):d(r.parentNode))}}function d(n){var e=n.className;if(/hljs-/.test(e)){for(var t=u(n.innerHTML),r=0,i="";r<t.length;r++){var l=t[r].length>0?t[r]:" ";i+=g('<span class="{0}">{1}</span>\n',[e,l])}n.innerHTML=i.trim()}}function u(n){return 0===n.length?[]:n.split(y)}function h(n){return(n.trim().match(y)||[]).length}function f(e){e()}function g(n,e){return n.replace(/{(\d+)}/g,function(n,t){return e[t]?e[t]:n})}var v="hljs-ln",m="hljs-ln-line",p="hljs-ln-code",j="hljs-ln-numbers",L="hljs-ln-n",b="data-line-number",y=/\r\n|\r|\n/g;n.hljs?(n.hljs.initLineNumbersOnLoad=r,n.hljs.lineNumbersBlock=l,n.hljs.lineNumbersValue=o,t()):n.console.error("highlight.js not detected!")}(window,document);

/**
 * This reveal.js plugin is wrapper around the highlight.js
 * syntax highlighting library.
 */
(function( root, factory ) {
  if (typeof define === 'function' && define.amd) {
    root.RevealHighlight = factory();
  } else if( typeof exports === 'object' ) {
    module.exports = factory();
  } else {
    // Browser globals (root is window)
    root.RevealHighlight = factory();
  }
}( this, function() {

  // Function to perform a better "data-trim" on code snippets
  // Will slice an indentation amount on each line of the snippet (amount based on the line having the lowest indentation length)
  function betterTrim(snippetEl) {
    // Helper functions
    function trimLeft(val) {
      // Adapted from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill
      return val.replace(/^[\s\uFEFF\xA0]+/g, '');
    }
    function trimLineBreaks(input) {
      var lines = input.split('\n');

      // Trim line-breaks from the beginning
      for (var i = 0; i < lines.length; i++) {
        if (lines[i].trim() === '') {
          lines.splice(i--, 1);
        } else break;
      }

      // Trim line-breaks from the end
      for (var i = lines.length-1; i >= 0; i--) {
        if (lines[i].trim() === '') {
          lines.splice(i, 1);
        } else break;
      }

      return lines.join('\n');
    }

    // Main function for betterTrim()
    return (function(snippetEl) {
      var content = trimLineBreaks(snippetEl.innerHTML);
      var lines = content.split('\n');
      // Calculate the minimum amount to remove on each line start of the snippet (can be 0)
      var pad = lines.reduce(function(acc, line) {
        if (line.length > 0 && trimLeft(line).length > 0 && acc > line.length - trimLeft(line).length) {
          return line.length - trimLeft(line).length;
        }
        return acc;
      }, Number.POSITIVE_INFINITY);
      // Slice each line with this amount
      return lines.map(function(line, index) {
        return line.slice(pad);
      })
        .join('\n');
    })(snippetEl);
  }

  var RevealHighlight = {

    HIGHLIGHT_STEP_DELIMITER: '|',
    HIGHLIGHT_LINE_DELIMITER: ',',
    HIGHLIGHT_LINE_RANGE_DELIMITER: '-',

    init: function( reveal ) {

      // Read the plugin config options and provide fallbacks
      var config = Reveal.getConfig().highlight || {};
      config.highlightOnLoad = typeof config.highlightOnLoad === 'boolean' ? config.highlightOnLoad : true;
      config.escapeHTML = typeof config.escapeHTML === 'boolean' ? config.escapeHTML : true;

      [].slice.call( reveal.getRevealElement().querySelectorAll( 'pre code' ) ).forEach( function( block ) {

        block.parentNode.className = 'code-wrapper';

        // Code can optionally be wrapped in script template to avoid
        // HTML being parsed by the browser (i.e. when you need to
        // include <, > or & in your code).
        let substitute = block.querySelector( 'script[type="text/template"]' );
        if( substitute ) {
          // textContent handles the HTML entity escapes for us
          block.textContent = substitute.innerHTML;
        }

        // Trim whitespace if the "data-trim" attribute is present
        if( block.hasAttribute( 'data-trim' ) && typeof block.innerHTML.trim === 'function' ) {
          block.innerHTML = betterTrim( block );
        }

        // Escape HTML tags unless the "data-noescape" attrbute is present
        if( config.escapeHTML && !block.hasAttribute( 'data-noescape' )) {
          block.innerHTML = block.innerHTML.replace( /</g,"&lt;").replace(/>/g, '&gt;' );
        }

        // Re-highlight when focus is lost (for contenteditable code)
        block.addEventListener( 'focusout', function( event ) {
          hljs.highlightElement( event.currentTarget );
        }, false );

        if( config.highlightOnLoad ) {
          RevealHighlight.highlightBlock( block );
        }
      } );

      // If we're printing to PDF, scroll the code highlights of
      // all blocks in the deck into view at once
      reveal.on( 'pdf-ready', function() {
        [].slice.call( reveal.getRevealElement().querySelectorAll( 'pre code[data-line-numbers].current-fragment' ) ).forEach( function( block ) {
          RevealHighlight.scrollHighlightedLineIntoView( block, {}, true );
        } );
      } );
    },

    /**
     * Highlights a code block. If the <code> node has the
     * 'data-line-numbers' attribute we also generate slide
     * numbers.
     *
     * If the block contains multiple line highlight steps,
     * we clone the block and create a fragment for each step.
     */
    highlightBlock: function( block ) {

      hljs.highlightElement( block );

      // Don't generate line numbers for empty code blocks
      if( block.innerHTML.trim().length === 0 ) return;

      if( block.hasAttribute( 'data-line-numbers' ) ) {
        hljs.lineNumbersBlock( block, { singleLine: true } );

        var scrollState = { currentBlock: block };

        // If there is at least one highlight step, generate
        // fragments
        var highlightSteps = RevealHighlight.deserializeHighlightSteps( block.getAttribute( 'data-line-numbers' ) );
        if( highlightSteps.length > 1 ) {

          // If the original code block has a fragment-index,
          // each clone should follow in an incremental sequence
          var fragmentIndex = parseInt( block.getAttribute( 'data-fragment-index' ), 10 );

          if( typeof fragmentIndex !== 'number' || isNaN( fragmentIndex ) ) {
            fragmentIndex = null;
          }

          // Generate fragments for all steps except the original block
          highlightSteps.slice(1).forEach( function( highlight ) {

            var fragmentBlock = block.cloneNode( true );
            fragmentBlock.setAttribute( 'data-line-numbers', RevealHighlight.serializeHighlightSteps( [ highlight ] ) );
            fragmentBlock.classList.add( 'fragment' );
            block.parentNode.appendChild( fragmentBlock );
            RevealHighlight.highlightLines( fragmentBlock );

            if( typeof fragmentIndex === 'number' ) {
              fragmentBlock.setAttribute( 'data-fragment-index', fragmentIndex );
              fragmentIndex += 1;
            }
            else {
              fragmentBlock.removeAttribute( 'data-fragment-index' );
            }

            // Scroll highlights into view as we step through them
            fragmentBlock.addEventListener( 'visible', RevealHighlight.scrollHighlightedLineIntoView.bind( Plugin, fragmentBlock, scrollState ) );
            fragmentBlock.addEventListener( 'hidden', RevealHighlight.scrollHighlightedLineIntoView.bind( Plugin, fragmentBlock.previousSibling, scrollState ) );

          } );

          block.removeAttribute( 'data-fragment-index' )
          block.setAttribute( 'data-line-numbers', RevealHighlight.serializeHighlightSteps( [ highlightSteps[0] ] ) );

        }

        // Scroll the first highlight into view when the slide
        // becomes visible. Note supported in IE11 since it lacks
        // support for Element.closest.
        var slide = typeof block.closest === 'function' ? block.closest( 'section:not(.stack)' ) : null;
        if( slide ) {
          var scrollFirstHighlightIntoView = function() {
            RevealHighlight.scrollHighlightedLineIntoView( block, scrollState, true );
            slide.removeEventListener( 'visible', scrollFirstHighlightIntoView );
          }
          slide.addEventListener( 'visible', scrollFirstHighlightIntoView );
        }

        RevealHighlight.highlightLines( block );

      }

    },

    /**
     * Animates scrolling to the first highlighted line
     * in the given code block.
     */
    scrollHighlightedLineIntoView: function( block, scrollState, skipAnimation ) {

      cancelAnimationFrame( scrollState.animationFrameID );

      // Match the scroll position of the currently visible
      // code block
      if( scrollState.currentBlock ) {
        block.scrollTop = scrollState.currentBlock.scrollTop;
      }

      // Remember the current code block so that we can match
      // its scroll position when showing/hiding fragments
      scrollState.currentBlock = block;

      var highlightBounds = RevealHighlight.getHighlightedLineBounds( block )
      var viewportHeight = block.offsetHeight;

      // Subtract padding from the viewport height
      var blockStyles = getComputedStyle( block );
      viewportHeight -= parseInt( blockStyles.paddingTop ) + parseInt( blockStyles.paddingBottom );

      // Scroll position which centers all highlights
      var startTop = block.scrollTop;
      var targetTop = highlightBounds.top + ( Math.min( highlightBounds.bottom - highlightBounds.top, viewportHeight ) - viewportHeight ) / 2;

      // Account for offsets in position applied to the
      // <table> that holds our lines of code
      var lineTable = block.querySelector( '.hljs-ln' );
      if( lineTable ) targetTop += lineTable.offsetTop - parseInt( blockStyles.paddingTop );

      // Make sure the scroll target is within bounds
      targetTop = Math.max( Math.min( targetTop, block.scrollHeight - viewportHeight ), 0 );

      if( skipAnimation === true || startTop === targetTop ) {
        block.scrollTop = targetTop;
      }
      else {

        // Don't attempt to scroll if there is no overflow
        if( block.scrollHeight <= viewportHeight ) return;

        var time = 0;
        var animate = function() {
          time = Math.min( time + 0.02, 1 );

          // Update our eased scroll position
          block.scrollTop = startTop + ( targetTop - startTop ) * RevealHighlight.easeInOutQuart( time );

          // Keep animating unless we've reached the end
          if( time < 1 ) {
            scrollState.animationFrameID = requestAnimationFrame( animate );
          }
        };

        animate();

      }

    },

    /**
     * The easing function used when scrolling.
     */
    easeInOutQuart: function( t ) {

      // easeInOutQuart
      return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t;

    },

    getHighlightedLineBounds: function( block ) {

      var highlightedLines = block.querySelectorAll( '.highlight-line' );
      if( highlightedLines.length === 0 ) {
        return { top: 0, bottom: 0 };
      }
      else {
        var firstHighlight = highlightedLines[0];
        var lastHighlight = highlightedLines[ highlightedLines.length -1 ];

        return {
          top: firstHighlight.offsetTop,
          bottom: lastHighlight.offsetTop + lastHighlight.offsetHeight
        }
      }

    },

    /**
     * Visually emphasize specific lines within a code block.
     * This only works on blocks with line numbering turned on.
     *
     * @param {HTMLElement} block a <code> block
     * @param {String} [linesToHighlight] The lines that should be
     * highlighted in this format:
     * "1" 		= highlights line 1
     * "2,5"	= highlights lines 2 & 5
     * "2,5-7"	= highlights lines 2, 5, 6 & 7
     */
    highlightLines: function( block, linesToHighlight ) {

      var highlightSteps = RevealHighlight.deserializeHighlightSteps( linesToHighlight || block.getAttribute( 'data-line-numbers' ) );

      if( highlightSteps.length ) {

        highlightSteps[0].forEach( function( highlight ) {

          var elementsToHighlight = [];

          // Highlight a range
          if( typeof highlight.end === 'number' ) {
            elementsToHighlight = [].slice.call( block.querySelectorAll( 'table tr:nth-child(n+'+highlight.start+'):nth-child(-n+'+highlight.end+')' ) );
          }
          // Highlight a single line
          else if( typeof highlight.start === 'number' ) {
            elementsToHighlight = [].slice.call( block.querySelectorAll( 'table tr:nth-child('+highlight.start+')' ) );
          }

          if( elementsToHighlight.length ) {
            elementsToHighlight.forEach( function( lineElement ) {
              lineElement.classList.add( 'highlight-line' );
            } );

            block.classList.add( 'has-highlights' );
          }

        } );

      }

    },

    /**
     * Parses and formats a user-defined string of line
     * numbers to highlight.
     *
     * @example
     * RevealHighlight.deserializeHighlightSteps( '1,2|3,5-10' )
     * // [
     * //   [ { start: 1 }, { start: 2 } ],
     * //   [ { start: 3 }, { start: 5, end: 10 } ]
     * // ]
     */
    deserializeHighlightSteps: function( highlightSteps ) {

      // Remove whitespace
      highlightSteps = highlightSteps.replace( /\s/g, '' );

      // Divide up our line number groups
      highlightSteps = highlightSteps.split( RevealHighlight.HIGHLIGHT_STEP_DELIMITER );

      return highlightSteps.map( function( highlights ) {

        return highlights.split( RevealHighlight.HIGHLIGHT_LINE_DELIMITER ).map( function( highlight ) {

          // Parse valid line numbers
          if( /^[\d-]+$/.test( highlight ) ) {

            highlight = highlight.split( RevealHighlight.HIGHLIGHT_LINE_RANGE_DELIMITER );

            var lineStart = parseInt( highlight[0], 10 ),
              lineEnd = parseInt( highlight[1], 10 );

            if( isNaN( lineEnd ) ) {
              return {
                start: lineStart
              };
            }
            else {
              return {
                start: lineStart,
                end: lineEnd
              };
            }

          }
          // If no line numbers are provided, no code will be highlighted
          else {

            return {};

          }

        } );

      } );

    },

    /**
     * Serializes parsed line number data into a string so
     * that we can store it in the DOM.
     */
    serializeHighlightSteps: function( highlightSteps ) {

      return highlightSteps.map( function( highlights ) {

        return highlights.map( function( highlight ) {

          // Line range
          if( typeof highlight.end === 'number' ) {
            return highlight.start + RevealHighlight.HIGHLIGHT_LINE_RANGE_DELIMITER + highlight.end;
          }
          // Single line
          else if( typeof highlight.start === 'number' ) {
            return highlight.start;
          }
          // All lines
          else {
            return '';
          }

        } ).join( RevealHighlight.HIGHLIGHT_LINE_DELIMITER );

      } ).join( RevealHighlight.HIGHLIGHT_STEP_DELIMITER );

    }

  }

  Reveal.registerPlugin( 'highlight', RevealHighlight );

  return RevealHighlight;

}));
        
hljs.configure({
  ignoreUnescapedHTML: true,
});
hljs.highlightAll();
</script></body></html>